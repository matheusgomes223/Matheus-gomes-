var WN=Object.defineProperty,KN=Object.defineProperties;var QN=Object.getOwnPropertyDescriptors;var TC=Object.getOwnPropertySymbols;var YN=Object.prototype.hasOwnProperty,ZN=Object.prototype.propertyIsEnumerable;var xC=(n,e,t)=>e in n?WN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})YN.call(e,t)&&xC(n,t,e[t]);if(TC)for(var t of TC(e))ZN.call(e,t)&&xC(n,t,e[t]);return n},re=(n,e)=>KN(n,QN(e));var Ut=null,pd=!1,yg=1,JN=null,Rt=Symbol("SIGNAL");function ie(n){let e=Ut;return Ut=n,e}function gd(){return Ut}var Ts={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nc(n){if(pd)throw new Error("");if(Ut===null)return;Ut.consumerOnSignalRead(n);let e=Ut.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Ut.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Ut.producers,t!==void 0&&t.producer===n)){Ut.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ut&&(!r||eO(i,Ut)))return;let o=Ms(Ut),s={producer:n,consumer:Ut,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ut.producersTail=s,e!==void 0?e.nextProducer=s:Ut.producers=s,o&&OC(n,s)}function MC(){yg++}function vg(n){if(!(Ms(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===yg)){if(!n.producerMustRecompute(n)&&!Pc(n)){gg(n);return}n.producerRecomputeValue(n),gg(n)}}function _g(n){if(n.consumers===void 0)return;let e=pd;pd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||XN(r)}}finally{pd=e}}function Eg(){return Ut?.consumerAllowSignalWrites!==!1}function XN(n){n.dirty=!0,_g(n),n.consumerMarkedDirty?.(n)}function gg(n){n.dirty=!1,n.lastCleanEpoch=yg}function xs(n){return n&&RC(n),ie(n)}function RC(n){n.producersTail=void 0,n.recomputing=!0}function Oc(n,e){ie(e),n&&NC(n)}function NC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ms(n))do t=Ig(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Pc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(vg(t),r!==t.version))return!0}return!1}function ro(n){if(Ms(n)){let e=n.producers;for(;e!==void 0;)e=Ig(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function OC(n,e){let t=n.consumersTail,r=Ms(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)OC(i.producer,i)}function Ig(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ms(e)){let o=e.producers;for(;o!==void 0;)o=Ig(o)}return t}function Ms(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function wg(n){JN?.(n)}function eO(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Cg(n,e){return Object.is(n,e)}function kc(n,e){let t=Object.create(tO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(vg(t),Nc(t),t.value===md)throw t.error;return t.value};return r[Rt]=t,wg(t),r}var pg=Symbol("UNSET"),mg=Symbol("COMPUTING"),md=Symbol("ERRORED"),tO=re(L({},Ts),{value:pg,dirty:!0,error:null,equal:Cg,kind:"computed",producerMustRecompute(n){return n.value===pg||n.value===mg},producerRecomputeValue(n){if(n.value===mg)throw new Error("");let e=n.value;n.value=mg;let t=xs(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==pg&&e!==md&&r!==md&&n.equal(e,r)}catch(o){r=md,n.error=o}finally{Oc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function nO(){throw new Error}var PC=nO;function kC(n){PC(n)}function bg(n){PC=n}var rO=null;function Dg(n,e){let t=Object.create(yd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>FC(t);return r[Rt]=t,wg(t),[r,s=>Fc(t,s),s=>LC(t,s)]}function FC(n){return Nc(n),n.value}function Fc(n,e){Eg()||kC(n),n.equal(n.value,e)||(n.value=e,iO(n))}function LC(n,e){Eg()||kC(n),Fc(n,e(n.value))}var yd=re(L({},Ts),{equal:Cg,value:void 0,kind:"signal"});function iO(n){n.version++,MC(),_g(n),rO?.(n)}function Ag(n){let e=ie(null);try{return n()}finally{ie(e)}}var Sg=re(L({},Ts),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Tg(n){if(n.dirty=!1,n.version>0&&!Pc(n))return;n.version++;let e=xs(n);try{n.cleanup(),n.fn()}finally{Oc(n,e)}}function pe(n){return typeof n=="function"}function Rs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vd=Rs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Lc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Nt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof vd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{VC(o)}catch(s){e=e??[],s instanceof vd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new vd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)VC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Lc(t,e)}remove(e){let{_finalizers:t}=this;t&&Lc(t,e),e instanceof n&&e._removeParent(this)}};Nt.EMPTY=(()=>{let n=new Nt;return n.closed=!0,n})();var xg=Nt.EMPTY;function _d(n){return n instanceof Nt||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function VC(n){pe(n)?n():n.unsubscribe()}var Vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ns={setTimeout(n,e,...t){let{delegate:r}=Ns;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ns;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ed(n){Ns.setTimeout(()=>{let{onUnhandledError:e}=Vn;if(e)e(n);else throw n})}function Vc(){}var jC=Mg("C",void 0,void 0);function UC(n){return Mg("E",void 0,n)}function BC(n){return Mg("N",n,void 0)}function Mg(n,e,t){return{kind:n,value:e,error:t}}var io=null;function Os(n){if(Vn.useDeprecatedSynchronousErrorHandling){let e=!io;if(e&&(io={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=io;if(io=null,t)throw r}}else n()}function HC(n){Vn.useDeprecatedSynchronousErrorHandling&&io&&(io.errorThrown=!0,io.error=n)}var oo=class extends Nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_d(e)&&e.add(this)):this.destination=aO}static create(e,t,r){return new Ps(e,t,r)}next(e){this.isStopped?Ng(BC(e),this):this._next(e)}error(e){this.isStopped?Ng(UC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ng(jC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oO=Function.prototype.bind;function Rg(n,e){return oO.call(n,e)}var Og=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Id(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Id(r)}else Id(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Id(t)}}},Ps=class extends oo{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Vn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rg(e.next,o),error:e.error&&Rg(e.error,o),complete:e.complete&&Rg(e.complete,o)}):i=e}this.destination=new Og(i)}};function Id(n){Vn.useDeprecatedSynchronousErrorHandling?HC(n):Ed(n)}function sO(n){throw n}function Ng(n,e){let{onStoppedNotification:t}=Vn;t&&Ns.setTimeout(()=>t(n,e))}var aO={closed:!0,next:Vc,error:sO,complete:Vc};var ks=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jn(n){return n}function Pg(...n){return kg(n)}function kg(n){return n.length===0?jn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=uO(t)?t:new Ps(t,r,i);return Os(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=$C(r),new r((i,o)=>{let s=new Ps({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ks](){return this}pipe(...t){return kg(t)(this)}toPromise(t){return t=$C(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function $C(n){var e;return(e=n??Vn.Promise)!==null&&e!==void 0?e:Promise}function cO(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function uO(n){return n&&n instanceof oo||cO(n)&&_d(n)}function lO(n){return pe(n?.lift)}function ke(n){return e=>{if(lO(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new Fg(n,e,t,r,i)}var Fg=class extends oo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var GC=Rs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var dt=(()=>{class n extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new wd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new GC}next(t){Os(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Os(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Os(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?xg:(this.currentObservers=null,o.push(t),new Nt(()=>{this.currentObservers=null,Lc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Me;return t.source=this,t}}return n.create=(e,t)=>new wd(e,t),n})(),wd=class extends dt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:xg}};var Ot=class extends dt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Pt=new Me(n=>n.complete());function qC(n){return n&&pe(n.schedule)}function zC(n){return n[n.length-1]}function Cd(n){return pe(zC(n))?n.pop():void 0}function ci(n){return qC(zC(n))?n.pop():void 0}function KC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(h){s(h)}}function c(d){try{l(r.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function WC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function so(n){return this instanceof so?(this.v=n,this):new so(n)}function QC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,h)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(P,U){o.push([y,N,P,U])>1||c(y,N)})},C&&(i[y]=C(i[y])))}function c(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof so?Promise.resolve(y.value.v).then(d,h):m(o[0][2],y)}function d(y){c("next",y)}function h(y){c("throw",y)}function m(y,C){y(C),o.shift(),o.length&&c(o[0][0],o[0][1])}}function YC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WC=="function"?WC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var bd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Dd(n){return pe(n?.then)}function Ad(n){return pe(n[ks])}function Sd(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function Td(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xd=dO();function Md(n){return pe(n?.[xd])}function Rd(n){return QC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield so(t.read());if(i)return yield so(void 0);yield yield so(r)}}finally{t.releaseLock()}})}function Nd(n){return pe(n?.getReader)}function ft(n){if(n instanceof Me)return n;if(n!=null){if(Ad(n))return fO(n);if(bd(n))return hO(n);if(Dd(n))return pO(n);if(Sd(n))return ZC(n);if(Md(n))return mO(n);if(Nd(n))return gO(n)}throw Td(n)}function fO(n){return new Me(e=>{let t=n[ks]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hO(n){return new Me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pO(n){return new Me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ed)})}function mO(n){return new Me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ZC(n){return new Me(e=>{yO(n,e).catch(t=>e.error(t))})}function gO(n){return ZC(Rd(n))}function yO(n,e){var t,r,i,o;return KC(this,void 0,void 0,function*(){try{for(t=YC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function sn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Od(n,e=0){return ke((t,r)=>{t.subscribe(Fe(r,i=>sn(r,n,()=>r.next(i),e),()=>sn(r,n,()=>r.complete(),e),i=>sn(r,n,()=>r.error(i),e)))})}function Pd(n,e=0){return ke((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function JC(n,e){return ft(n).pipe(Pd(e),Od(e))}function XC(n,e){return ft(n).pipe(Pd(e),Od(e))}function eb(n,e){return new Me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function tb(n,e){return new Me(t=>{let r;return sn(t,e,()=>{r=n[xd](),sn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function kd(n,e){if(!n)throw new Error("Iterable cannot be null");return new Me(t=>{sn(t,e,()=>{let r=n[Symbol.asyncIterator]();sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function nb(n,e){return kd(Rd(n),e)}function rb(n,e){if(n!=null){if(Ad(n))return JC(n,e);if(bd(n))return eb(n,e);if(Dd(n))return XC(n,e);if(Sd(n))return kd(n,e);if(Md(n))return tb(n,e);if(Nd(n))return nb(n,e)}throw Td(n)}function nt(n,e){return e?rb(n,e):ft(n)}function Ie(...n){let e=ci(n);return nt(n,e)}function Lg(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new Me(e?i=>e.schedule(r,0,i):r)}function Fd(n){return!!n&&(n instanceof Me||pe(n.lift)&&pe(n.subscribe))}var ao=Rs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ye(n,e){return ke((t,r)=>{let i=0;t.subscribe(Fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:vO}=Array;function _O(n,e){return vO(e)?n(...e):n(e)}function Ld(n){return Ye(e=>_O(n,e))}var{isArray:EO}=Array,{getPrototypeOf:IO,prototype:wO,keys:CO}=Object;function Vd(n){if(n.length===1){let e=n[0];if(EO(e))return{args:e,keys:null};if(bO(e)){let t=CO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function bO(n){return n&&typeof n=="object"&&IO(n)===wO}function jd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Vg(...n){let e=ci(n),t=Cd(n),{args:r,keys:i}=Vd(n);if(r.length===0)return nt([],e);let o=new Me(DO(r,e,i?s=>jd(i,s):jn));return t?o.pipe(Ld(t)):o}function DO(n,e,t=jn){return r=>{ib(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ib(e,()=>{let l=nt(n[c],e),d=!1;l.subscribe(Fe(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ib(n,e,t){n?sn(t,n,e):e()}function ob(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,h=!1,m=()=>{h&&!c.length&&!l&&e.complete()},y=N=>l<r?C(N):c.push(N),C=N=>{o&&e.next(N),l++;let P=!1;ft(t(N,d++)).subscribe(Fe(e,U=>{i?.(U),o?y(U):e.next(U)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;c.length&&l<r;){let U=c.shift();s?sn(e,s,()=>C(U)):C(U)}m()}catch(U){e.error(U)}}))};return n.subscribe(Fe(e,y,()=>{h=!0,m()})),()=>{a?.()}}function Bt(n,e,t=1/0){return pe(e)?Bt((r,i)=>Ye((o,s)=>e(r,o,i,s))(ft(n(r,i))),t):(typeof e=="number"&&(t=e),ke((r,i)=>ob(r,i,n,t)))}function Fs(n=1/0){return Bt(jn,n)}function sb(){return Fs(1)}function Ls(...n){return sb()(nt(n,ci(n)))}function jc(n){return new Me(e=>{ft(n()).subscribe(e)})}function jg(...n){let e=Cd(n),{args:t,keys:r}=Vd(n),i=new Me(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let h=!1;ft(t[d]).subscribe(Fe(o,m=>{h||(h=!0,l--),a[d]=m},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?jd(r,a):a),o.complete())}))}});return e?i.pipe(Ld(e)):i}function tr(n,e){return ke((t,r)=>{let i=0;t.subscribe(Fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Vs(n){return ke((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Fe(t,void 0,void 0,s=>{o=ft(n(s,Vs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Uc(n,e){return pe(e)?Bt(n,e,1):Bt(n,1)}function ab(n){return ke((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Cr(n){return n<=0?()=>Pt:ke((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cb(n=AO){return ke((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function AO(){return new ao}function Ug(n){return ke((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function br(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tr((i,o)=>n(i,o,r)):jn,Cr(1),t?ab(e):cb(()=>new ao))}function Ud(n){return n<=0?()=>Pt:ke((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bg(...n){let e=ci(n);return ke((t,r)=>{(e?Ls(n,t,e):Ls(n,t)).subscribe(r)})}function Dr(n,e){return ke((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Fe(r,c=>{i?.unsubscribe();let l=0,d=o++;ft(n(c,d)).subscribe(i=Fe(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Bc(n){return ke((e,t)=>{ft(n).subscribe(Fe(t,()=>t.complete(),Vc)),!t.closed&&e.subscribe(t)})}function nr(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?ke((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Fe(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):jn}var Hg;function Bd(){return Hg}function rr(n){let e=Hg;return Hg=n,e}var ub=Symbol("NotFound");function js(n){return n===ub||n?.name==="\u0275NotFound"}var Kd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",W=class extends Error{code;constructor(e,t){super(Bs(e,t)),this.code=e}};function SO(n){return`NG0${Math.abs(n)}`}function Bs(n,e){return`${SO(n)}${e?": "+e:""}`}var xr=globalThis;function Le(n){for(let e in n)if(n[e]===Le)return e;throw Error("")}function pb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Sr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Sr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ty(n,e){return n?e?`${n} ${e}`:n:e||""}var TO=Le({__forward_ref__:Le});function fi(n){return n.__forward_ref__=fi,n.toString=function(){return Sr(this())},n}function kt(n){return ny(n)?n():n}function ny(n){return typeof n=="function"&&n.hasOwnProperty(TO)&&n.__forward_ref__===fi}function te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kc(n){return xO(n,Qd)}function ry(n){return Kc(n)!==null}function xO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function MO(n){let e=n?.[Qd]??null;return e||null}function Gg(n){return n&&n.hasOwnProperty($d)?n[$d]:null}var Qd=Le({\u0275prov:Le}),$d=Le({\u0275inj:Le}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function iy(n){return n&&!!n.\u0275providers}var oy=Le({\u0275cmp:Le}),sy=Le({\u0275dir:Le}),ay=Le({\u0275pipe:Le}),cy=Le({\u0275mod:Le}),$c=Le({\u0275fac:Le}),po=Le({__NG_ELEMENT_ID__:Le}),lb=Le({__NG_ENV_ID__:Le});function uy(n){return Yd(n,"@NgModule"),n[cy]||null}function hi(n){return Yd(n,"@Component"),n[oy]||null}function ly(n){return Yd(n,"@Directive"),n[sy]||null}function mb(n){return Yd(n,"@Pipe"),n[ay]||null}function Yd(n,e){if(n==null)throw new W(-919,!1)}function Hs(n){return typeof n=="string"?n:n==null?"":String(n)}var gb=Le({ngErrorCode:Le}),RO=Le({ngErrorMessage:Le}),NO=Le({ngTokenPath:Le});function dy(n,e){return yb("",-200,e)}function Zd(n,e){throw new W(-201,!1)}function yb(n,e,t){let r=new W(e,n);return r[gb]=e,r[RO]=n,t&&(r[NO]=t),r}function OO(n){return n[gb]}var qg;function vb(){return qg}function Xt(n){let e=qg;return qg=n,e}function fy(n,e,t){let r=Kc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Zd(n,"")}var PO={},co=PO,kO="__NG_DI_FLAG__",zg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=uo(t)||0;try{return this.injector.get(e,r&8?null:co,r)}catch(i){if(js(i))return i;throw i}}};function FO(n,e=0){let t=Bd();if(t===void 0)throw new W(-203,!1);if(t===null)return fy(n,void 0,e);{let r=LO(e),i=t.retrieve(n,r);if(js(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(vb()||FO)(kt(n),e)}function j(n,e){return me(n,uo(e))}function uo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function LO(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Wg(n){let e=[];for(let t=0;t<n.length;t++){let r=kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=VO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function VO(n){return n[kO]}function ui(n,e){let t=n.hasOwnProperty($c);return t?n[$c]:null}function _b(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Eb(n){return n.flat(Number.POSITIVE_INFINITY)}function Jd(n,e){n.forEach(t=>Array.isArray(t)?Jd(t,e):e(t))}function hy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ib(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function wb(n,e,t){let r=$s(n,e);return r>=0?n[r|1]=t:(r=~r,Ib(n,r,e,t)),r}function Xd(n,e){let t=$s(n,e);if(t>=0)return n[t|1]}function $s(n,e){return jO(n,e,1)}function jO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var pi={},an=[],Gs=new Z(""),py=new Z("",-1),my=new Z(""),Gc=class{get(e,t=co){if(t===co){let i=yb("",-201);throw i.name="\u0275NotFound",i}return t}};function Yc(n){return{\u0275providers:n}}function Cb(...n){return{\u0275providers:gy(!0,n),\u0275fromNgModule:!0}}function gy(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Jd(e,s=>{let a=s;Gd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bb(i,o),t}function bb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];yy(i,o=>{e(o,r)})}}function Gd(n,e,t,r){if(n=kt(n),!n)return!1;let i=null,o=Gg(n),s=!o&&hi(n);if(!o&&!s){let c=n.ngModule;if(o=Gg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Gd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;Jd(o.imports,d=>{Gd(d,e,t,r)&&(l||=[],l.push(d))}),l!==void 0&&bb(l,e)}if(!a){let l=ui(i)||(()=>new i);e({provide:i,useFactory:l,deps:an},i),e({provide:my,useValue:i,multi:!0},i),e({provide:Gs,useValue:()=>me(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;yy(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function yy(n,e){for(let t of n)iy(t)&&(t=t.\u0275providers),Array.isArray(t)?yy(t,e):e(t)}var UO=Le({provide:String,useValue:Le});function Db(n){return n!==null&&typeof n=="object"&&UO in n}function BO(n){return!!(n&&n.useExisting)}function HO(n){return!!(n&&n.useFactory)}function lo(n){return typeof n=="function"}function Ab(n){return!!n.useClass}var Zc=new Z(""),Hd={},db={},$g;function Jc(){return $g===void 0&&($g=new Gc),$g}var pt=class{},fo=class extends pt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Qg(e,s=>this.processProvider(s)),this.records.set(py,Us(void 0,this)),i.has("environment")&&this.records.set(pt,Us(void 0,this));let o=this.records.get(Zc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(my,an,{self:!0}))}retrieve(e,t){let r=uo(t)||0;try{return this.get(e,co,r)}catch(i){if(js(i))return i;throw i}}destroy(){Hc(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return Hc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Hc(this);let t=rr(this),r=Xt(void 0),i;try{return e()}finally{rr(t),Xt(r)}}get(e,t=co,r){if(Hc(this),e.hasOwnProperty(lb))return e[lb](this);let i=uo(r),o,s=rr(this),a=Xt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let d=WO(e)&&Kc(e);d&&this.injectableDefInScope(d)?l=Us(Kg(e),Hd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Jc():this.parent;return t=i&8&&t===co?null:t,c.get(e,t)}catch(c){let l=OO(c);throw l===-200||l===-201?new W(l,null):c}finally{Xt(a),rr(s)}}resolveInjectorInitializers(){let e=ie(null),t=rr(this),r=Xt(void 0),i;try{let o=this.get(Gs,an,{self:!0});for(let s of o)s()}finally{rr(t),Xt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Sr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=kt(e);let t=lo(e)?e:kt(e&&e.provide),r=GO(e);if(!lo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Us(void 0,Hd,!0),i.factory=()=>Wg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ie(null);try{if(t.value===db)throw dy(Sr(e));return t.value===Hd&&(t.value=db,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&zO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Kg(n){let e=Kc(n),t=e!==null?e.factory:ui(n);if(t!==null)return t;if(n instanceof Z)throw new W(204,!1);if(n instanceof Function)return $O(n);throw new W(204,!1)}function $O(n){if(n.length>0)throw new W(204,!1);let t=MO(n);return t!==null?()=>t.factory(n):()=>new n}function GO(n){if(Db(n))return Us(void 0,n.useValue);{let e=vy(n);return Us(e,Hd)}}function vy(n,e,t){let r;if(lo(n)){let i=kt(n);return ui(i)||Kg(i)}else if(Db(n))r=()=>kt(n.useValue);else if(HO(n))r=()=>n.useFactory(...Wg(n.deps||[]));else if(BO(n))r=(i,o)=>me(kt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=kt(n&&(n.useClass||n.provide));if(qO(n))r=()=>new i(...Wg(n.deps));else return ui(i)||Kg(i)}return r}function Hc(n){if(n.destroyed)throw new W(205,!1)}function Us(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function qO(n){return!!n.deps}function zO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function WO(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Qg(n,e){for(let t of n)Array.isArray(t)?Qg(t,e):t&&iy(t)?Qg(t.\u0275providers,e):e(t)}function Ht(n,e){let t;n instanceof fo?(Hc(n),t=n):t=new zg(n);let r,i=rr(t),o=Xt(void 0);try{return e()}finally{rr(i),Xt(o)}}function Sb(){return vb()!==void 0||Bd()!=null}var Un=0,oe=1,ue=2,wt=3,An=4,Sn=5,qs=6,zs=7,rt=8,Mr=9,or=10,Ze=11,Ws=12,_y=13,mo=14,hn=15,mi=16,go=17,sr=18,Rr=19,Ey=20,Ar=21,ef=22,li=23,pn=24,tf=25,yo=26,it=27,Tb=1,Iy=6,gi=7,Xc=8,vo=9,et=10;function ar(n){return Array.isArray(n)&&typeof n[Tb]=="object"}function Bn(n){return Array.isArray(n)&&n[Tb]===!0}function wy(n){return(n.flags&4)!==0}function yi(n){return n.componentOffset>-1}function eu(n){return(n.flags&1)===1}function cr(n){return!!n.template}function Ks(n){return(n[ue]&512)!==0}function _o(n){return(n[ue]&256)===256}var Cy="svg",xb="math";function Tn(n){for(;Array.isArray(n);)n=n[Un];return n}function by(n,e){return Tn(e[n])}function Hn(n,e){return Tn(e[n.index])}function tu(n,e){return n.data[e]}function Dy(n,e){return n[e]}function Ay(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function xn(n,e){let t=e[n];return ar(t)?t:t[Un]}function Mb(n){return(n[ue]&4)===4}function nf(n){return(n[ue]&128)===128}function Rb(n){return Bn(n[wt])}function Mn(n,e){return e==null?null:n[e]}function Sy(n){n[go]=0}function Ty(n){n[ue]&1024||(n[ue]|=1024,nf(n)&&Qs(n))}function Nb(n,e){for(;n>0;)e=e[mo],n--;return e}function nu(n){return!!(n[ue]&9216||n[pn]?.dirty)}function rf(n){n[or].changeDetectionScheduler?.notify(8),n[ue]&64&&(n[ue]|=1024),nu(n)&&Qs(n)}function Qs(n){n[or].changeDetectionScheduler?.notify(0);let e=di(n);for(;e!==null&&!(e[ue]&8192||(e[ue]|=8192,!nf(e)));)e=di(e)}function xy(n,e){if(_o(n))throw new W(911,!1);n[Ar]===null&&(n[Ar]=[]),n[Ar].push(e)}function Ob(n,e){if(n[Ar]===null)return;let t=n[Ar].indexOf(e);t!==-1&&n[Ar].splice(t,1)}function di(n){let e=n[wt];return Bn(e)?e[wt]:e}function My(n){return n[zs]??=[]}function Ry(n){return n.cleanup??=[]}function Pb(n,e,t,r){let i=My(e);i.push(t),n.firstCreatePass&&Ry(n).push(r,i.length-1)}var ge={lFrame:Kb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Yg=!1;function kb(){return ge.lFrame.elementDepthCount}function Fb(){ge.lFrame.elementDepthCount++}function Ny(){ge.lFrame.elementDepthCount--}function Oy(){return ge.bindingsEnabled}function Lb(){return ge.skipHydrationRootTNode!==null}function Py(n){return ge.skipHydrationRootTNode===n}function ky(){ge.skipHydrationRootTNode=null}function de(){return ge.lFrame.lView}function ot(){return ge.lFrame.tView}function ae(n){return ge.lFrame.contextLView=n,n[rt]}function ce(n){return ge.lFrame.contextLView=null,n}function At(){let n=Fy();for(;n!==null&&n.type===64;)n=n.parent;return n}function Fy(){return ge.lFrame.currentTNode}function Vb(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ys(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function Ly(){return ge.lFrame.isParent}function jb(){ge.lFrame.isParent=!1}function Ub(){return ge.lFrame.contextLView}function Vy(){return Yg}function qc(n){let e=Yg;return Yg=n,e}function jy(){let n=ge.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Bb(){return ge.lFrame.bindingIndex}function Hb(n){return ge.lFrame.bindingIndex=n}function Eo(){return ge.lFrame.bindingIndex++}function Uy(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function $b(){return ge.lFrame.inI18n}function Gb(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,of(e)}function qb(){return ge.lFrame.currentDirectiveIndex}function of(n){ge.lFrame.currentDirectiveIndex=n}function zb(n){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function sf(){return ge.lFrame.currentQueryIndex}function ru(n){ge.lFrame.currentQueryIndex=n}function KO(n){let e=n[oe];return e.type===2?e.declTNode:e.type===1?n[Sn]:null}function By(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=KO(o),i===null||(o=o[mo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=Wb();return r.currentTNode=e,r.lView=n,!0}function af(n){let e=Wb(),t=n[oe];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Wb(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?Kb(n):e}function Kb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Qb(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Hy=Qb;function cf(){let n=Qb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yb(n){return(ge.lFrame.contextLView=Nb(n,ge.lFrame.contextLView))[rt]}function Nr(){return ge.lFrame.selectedIndex}function vi(n){ge.lFrame.selectedIndex=n}function uf(){let n=ge.lFrame;return tu(n.tView,n.selectedIndex)}function X(){ge.lFrame.currentNamespace=Cy}function ye(){QO()}function QO(){ge.lFrame.currentNamespace=null}function Zb(){return ge.lFrame.currentNamespace}var Jb=!0;function lf(){return Jb}function df(n){Jb=n}function Zg(n,e=null,t=null,r){let i=$y(n,e,t,r);return i.resolveInjectorInitializers(),i}function $y(n,e=null,t=null,r,i=new Set){let o=[t||an,Cb(n)];return r=r||(typeof n=="object"?void 0:Sr(n)),new fo(o,e||Jc(),r||null,i)}var Dn=class n{static THROW_IF_NOT_FOUND=co;static NULL=new Gc;static create(e,t){if(Array.isArray(e))return Zg({name:""},t,e,"");{let r=e.name??"";return Zg({name:r},e.parent,e.providers,r)}}static \u0275prov=te({token:n,providedIn:"any",factory:()=>me(py)});static __NG_ELEMENT_ID__=-1},St=new Z(""),Or=(()=>{class n{static __NG_ELEMENT_ID__=YO;static __NG_ENV_ID__=t=>t}return n})(),qd=class extends Or{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _o(this._lView)}onDestroy(e){let t=this._lView;return xy(t,e),()=>Ob(t,e)}};function YO(){return new qd(de())}var Xb=!1,eD=new Z(""),_i=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ot(!1);debugTaskTracker=j(eD,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Me(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),Jg=class extends dt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Sb()&&(this.destroyRef=j(Or,{optional:!0})??void 0,this.pendingTasks=j(_i,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Nt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ht=Jg;function zd(...n){}function Gy(n){let e,t;function r(){n=zd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tD(n){return queueMicrotask(()=>n()),()=>{n=zd}}var qy="isAngularZone",zc=qy+"_ID",ZO=0,fn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ht(!1);onMicrotaskEmpty=new ht(!1);onStable=new ht(!1);onError=new ht(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Xb}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,eP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JO,zd,zd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},JO={};function zy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function XO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Gy(()=>{n.callbackScheduled=!1,Xg(n),n.isCheckStableRunning=!0,zy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Xg(n)}function eP(n){let e=()=>{XO(n)},t=ZO++;n._inner=n._inner.fork({name:"angular",properties:{[qy]:!0,[zc]:t,[zc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(tP(c))return r.invokeTask(o,s,a,c);try{return fb(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),hb(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return fb(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nP(c)&&e(),hb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Xg(n),zy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Xg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hb(n){n._nesting--,zy(n)}var Wc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ht;onMicrotaskEmpty=new ht;onStable=new ht;onError=new ht;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tP(n){return nD(n,"__ignore_ng_zone__")}function nP(n){return nD(n,"__scheduler_tick__")}function nD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Tr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},$n=new Z("",{factory:()=>{let n=j(fn),e=j(pt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Tr),t.handleError(r))})}}}),rD={provide:Gs,useValue:()=>{let n=j(Tr,{optional:!0})},multi:!0};function Ne(n,e){let[t,r,i]=Dg(n,e?.equal),o=t,s=o[Rt];return o.set=r,o.update=i,o.asReadonly=iD.bind(o),o}function iD(){let n=this[Rt];if(n.readonlyFn===void 0){let e=()=>this();e[Rt]=n,n.readonlyFn=e}return n.readonlyFn}var ff=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=rP}return n})();function rP(){return new ff(de(),At())}var ho=class{},iu=new Z("",{factory:()=>!0});var Wy=new Z("");var hf=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>new ey})}return n})(),ey=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Wd=class{[Rt];constructor(e){this[Rt]=e}destroy(){this[Rt].destroy()}};function Ky(n,e){let t=e?.injector??j(Dn),r=e?.manualCleanup!==!0?t.get(Or):null,i,o=t.get(ff,null,{optional:!0}),s=t.get(ho);return o!==null?(i=sP(o.view,s,n),r instanceof qd&&r._lView===o.view&&(r=null)):i=aP(n,t.get(hf),s),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Wd(i)}var oD=re(L({},Sg),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=qc(!1);try{Tg(this)}finally{qc(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=ie(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ie(n)}}}),iP=re(L({},oD),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(ro(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),oP=re(L({},oD),{consumerMarkedDirty(){this.view[ue]|=8192,Qs(this.view),this.notifier.notify(13)},destroy(){if(ro(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[li]?.delete(this)}});function sP(n,e,t){let r=Object.create(oP);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=sD(r,t),n[li]??=new Set,n[li].add(r),r.consumerMarkedDirty(r),r}function aP(n,e,t){let r=Object.create(iP);return r.fn=sD(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function sD(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Ct(n){return Ag(n)}function pu(n){return{toString:n}.toString()}function pP(n){return typeof n=="function"}function FD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var If=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},kr=(()=>{let n=()=>LD;return n.ngInherit=!0,n})();function LD(n){return n.type.prototype.ngOnChanges&&(n.setInput=gP),mP}function mP(){let n=jD(this),e=n?.current;if(e){let t=n.previous;if(t===pi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function gP(n,e,t,r,i){let o=this.declaredInputs[r],s=jD(n)||yP(n,{previous:pi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new If(l&&l.currentValue,t,c===pi),FD(n,e,i,t)}var VD="__ngSimpleChanges__";function jD(n){return n[VD]||null}function yP(n,e){return n[VD]=e}var aD=[];var Be=function(n,e=null,t){for(let r=0;r<aD.length;r++){let i=aD[r];i(n,e,t)}},Oe=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Oe||{});function vP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=LD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function UD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function gf(n,e,t){BD(n,e,3,t)}function yf(n,e,t,r){(n[ue]&3)===t&&BD(n,e,t,r)}function Qy(n,e){let t=n[ue];(t&3)===e&&(t&=16383,t+=1,n[ue]=t)}function BD(n,e,t,r){let i=r!==void 0?n[go]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[go]+=65536),(a<o||o==-1)&&(_P(n,t,e,c),n[go]=(n[go]&4294901760)+c+2),c++}function cD(n,e){Be(Oe.LifecycleHookStart,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),Be(Oe.LifecycleHookEnd,n,e)}}function _P(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ue]>>14<n[go]>>16&&(n[ue]&3)===e&&(n[ue]+=16384,cD(a,o)):cD(a,o)}var Js=-1,wo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function EP(n){return(n.flags&8)!==0}function IP(n){return(n.flags&16)!==0}function wP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];CP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function HD(n){return n===3||n===4||n===6}function CP(n){return n.charCodeAt(0)===64}function Xs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?uD(n,t,i,null,e[++r]):uD(n,t,i,null,null))}}return n}function uD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function $D(n){return n!==Js}function wf(n){return n&32767}function bP(n){return n>>16}function Cf(n,e){let t=bP(n),r=e;for(;t>0;)r=r[mo],t--;return r}var sv=!0;function bf(n){let e=sv;return sv=n,e}var DP=256,GD=DP-1,qD=5,AP=0,ur={};function SP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(po)&&(r=t[po]),r==null&&(r=t[po]=AP++);let i=r&GD,o=1<<i;e.data[n+(i>>qD)]|=o}function Df(n,e){let t=zD(n,e);if(t!==-1)return t;let r=e[oe];r.firstCreatePass&&(n.injectorIndex=e.length,Yy(r.data,n),Yy(e,null),Yy(r.blueprint,null));let i=Nv(n,e),o=n.injectorIndex;if($D(i)){let s=wf(i),a=Cf(i,e),c=a[oe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Yy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Nv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ZD(i),r===null)return Js;if(t++,i=i[mo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Js}function av(n,e,t){SP(n,e,t)}function TP(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(HD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function WD(n,e,t){if(t&8||n!==void 0)return n;Zd(e,"NodeInjector")}function KD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Mr],o=Xt(void 0);try{return i?i.get(e,r,t&8):fy(e,r,t&8)}finally{Xt(o)}}return WD(r,e,t)}function QD(n,e,t,r=0,i){if(n!==null){if(e[ue]&2048&&!(r&2)){let s=NP(n,e,t,r,ur);if(s!==ur)return s}let o=YD(n,e,t,r,ur);if(o!==ur)return o}return KD(e,t,r,i)}function YD(n,e,t,r,i){let o=MP(t);if(typeof o=="function"){if(!By(e,n,r))return r&1?WD(i,t,r):KD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Zd(t);else return s}finally{Hy()}}else if(typeof o=="number"){let s=null,a=zD(n,e),c=Js,l=r&1?e[hn][Sn]:null;for((a===-1||r&4)&&(c=a===-1?Nv(n,e):e[a+8],c===Js||!dD(r,!1)?a=-1:(s=e[oe],a=wf(c),e=Cf(c,e)));a!==-1;){let d=e[oe];if(lD(o,a,d.data)){let h=xP(a,e,t,s,r,l);if(h!==ur)return h}c=e[a+8],c!==Js&&dD(r,e[oe].data[a+8]===l)&&lD(o,a,e)?(s=d,a=wf(c),e=Cf(c,e)):a=-1}}return i}function xP(n,e,t,r,i,o){let s=e[oe],a=s.data[n+8],c=r==null?yi(a)&&sv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,d=vf(a,s,t,c,l);return d!==null?cu(e,s,d,a,i):ur}function vf(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,h=r?a:a+d,m=i?a+d:l;for(let y=h;y<m;y++){let C=s[y];if(y<c&&t===C||y>=c&&C.type===t)return y}if(i){let y=s[c];if(y&&cr(y)&&y.type===t)return c}return null}function cu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof wo){let a=o;if(a.resolving)throw dy("");let c=bf(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],d,h=a.injectImpl?Xt(a.injectImpl):null,m=By(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&vP(t,s[t],e)}finally{h!==null&&Xt(h),bf(c),a.resolving=!1,Hy()}}return o}function MP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(po)?n[po]:void 0;return typeof e=="number"?e>=0?e&GD:RP:e}function lD(n,e,t){let r=1<<n;return!!(t[e+(n>>qD)]&r)}function dD(n,e){return!(n&2)&&!(n&1&&e)}var Io=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QD(this._tNode,this._lView,e,uo(r),t)}};function RP(){return new Io(At(),de())}function To(n){return pu(()=>{let e=n.prototype.constructor,t=e[$c]||cv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[$c]||cv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cv(n){return ny(n)?()=>{let e=cv(kt(n));return e&&e()}:ui(n)}function NP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ue]&2048&&!Ks(s);){let a=YD(o,s,t,r|2,ur);if(a!==ur)return a;let c=o.parent;if(!c){let l=s[Ey];if(l){let d=l.get(t,ur,r);if(d!==ur)return d}c=ZD(s),s=s[mo]}o=c}return i}function ZD(n){let e=n[oe],t=e.type;return t===2?e.declTNode:t===1?n[Sn]:null}function mu(n){return TP(At(),n)}function OP(){return ra(At(),de())}function ra(n,e){return new Rn(Hn(n,e))}var Rn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=OP}return n})();function JD(n){return n instanceof Rn?n.nativeElement:n}function PP(){return this._results[Symbol.iterator]()}var Af=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new dt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Eb(e);(this._changesDetected=!_b(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=PP};function XD(n){return(n.flags&128)===128}var Ov=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Ov||{}),eA=new Map,kP=0;function FP(){return kP++}function LP(n){eA.set(n[Rr],n)}function uv(n){eA.delete(n[Rr])}var fD="__ngContext__";function ea(n,e){ar(e)?(n[fD]=e[Rr],LP(e)):n[fD]=e}function tA(n){return rA(n[Ws])}function nA(n){return rA(n[An])}function rA(n){for(;n!==null&&!Bn(n);)n=n[An];return n}var VP;function Pv(n){VP=n}var Uf=new Z("",{factory:()=>jP}),jP="ng";var Bf=new Z(""),gu=new Z("",{providedIn:"platform",factory:()=>"unknown"});var Hf=new Z("",{factory:()=>j(St).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iA="r";var oA="di";var sA=!1,aA=new Z("",{factory:()=>sA});var UP=(n,e,t,r)=>{};function BP(n,e,t,r){UP(n,e,t,r)}function kv(n){return(n.flags&32)===32}var HP=()=>null;function cA(n,e,t=!1){return HP(n,e,t)}function uA(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ru(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function lv(n,e,t){ru(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function lA(n,e,t){if(wy(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ie(r)}}}var qn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(qn||{});var pf;function $P(){if(pf===void 0&&(pf=null,xr.trustedTypes))try{pf=xr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pf}function hD(n){return $P()?.createScriptURL(n)||n}var Sf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kd})`}};function $f(n){return n instanceof Sf?n.changingThisBreaksApplicationSecurity:n}function Fv(n,e){let t=dA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Kd})`)}return t===e}function dA(n){return n instanceof Sf&&n.getTypeName()||null}var GP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fA(n){return n=String(n),n.match(GP)?n:"unsafe:"+n}function qP(n,e){return n.createText(e)}function zP(n,e,t){n.setValue(e,t)}function hA(n,e,t){return n.createElement(e,t)}function Tf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function pA(n,e,t){n.appendChild(e,t)}function pD(n,e,t,r,i){r!==null?Tf(n,e,t,r,i):pA(n,e,t)}function mA(n,e,t,r){n.removeChild(null,e,t,r)}function WP(n,e,t){n.setAttribute(e,"style",t)}function KP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&wP(n,e,r),i!==null&&KP(n,e,i),o!==null&&WP(n,e,o)}var Gf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Gf||{});function yA(n){let e=_A();return e?e.sanitize(Gf.URL,n)||"":Fv(n,"URL")?$f(n):fA(Hs(n))}function vA(n){let e=_A();if(e)return hD(e.sanitize(Gf.RESOURCE_URL,n)||"");if(Fv(n,"ResourceURL"))return hD($f(n));throw new W(904,!1)}var QP=new Set(["embed","frame","iframe","media","script"]),YP=new Set(["base","link","script"]);function ZP(n,e){return e==="src"&&QP.has(n)||e==="href"&&YP.has(n)||e==="xlink:href"&&n==="script"?vA:yA}function Lv(n,e,t){return ZP(e,t)(n)}function _A(){let n=de();return n&&n[or].sanitizer}function EA(n){return n instanceof Function?n():n}function JP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var IA="ng-template";function XP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Vv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Vv(n){return n.type===4&&n.value!==IA}function ek(n,e,t){let r=n.type===4&&!t?IA:n.value;return e===r}function tk(n,e,t){let r=4,i=n.attrs,o=i!==null?ik(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Gn(r)&&!Gn(c))return!1;if(s&&Gn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!ek(n,c,t)||c===""&&e.length===1){if(Gn(r))return!1;s=!0}}else if(r&8){if(i===null||!XP(n,i,c,t)){if(Gn(r))return!1;s=!0}}else{let l=e[++a],d=nk(c,i,Vv(n),t);if(d===-1){if(Gn(r))return!1;s=!0;continue}if(l!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(Gn(r))return!1;s=!0}}}}return Gn(r)||s}function Gn(n){return(n&1)===0}function nk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ok(e,n)}function rk(n,e,t=!1){for(let r=0;r<e.length;r++)if(tk(n,e[r],t))return!0;return!1}function ik(n){for(let e=0;e<n.length;e++){let t=n[e];if(HD(t))return e}return n.length}function ok(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function mD(n,e){return n?":not("+e.trim()+")":e}function sk(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gn(s)&&(e+=mD(o,i),i=""),r=s,o=o||!Gn(r);t++}return i!==""&&(e+=mD(o,i)),e}function ak(n){return n.map(sk).join(",")}function ck(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Gn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var mn={};function jv(n,e,t,r,i,o,s,a,c,l,d){let h=it+r,m=h+i,y=uk(h,m),C=typeof l=="function"?l():l;return y[oe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:d}}function uk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mn);return t}function lk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Uv(n,e,t,r,i,o,s,a,c,l,d){let h=e.blueprint.slice();return h[Un]=i,h[ue]=r|4|128|8|64|1024,(l!==null||n&&n[ue]&2048)&&(h[ue]|=2048),Sy(h),h[wt]=h[mo]=n,h[rt]=t,h[or]=s||n&&n[or],h[Ze]=a||n&&n[Ze],h[Mr]=c||n&&n[Mr]||null,h[Sn]=o,h[Rr]=FP(),h[qs]=d,h[Ey]=l,h[hn]=e.type==2?n[hn]:h,h}function dk(n,e,t){let r=Hn(e,n),i=lk(t),o=n[or].rendererFactory,s=Bv(n,Uv(n,i,null,wA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function wA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function CA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Bv(n,e){return n[Ws]?n[_y][An]=e:n[Ws]=e,n[_y]=e,e}function R(n=1){bA(ot(),de(),Nr()+n,!1)}function bA(n,e,t,r){if(!r)if((e[ue]&3)===3){let o=n.preOrderCheckHooks;o!==null&&gf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&yf(e,o,0,t)}vi(t)}var qf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(qf||{});function dv(n,e,t,r){let i=ie(null);try{let[o,s,a]=n.inputs[t],c=null;(s&qf.SignalBased)!==0&&(c=e[o][Rt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):FD(e,c,o,r)}finally{ie(i)}}var lr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(lr||{}),fk;function Hv(n,e){return fk(n,e)}var Co=new Set,$v=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})($v||{}),yu=new Z(""),gD=new Set;function Ii(n){gD.has(n)||(gD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var DA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})();var Gv=new Z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:j(pt)})});function AA(n,e,t){let r=n.get(Gv);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function hk(n,e){let t=n.get(Gv);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function pk(n,e){for(let[t,r]of e)AA(n,r.animateFns)}function mk(n,e){let t=n.get(Gv);if(Array.isArray(e))for(let r of e)t.queue.delete(r);else t.queue.delete(e)}function yD(n,e,t,r){let i=n?.[yo]?.enter;e!==null&&i&&i.has(t.index)&&pk(r,i)}function Zs(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Bn(i)?c=i:ar(i)&&(l=!0,i=i[Un]);let d=Tn(i);n===0&&r!==null?(yD(a,r,o,t),s==null?pA(e,r,d):Tf(e,r,d,s||null,!0)):n===1&&r!==null?(yD(a,r,o,t),Tf(e,r,d,s||null,!0)):n===2?vD(a,o,t,h=>{mA(e,d,l,h)}):n===3&&vD(a,o,t,()=>{e.destroyNode(d)}),c!=null&&Tk(e,n,t,c,o,r,s)}}function gk(n,e){SA(n,e),e[Un]=null,e[Sn]=null}function yk(n,e,t,r,i,o){r[Un]=i,r[Sn]=e,Wf(n,r,t,1,i,o)}function SA(n,e){e[or].changeDetectionScheduler?.notify(9),Wf(n,e,e[Ze],2,null,null)}function vk(n){let e=n[Ws];if(!e)return Zy(n[oe],n);for(;e;){let t=null;if(ar(e))t=e[Ws];else{let r=e[et];r&&(t=r)}if(!t){for(;e&&!e[An]&&e!==n;)ar(e)&&Zy(e[oe],e),e=e[wt];e===null&&(e=n),ar(e)&&Zy(e[oe],e),t=e&&e[An]}e=t}}function qv(n,e){let t=n[vo],r=t.indexOf(e);t.splice(r,1)}function zf(n,e){if(_o(e))return;let t=e[Ze];t.destroyNode&&Wf(n,e,t,3,null,null),vk(e)}function Zy(n,e){if(_o(e))return;let t=ie(null);try{e[ue]&=-129,e[ue]|=256,e[pn]&&ro(e[pn]),Ik(n,e),Ek(n,e),e[oe].type===1&&e[Ze].destroy();let r=e[mi];if(r!==null&&Bn(e[wt])){r!==e[wt]&&qv(r,e);let i=e[sr];i!==null&&i.detachView(n)}uv(e)}finally{ie(t)}}function vD(n,e,t,r){let i=n?.[yo];if(i?.enter?.has(e.index)&&mk(t,i.enter.get(e.index).animateFns),i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Co.add(n[Rr]),AA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:d}=l();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),_k(n,r)}else n&&Co.delete(n[Rr]),r(!1)},i)}function _k(n,e){let t=n[yo]?.running;if(t){t.then(()=>{n[yo].running=void 0,Co.delete(n[Rr]),e(!0)});return}e(!1)}function Ek(n,e){let t=n.cleanup,r=e[zs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[zs]=null);let i=e[Ar];if(i!==null){e[Ar]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[li];if(o!==null){e[li]=null;for(let s of o)s.destroy()}}function Ik(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof wo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Be(Oe.LifecycleHookStart,a,c);try{c.call(a)}finally{Be(Oe.LifecycleHookEnd,a,c)}}else{Be(Oe.LifecycleHookStart,i,o);try{o.call(i)}finally{Be(Oe.LifecycleHookEnd,i,o)}}}}}function wk(n,e,t){return Ck(n,e.parent,t)}function Ck(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Un];if(yi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qn.None||i===qn.Emulated)return null}return Hn(r,t)}function bk(n,e,t){return Ak(n,e,t)}function Dk(n,e,t){return n.type&40?Hn(n,t):null}var Ak=Dk,_D;function zv(n,e,t,r){let i=wk(n,r,e),o=e[Ze],s=r.parent||e[Sn],a=bk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)pD(o,i,t[c],a,!1);else pD(o,i,t,a,!1);_D!==void 0&&_D(o,r,e,t,i)}function su(n,e){if(e!==null){let t=e.type;if(t&3)return Hn(e,n);if(t&4)return fv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return su(n,r);{let i=n[e.index];return Bn(i)?fv(-1,i):Tn(i)}}else{if(t&128)return su(n,e.next);if(t&32)return Hv(e,n)()||Tn(n[e.index]);{let r=TA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=di(n[hn]);return su(i,r)}else return su(n,e.next)}}}return null}function TA(n,e){if(e!==null){let r=n[hn][Sn],i=e.projection;return r.projection[i]}return null}function fv(n,e){let t=et+n+1;if(t<e.length){let r=e[t],i=r[oe].firstChild;if(i!==null)return su(r,i)}return e[gi]}function Wv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Mr];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&ea(Tn(c),r),t.flags|=2),!kv(t))if(l&8)Wv(n,e,t.child,r,i,o,!1),Zs(e,n,a,i,c,t,o,r);else if(l&32){let d=Hv(t,r),h;for(;h=d();)Zs(e,n,a,i,h,t,o,r);Zs(e,n,a,i,c,t,o,r)}else l&16?Sk(n,e,r,t,i,o):Zs(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Wf(n,e,t,r,i,o){Wv(t,r,n.firstChild,e,i,o,!1)}function Sk(n,e,t,r,i,o){let s=t[hn],c=s[Sn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Zs(e,n,t[Mr],i,d,r,o,t)}else{let l=c,d=s[wt];XD(r)&&(l.flags|=128),Wv(n,e,l,d,i,o,!0)}}function Tk(n,e,t,r,i,o,s){let a=r[gi],c=Tn(r);a!==c&&Zs(e,n,t,o,a,i,s);for(let l=et;l<r.length;l++){let d=r[l];Wf(d[oe],d,n,e,o,a)}}function xk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:lr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=lr.Important),n.setStyle(t,r,i,o))}}function xA(n,e,t,r,i){let o=Nr(),s=r&2;try{vi(-1),s&&e.length>it&&bA(n,e,it,!1);let a=s?Oe.TemplateUpdateStart:Oe.TemplateCreateStart;Be(a,i,t),t(r,i)}finally{vi(o);let a=s?Oe.TemplateUpdateEnd:Oe.TemplateCreateEnd;Be(a,i,t)}}function Kv(n,e,t){Fk(n,e,t),(t.flags&64)===64&&Lk(n,e,t)}function Kf(n,e,t=Hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Mk(n,e,t,r){let o=r.get(aA,sA)||t===qn.ShadowDom||t===qn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return Rk(s),s}function Rk(n){Nk(n)}var Nk=()=>null;function Ok(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function MA(n,e,t,r,i,o){let s=e[oe];if(Qv(n,s,e,t,r)){yi(n)&&kk(e,n.index);return}n.type&3&&(t=Ok(t)),Pk(n,e,t,r,i,o)}function Pk(n,e,t,r,i,o){if(n.type&3){let s=Hn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function kk(n,e){let t=xn(e,n);t[ue]&16||(t[ue]|=64)}function Fk(n,e,t){let r=t.directiveStart,i=t.directiveEnd;yi(t)&&dk(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Df(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=cu(e,n,s,t);if(ea(c,e),o!==null&&Bk(e,s-r,c,a,t,o),cr(a)){let l=xn(t.index,e);l[rt]=cu(e,n,s,t)}}}function Lk(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=qb();try{vi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];of(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Vk(c,l)}}finally{vi(-1),of(s)}}function Vk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function RA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];rk(e,o.selectors,!1)&&(r??=[],cr(o)?r.unshift(o):r.push(o))}return r}function jk(n,e,t,r,i,o){let s=Hn(n,e);Uk(e[Ze],s,o,n.value,t,r,i)}function Uk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Hs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Bk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];dv(r,t,c,l)}}function NA(n,e,t,r,i){let o=it+t,s=e[oe],a=i(s,e,n,r,t);e[o]=a,Ys(n,!0);let c=n.type===2;return c?(gA(e[Ze],a,n),(kb()===0||eu(n))&&ea(a,e),Fb()):ea(a,e),lf()&&(!c||!kv(n))&&zv(s,e,a,n),n}function OA(n){let e=n;return Ly()?jb():(e=e.parent,Ys(e,!1)),e}function Hk(n,e){let t=n[Mr];if(!t)return;let r;try{r=t.get($n,null)}catch{r=null}r?.(e)}function Qv(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],h=e.data[l];dv(h,t[l],d,i),a=!0}if(o)for(let c of o){let l=t[c],d=e.data[c];dv(d,l,r,i),a=!0}return a}function $k(n,e){let t=xn(e,n),r=t[oe];Gk(r,t);let i=t[Un];i!==null&&t[qs]===null&&(t[qs]=cA(i,t[Mr])),Be(Oe.ComponentStart);try{Yv(r,t,t[rt])}finally{Be(Oe.ComponentEnd,t[rt])}}function Gk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Yv(n,e,t){af(e);try{let r=n.viewQuery;r!==null&&lv(1,r,t);let i=n.template;i!==null&&xA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[sr]?.finishViewCreation(n),n.staticContentQueries&&uA(n,e),n.staticViewQueries&&lv(2,n.viewQuery,t);let o=n.components;o!==null&&qk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ue]&=-5,cf()}}function qk(n,e){for(let t=0;t<e.length;t++)$k(n,e[t])}function Qf(n,e,t,r){let i=ie(null);try{let o=e.tView,a=n[ue]&4096?4096:16,c=Uv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[mi]=l;let d=n[sr];return d!==null&&(c[sr]=d.createEmbeddedView(o)),Yv(o,c,t),c}finally{ie(i)}}function uu(n,e){return!e||e.firstChild===null||XD(n)}function lu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Tn(o)),Bn(o)&&PA(o,r);let s=t.type;if(s&8)lu(n,e,t.child,r);else if(s&32){let a=Hv(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=TA(e,t);if(Array.isArray(a))r.push(...a);else{let c=di(e[hn]);lu(c[oe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function PA(n,e){for(let t=et;t<n.length;t++){let r=n[t],i=r[oe].firstChild;i!==null&&lu(r[oe],r,i,e)}n[gi]!==n[Un]&&e.push(n[gi])}function kA(n){if(n[tf]!==null){for(let e of n[tf])e.impl.addSequence(e);n[tf].length=0}}var FA=[];function zk(n){return n[pn]??Wk(n)}function Wk(n){let e=FA.pop()??Object.create(Qk);return e.lView=n,e}function Kk(n){n.lView[pn]!==n&&(n.lView=null,FA.push(n))}var Qk=re(L({},Ts),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Qs(n.lView)},consumerOnSignalRead(){this.lView[pn]=this}});function Yk(n){let e=n[pn]??Object.create(Zk);return e.lView=n,e}var Zk=re(L({},Ts),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=di(n.lView);for(;e&&!LA(e[oe]);)e=di(e);e&&Ty(e)},consumerOnSignalRead(){this.lView[pn]=this}});function LA(n){return n.type!==2}function VA(n){if(n[li]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[li])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ue]&8192)}}var Jk=100;function jA(n,e=0){let r=n[or].rendererFactory,i=!1;i||r.begin?.();try{Xk(n,e)}finally{i||r.end?.()}}function Xk(n,e){let t=Vy();try{qc(!0),hv(n,e);let r=0;for(;nu(n);){if(r===Jk)throw new W(103,!1);r++,hv(n,1)}}finally{qc(t)}}function eF(n,e,t,r){if(_o(e))return;let i=e[ue],o=!1,s=!1;af(e);let a=!0,c=null,l=null;o||(LA(n)?(l=zk(e),c=xs(l)):gd()===null?(a=!1,l=Yk(e),c=xs(l)):e[pn]&&(ro(e[pn]),e[pn]=null));try{Sy(e),Hb(n.bindingStartIndex),t!==null&&xA(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&gf(e,y,null)}else{let y=n.preOrderHooks;y!==null&&yf(e,y,0,null),Qy(e,0)}if(s||tF(e),VA(e),UA(e,0),n.contentQueries!==null&&uA(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&gf(e,y)}else{let y=n.contentHooks;y!==null&&yf(e,y,1),Qy(e,1)}rF(n,e);let h=n.components;h!==null&&HA(e,h,0);let m=n.viewQuery;if(m!==null&&lv(2,m,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&gf(e,y)}else{let y=n.viewHooks;y!==null&&yf(e,y,2),Qy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ef]){for(let y of e[ef])y();e[ef]=null}o||(kA(e),e[ue]&=-73)}catch(d){throw o||Qs(e),d}finally{l!==null&&(Oc(l,c),a&&Kk(l)),cf()}}function UA(n,e){for(let t=tA(n);t!==null;t=nA(t))for(let r=et;r<t.length;r++){let i=t[r];BA(i,e)}}function tF(n){for(let e=tA(n);e!==null;e=nA(e)){if(!(e[ue]&2))continue;let t=e[vo];for(let r=0;r<t.length;r++){let i=t[r];Ty(i)}}}function nF(n,e,t){Be(Oe.ComponentStart);let r=xn(e,n);try{BA(r,t)}finally{Be(Oe.ComponentEnd,r[rt])}}function BA(n,e){nf(n)&&hv(n,e)}function hv(n,e){let r=n[oe],i=n[ue],o=n[pn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Pc(o)),s||=!1,o&&(o.dirty=!1),n[ue]&=-9217,s)eF(r,n,r.template,n[rt]);else if(i&8192){let a=ie(null);try{VA(n),UA(n,1);let c=r.components;c!==null&&HA(n,c,1),kA(n)}finally{ie(a)}}}function HA(n,e,t){for(let r=0;r<e.length;r++)nF(n,e[r],t)}function rF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vi(~i);else{let o=i,s=t[++r],a=t[++r];Gb(s,o);let c=e[o];Be(Oe.HostBindingsUpdateStart,c);try{a(2,c)}finally{Be(Oe.HostBindingsUpdateEnd,c)}}}}finally{vi(-1)}}function Zv(n,e){let t=Vy()?64:1088;for(n[or].changeDetectionScheduler?.notify(e);n;){n[ue]|=t;let r=di(n);if(Ks(n)&&!r)return n;n=r}return null}function $A(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function GA(n,e){let t=et+e;if(t<n.length)return n[t]}function Yf(n,e,t,r=!0){let i=e[oe];if(iF(i,e,n,t),r){let s=fv(t,n),a=e[Ze],c=a.parentNode(n[gi]);c!==null&&yk(i,n[Sn],a,e,c,s)}let o=e[qs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qA(n,e){let t=du(n,e);return t!==void 0&&zf(t[oe],t),t}function du(n,e){if(n.length<=et)return;let t=et+e,r=n[t];if(r){let i=r[mi];i!==null&&i!==n&&qv(i,r),e>0&&(n[t-1][An]=r[An]);let o=Qc(n,et+e);gk(r[oe],r);let s=o[sr];s!==null&&s.detachView(o[oe]),r[wt]=null,r[An]=null,r[ue]&=-129}return r}function iF(n,e,t,r){let i=et+r,o=t.length;r>0&&(t[i-1][An]=e),r<o-et?(e[An]=t[i],hy(t,et+r,e)):(t.push(e),e[An]=null),e[wt]=t;let s=e[mi];s!==null&&t!==s&&zA(s,e);let a=e[sr];a!==null&&a.insertView(n),rf(e),e[ue]|=128}function zA(n,e){let t=n[vo],r=e[wt];if(ar(r))n[ue]|=2;else{let i=r[wt][hn];e[hn]!==i&&(n[ue]|=2)}t===null?n[vo]=[e]:t.push(e)}var Ei=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[oe];return lu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[rt]}set context(e){this._lView[rt]=e}get destroyed(){return _o(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wt];if(Bn(e)){let t=e[Xc],r=t?t.indexOf(this):-1;r>-1&&(du(e,r),Qc(t,r))}this._attachedToViewContainer=!1}zf(this._lView[oe],this._lView)}onDestroy(e){xy(this._lView,e)}markForCheck(){Zv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){rf(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,jA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ks(this._lView),t=this._lView[mi];t!==null&&!e&&qv(t,this._lView),SA(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=Ks(this._lView),r=this._lView[mi];r!==null&&!t&&zA(r,this._lView),rf(this._lView)}};var bo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=oF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Qf(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ei(o)}}return n})();function oF(){return Jv(At(),de())}function Jv(n,e){return n.type&4?new bo(e,n,ra(n,e)):null}function vu(n,e,t,r,i){let o=n.data[e];if(o===null)o=sF(n,e,t,r,i),$b()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Vb();o.injectorIndex=s===null?-1:s.injectorIndex}return Ys(o,!0),o}function sF(n,e,t,r,i){let o=Fy(),s=Ly(),a=s?o:o&&o.parent,c=n.data[e]=cF(n,a,t,e,r,i);return aF(n,c,o,s),c}function aF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function cF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Lb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uF(n){let e=n[Iy]??[],r=n[wt][Ze],i=[];for(let o of e)o.data[oA]!==void 0?i.push(o):lF(o,r);n[Iy]=i}function lF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[iA];for(;t<i;){let o=r.nextSibling;mA(e,r,!1),r=o,t++}}}var dF=()=>null,fF=()=>null;function pv(n,e){return dF(n,e)}function WA(n,e,t){return fF(n,e,t)}var KA=class{},Zf=class{},mv=class{resolveComponentFactory(e){throw new W(917,!1)}},_u=class{static NULL=new mv},Do=class{},wi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>hF()}return n})();function hF(){let n=de(),e=At(),t=xn(e.index,n);return(ar(t)?t:n)[Ze]}var QA=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>null})}return n})();var _f={},gv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,_f,r);return i!==_f||t===_f?i:this.parentInjector.get(e,t,r)}};function xf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ty(i,a);else if(o==2){let c=a,l=e[++s];r=ty(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ce(n,e=0){let t=de();if(t===null)return me(n,e);let r=At();return QD(r,t,kt(n),e)}function YA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,l]=d.resolveHostDirectives(s);break}gF(n,e,t,a,o,c,l)}o!==null&&r!==null&&pF(t,r,o)}function pF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new W(-301,!1);r.push(e[i],o)}}function mF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function gF(n,e,t,r,i,o,s){let a=r.length,c=null;for(let m=0;m<a;m++){let y=r[m];c===null&&cr(y)&&(c=y,mF(n,t,m)),av(Df(t,e),n,y.type)}wF(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,d=!1,h=CA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Xs(t.mergedAttrs,y.hostAttrs),vF(n,t,e,h,y),IF(h,y,i),s!==null&&s.has(y)){let[N,P]=s.get(y);t.directiveToIndex.set(y.type,[h,N+t.directiveStart,P+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,h);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}yF(n,t,o)}function yF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ED(0,e,i,r),ED(1,e,i,r),wD(e,r,!1);else{let o=t.get(i);ID(0,e,o,r),ID(1,e,o,r),wD(e,r,!0)}}}function ED(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),ZA(e,o)}}function ID(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ZA(e,s)}}function ZA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function wD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Vv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function vF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ui(i.type,!0)),s=new wo(o,cr(i),Ce,null);n.blueprint[r]=s,t[r]=s,_F(n,e,r,CA(n,t,i.hostVars,mn),i)}function _F(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;EF(s)!=a&&s.push(a),s.push(t,r,o)}}function EF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function IF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;cr(e)&&(t[""]=n)}}function wF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function JA(n,e,t,r,i,o,s,a){let c=e[oe],l=c.consts,d=Mn(l,s),h=vu(c,n,t,r,d);return o&&YA(c,e,h,Mn(l,a),i),h.mergedAttrs=Xs(h.mergedAttrs,h.attrs),h.attrs!==null&&xf(h,h.attrs,!1),h.mergedAttrs!==null&&xf(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function XA(n,e){UD(n,e),wy(e)&&n.queries.elementEnd(e)}function CF(n,e,t,r,i,o){let s=e.consts,a=Mn(s,i),c=vu(e,n,t,r,a);if(c.mergedAttrs=Xs(c.mergedAttrs,c.attrs),o!=null){let l=Mn(s,o);c.localNames=[];for(let d=0;d<l.length;d+=2)c.localNames.push(l[d],-1)}return c.attrs!==null&&xf(c,c.attrs,!1),c.mergedAttrs!==null&&xf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function eS(n,e,t){return n[e]=t}function bF(n,e){return n[e]}function Pr(n,e,t){if(t===mn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function tS(n,e,t,r){let i=Pr(n,e,t);return Pr(n,e+1,r)||i}function Ef(n,e,t){return function r(i){let o=yi(n)?xn(n.index,e):e;Zv(o,5);let s=e[rt],a=CD(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=CD(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function CD(n,e,t,r){let i=ie(null);try{return Be(Oe.OutputStart,e,t),t(r)!==!1}catch(o){return Hk(n,o),!1}finally{Be(Oe.OutputEnd,e,t),ie(i)}}function nS(n,e,t,r,i,o,s,a){let c=eu(n),l=!1,d=null;if(!r&&c&&(d=AF(e,t,o,n.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,l=!0}else{let h=Hn(n,t),m=r?r(h):h;BP(t,m,o,a);let y=i.listen(m,o,a);if(!DF(o)){let C=r?N=>r(Tn(N[n.index])):n.index;rS(C,e,t,o,a,y,!1)}}return l}function DF(n){return n.startsWith("animation")||n.startsWith("transition")}function AF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[zs],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function rS(n,e,t,r,i,o,s){let a=e.firstCreatePass?Ry(e):null,c=My(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function bD(n,e,t,r,i,o){let s=e[t],a=e[oe],l=a.data[t].outputs[r],h=s[l].subscribe(o);rS(n.index,a,e,i,o,h,!0)}var yv=Symbol("BINDING");var Mf=class extends _u{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hi(e);return new ta(t,this.ngModule)}};function SF(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&qf.SignalBased)!==0};return i&&(o.transform=i),o})}function TF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function xF(n,e,t){let r=e instanceof pt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new gv(t,r):t}function MF(n){let e=n.get(Do,null);if(e===null)throw new W(407,!1);let t=n.get(QA,null),r=n.get(ho,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function RF(n,e){let t=iS(n);return hA(e,t,t==="svg"?Cy:t==="math"?xb:null)}function iS(n){return(n.selectors[0][0]||"div").toLowerCase()}var ta=class extends Zf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=SF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ak(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Be(Oe.DynamicComponentStart);let a=ie(null);try{let c=this.componentDef,l=NF(r,c,s,o),d=xF(c,i||this.ngModule,e),h=MF(d),m=h.rendererFactory.createRenderer(null,c),y=r?Mk(m,r,c.encapsulation,d):RF(c,m),C=s?.some(DD)||o?.some(U=>typeof U!="function"&&U.bindings.some(DD)),N=Uv(null,l,null,512|wA(c),null,null,h,m,d,null,cA(y,d,!0));N[it]=y,af(N);let P=null;try{let U=JA(it,N,2,"#host",()=>l.directiveRegistry,!0,0);gA(m,y,U),ea(y,N),Kv(l,N,U),lA(l,U,N),XA(l,U),t!==void 0&&PF(U,this.ngContentSelectors,t),P=xn(U.index,N),N[rt]=P[rt],Yv(l,N,null)}catch(U){throw P!==null&&uv(P),uv(N),U}finally{Be(Oe.DynamicComponentEnd),cf()}return new Rf(this.componentType,N,!!C)}finally{ie(a)}}};function NF(n,e,t,r){let i=n?["ng-version","21.1.4"]:ck(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[yv].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let h=r[d];if(typeof h!="function")for(let m of h.bindings){a+=m[yv].requiredVars;let y=d+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let c=[e];if(r)for(let d of r){let h=typeof d=="function"?d:d.type,m=ly(h);c.push(m)}return jv(0,null,OF(o,s),1,a,c,null,null,null,[i],null)}function OF(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function DD(n){let e=n[yv].kind;return e==="input"||e==="twoWay"}var Rf=class extends KA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=tu(t[oe],it),this.location=ra(this._tNode,t),this.instance=xn(this._tNode.index,t)[rt],this.hostView=this.changeDetectorRef=new Ei(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Qv(r,i[oe],i,e,t);this.previousInputValues.set(e,t);let s=xn(r.index,i);Zv(s,1)}get injector(){return new Io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ci=(()=>{class n{static __NG_ELEMENT_ID__=kF}return n})();function kF(){let n=At();return sS(n,de())}var FF=Ci,oS=class extends FF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ra(this._hostTNode,this._hostLView)}get injector(){return new Io(this._hostTNode,this._hostLView)}get parentInjector(){let e=Nv(this._hostTNode,this._hostLView);if($D(e)){let t=Cf(e,this._hostLView),r=wf(e),i=t[oe].data[r+8];return new Io(i,t)}else return new Io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=AD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-et}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=pv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,uu(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!pP(e),l;if(c)l=t;else{let P=t||{};l=P.index,r=P.injector,i=P.projectableNodes,o=P.environmentInjector||P.ngModuleRef,s=P.directives,a=P.bindings}let d=c?e:new ta(hi(e)),h=r||this.parentInjector;if(!o&&d.ngModule==null){let U=(c?h:this.parentInjector).get(pt,null);U&&(o=U)}let m=hi(d.componentType??{}),y=pv(this._lContainer,m?.id??null),C=y?.firstChild??null,N=d.create(h,i,C,o,s,a);return this.insertImpl(N.hostView,l,uu(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Rb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[wt],l=new oS(c,c[Sn],c[wt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Yf(s,i,o,r),e.attachToViewContainerRef(),hy(Jy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=AD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=du(this._lContainer,t);r&&(Qc(Jy(this._lContainer),t),zf(r[oe],r))}detach(e){let t=this._adjustIndex(e,-1),r=du(this._lContainer,t);return r&&Qc(Jy(this._lContainer),t)!=null?new Ei(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function AD(n){return n[Xc]}function Jy(n){return n[Xc]||(n[Xc]=[])}function sS(n,e){let t,r=e[n.index];return Bn(r)?t=r:(t=$A(r,e,null,n),e[n.index]=t,Bv(e,t)),VF(t,e,n,r),new oS(t,n,e)}function LF(n,e){let t=n[Ze],r=t.createComment(""),i=Hn(e,n),o=t.parentNode(i);return Tf(t,o,r,t.nextSibling(i),!1),r}var VF=BF,jF=()=>!1;function UF(n,e,t){return jF(n,e,t)}function BF(n,e,t,r){if(n[gi])return;let i;t.type&8?i=Tn(r):i=LF(e,t),n[gi]=i}var vv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},_v=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)e0(e,t).matches!==null&&this.queries[t].setDirty()}},Nf=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=KF(e):this.predicate=e}},Ev=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Iv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,HF(t,o)),this.matchTNodeWithReadOption(e,t,vf(t,e,o,!1,!1))}else r===bo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Rn||i===Ci||i===bo&&t.type&4)this.addMatch(t.index,-2);else{let o=vf(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function HF(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $F(n,e){return n.type&11?ra(n,e):n.type&4?Jv(n,e):null}function GF(n,e,t,r){return t===-1?$F(e,n):t===-2?qF(n,e,r):cu(n,n[oe],t,e)}function qF(n,e,t){if(t===Rn)return ra(e,n);if(t===bo)return Jv(e,n);if(t===Ci)return sS(e,n)}function aS(n,e,t,r){let i=e[sr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(GF(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function wv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=aS(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let h=et;h<d.length;h++){let m=d[h];m[mi]===m[wt]&&wv(m[oe],m,l,r)}if(d[vo]!==null){let h=d[vo];for(let m=0;m<h.length;m++){let y=h[m];wv(y[oe],y,l,r)}}}}}return r}function Xv(n,e){return n[sr].queries[e].queryList}function cS(n,e,t){let r=new Af((t&4)===4);return Pb(n,e,r,r.destroy),(e[sr]??=new _v).queries.push(new vv(r))-1}function zF(n,e,t){let r=ot();return r.firstCreatePass&&(uS(r,new Nf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),cS(r,de(),e)}function WF(n,e,t,r){let i=ot();if(i.firstCreatePass){let o=At();uS(i,new Nf(e,t,r),o.index),QF(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return cS(i,de(),t)}function KF(n){return n.split(",").map(e=>e.trim())}function uS(n,e,t){n.queries===null&&(n.queries=new Ev),n.queries.track(new Iv(e,t))}function QF(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function e0(n,e){return n.queries.getByIndex(e)}function lS(n,e){let t=n[oe],r=e0(t,e);return r.crossesNgTemplate?wv(t,n,e,[]):aS(t,n,r,e)}function dS(n,e,t){let r,i=kc(()=>{r._dirtyCounter();let o=ZF(r,n);if(e&&o===void 0)throw new W(-951,!1);return o});return r=i[Rt],r._dirtyCounter=Ne(0),r._flatValue=void 0,i}function fS(n){return dS(!0,!1,n)}function hS(n){return dS(!0,!0,n)}function YF(n,e){let t=n[Rt];t._lView=de(),t._queryIndex=e,t._queryList=Xv(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(r=>r+1))}function ZF(n,e){let t=n._lView,r=n._queryIndex;if(t===void 0||r===void 0||t[ue]&4)return e?void 0:an;let i=Xv(t,r),o=lS(t,r);return i.reset(o,JD),e?i.first:i._changesDetected||n._flatValue===void 0?n._flatValue=i.toArray():n._flatValue}var Ao=class{},Jf=class{};var Of=class extends Ao{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=uy(e);this._bootstrapComponents=EA(o.bootstrap),this._r3Injector=$y(e,t,[{provide:Ao,useValue:this},{provide:_u,useValue:this.componentFactoryResolver},...r],Sr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pf=class extends Jf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Of(this.moduleType,e,[])}};var fu=class extends Ao{injector;componentFactoryResolver=new Mf(this);instance=null;constructor(e){super();let t=new fo([...e.providers,{provide:Ao,useValue:this},{provide:_u,useValue:this.componentFactoryResolver}],e.parent||Jc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Eu(n,e,t=null){return new fu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var JF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=gy(!1,t.type),i=r.length>0?Eu([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:n,providedIn:"environment",factory:()=>new n(me(pt))})}return n})();function en(n){return pu(()=>{let e=pS(n),t=re(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ov.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qn.Emulated,styles:n.styles||an,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ii("NgStandalone"),mS(t);let r=n.dependencies;return t.directiveDefs=SD(r,XF),t.pipeDefs=SD(r,mb),t.id=n2(t),t})}function XF(n){return hi(n)||ly(n)}function Fr(n){return pu(()=>({type:n.type,bootstrap:n.bootstrap||an,declarations:n.declarations||an,imports:n.imports||an,exports:n.exports||an,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function e2(n,e){if(n==null)return pi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=qf.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function t2(n){if(n==null)return pi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function tn(n){return pu(()=>{let e=pS(n);return mS(e),e})}function t0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function pS(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||pi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||an,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:e2(n.inputs,e),outputs:t2(n.outputs),debugInfo:null}}function mS(n){n.features?.forEach(e=>e(n))}function SD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function n2(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function r2(n){return Object.getPrototypeOf(n.prototype).constructor}function bi(n){let e=r2(n.type),t=!0,r=[n];for(;e;){let i;if(cr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Xy(n.inputs),s.declaredInputs=Xy(n.declaredInputs),s.outputs=Xy(n.outputs);let a=i.hostBindings;a&&c2(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&s2(n,c),l&&a2(n,l),i2(n,i),pb(n.outputs,i.outputs),cr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===bi&&(t=!1)}}e=Object.getPrototypeOf(e)}o2(r)}function i2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function o2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xs(i.hostAttrs,t=Xs(t,i.hostAttrs))}}function Xy(n){return n===pi?{}:n===an?[]:n}function s2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function a2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function c2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function gS(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Xs(n.mergedAttrs,n.attrs);let d=n.tView=jv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ys(n,!1);let c=l2(t,e,n,r);lf()&&zv(t,e,c,n),ea(c,e);let l=$A(c,e,c,n);e[r+it]=l,Bv(e,l),UF(l,n,e)}function u2(n,e,t,r,i,o,s,a,c,l,d){let h=t+it,m;return e.firstCreatePass?(m=vu(e,h,4,s||null,a||null),Oy()&&YA(e,n,m,Mn(e.consts,l),RA),UD(e,m)):m=e.data[h],gS(m,n,e,t,r,i,o,c),eu(m)&&Kv(e,n,m),l!=null&&Kf(n,m,d),m}function kf(n,e,t,r,i,o,s,a,c,l,d){let h=t+it,m;if(e.firstCreatePass){if(m=vu(e,h,4,s||null,a||null),l!=null){let y=Mn(e.consts,l);m.localNames=[];for(let C=0;C<y.length;C+=2)m.localNames.push(y[C],-1)}}else m=e.data[h];return gS(m,n,e,t,r,i,o,c),l!=null&&Kf(n,m,d),m}function Xf(n,e,t,r,i,o,s,a){let c=de(),l=ot(),d=Mn(l.consts,o);return u2(c,l,n,e,t,r,i,d,void 0,s,a),Xf}var l2=d2;function d2(n,e,t,r){return df(!0),e[Ze].createComment("")}var n0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function yS(n){return typeof n=="function"&&n[Rt]!==void 0}function r0(n){return yS(n)&&typeof n.set=="function"}var i0=new Z("");function Di(n){return!!n&&typeof n.then=="function"}function o0(n){return!!n&&typeof n.subscribe=="function"}var vS=new Z("");var s0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(vS,{optional:!0})??[];injector=j(Dn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ht(this.injector,i);if(Di(o))t.push(o);else if(o0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eh=new Z("");function _S(){bg(()=>{let n="";throw new W(600,n)})}function ES(n){return n.isBoundToModule}var f2=10;var xo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j($n);afterRenderManager=j(DA);zonelessEnabled=j(iu);rootEffectScheduler=j(hf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new dt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(_i);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ye(t=>!t))}constructor(){j(yu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(pt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Dn.NULL){return this._injector.get(fn).run(()=>{Be(Oe.BootstrapComponentStart);let s=t instanceof Zf;if(!this._injector.get(s0).done){let C="";throw new W(405,C)}let c;s?c=t:c=this._injector.get(_u).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=ES(c)?void 0:this._injector.get(Ao),d=r||c.selector,h=c.create(i,[],d,l),m=h.location.nativeElement,y=h.injector.get(i0,null);return y?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),au(this.components,h),y?.unregisterApplication(m)}),this._loadComponent(h),Be(Oe.BootstrapComponentEnd,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Be(Oe.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run($v.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Be(Oe.ChangeDetectionEnd),new W(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),Be(Oe.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Do,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<f2;){Be(Oe.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Be(Oe.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!nu(i))continue;let o=r&&!this.zonelessEnabled?0:1;jA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>nu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;au(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(eh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>au(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function au(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ai(n,e,t,r){let i=de(),o=Eo();if(Pr(i,o,e)){let s=ot(),a=uf();jk(a,i,n,e,t,r)}return Ai}var zq=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Cv=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function ev(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function h2(n,e,t,r){let i,o,s=0,a=n.length-1,c=void 0;if(Array.isArray(e)){ie(r);let l=e.length-1;for(ie(null);s<=a&&s<=l;){let d=n.at(s),h=e[s],m=ev(s,d,s,h,t);if(m!==0){m<0&&n.updateValue(s,h),s++;continue}let y=n.at(a),C=e[l],N=ev(a,y,l,C,t);if(N!==0){N<0&&n.updateValue(a,C),a--,l--;continue}let P=t(s,d),U=t(a,y),J=t(s,h);if(Object.is(J,U)){let Q=t(l,C);Object.is(Q,P)?(n.swap(s,a),n.updateValue(a,C),l--,a--):n.move(a,s),n.updateValue(s,h),s++;continue}if(i??=new Ff,o??=xD(n,s,a,t),bv(n,i,s,J))n.updateValue(s,h),s++,a++;else if(o.has(J))i.set(P,n.detach(s)),a--;else{let Q=n.create(s,e[s]);n.attach(s,Q),s++,a++}}for(;s<=l;)TD(n,i,t,s,e[s]),s++}else if(e!=null){ie(r);let l=e[Symbol.iterator]();ie(null);let d=l.next();for(;!d.done&&s<=a;){let h=n.at(s),m=d.value,y=ev(s,h,s,m,t);if(y!==0)y<0&&n.updateValue(s,m),s++,d=l.next();else{i??=new Ff,o??=xD(n,s,a,t);let C=t(s,m);if(bv(n,i,s,C))n.updateValue(s,m),s++,a++,d=l.next();else if(!o.has(C))n.attach(s,n.create(s,m)),s++,a++,d=l.next();else{let N=t(s,h);i.set(N,n.detach(s)),a--}}}for(;!d.done;)TD(n,i,t,n.length,d.value),d=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function bv(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function TD(n,e,t,r,i){if(bv(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function xD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Ff=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function be(n,e,t,r,i,o,s,a){Ii("NgControlFlow");let c=de(),l=ot(),d=Mn(l.consts,o);return kf(c,l,n,e,t,r,i,d,256,s,a),a0}function a0(n,e,t,r,i,o,s,a){Ii("NgControlFlow");let c=de(),l=ot(),d=Mn(l.consts,o);return kf(c,l,n,e,t,r,i,d,512,s,a),a0}function De(n,e){Ii("NgControlFlow");let t=de(),r=Eo(),i=t[r]!==mn?t[r]:-1,o=i!==-1?Lf(t,it+i):void 0,s=0;if(Pr(t,r,n)){let a=ie(null);try{if(o!==void 0&&qA(o,s),n!==-1){let c=it+n,l=Lf(t,c),d=Tv(t[oe],c),h=WA(l,d,t),m=Qf(t,d,e,{dehydratedView:h});Yf(l,m,s,uu(d,h))}}finally{ie(a)}}else if(o!==void 0){let a=GA(o,s);a!==void 0&&(a[rt]=e)}}var Dv=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-et}};var Av=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function mt(n,e,t,r,i,o,s,a,c,l,d,h,m){Ii("NgControlFlow");let y=de(),C=ot(),N=c!==void 0,P=de(),U=a?s.bind(P[hn][rt]):s,J=new Av(N,U);P[it+n]=J,kf(y,C,n+1,e,t,r,i,Mn(C.consts,o),256),N&&kf(y,C,n+2,c,l,d,h,Mn(C.consts,m),512)}var Sv=class extends Cv{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-et}at(e){return this.getLView(e)[rt].$implicit}attach(e,t){let r=t[qs];this.needsIndexUpdate||=e!==this.length,Yf(this.lContainer,t,e,uu(this.templateTNode,r)),p2(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,m2(this.lContainer,e),g2(this.lContainer,e)}create(e,t){let r=pv(this.lContainer,this.templateTNode.tView.ssrId);return Qf(this.hostLView,this.templateTNode,new Dv(this.lContainer,t,e),{dehydratedView:r})}destroy(e){zf(e[oe],e)}updateValue(e,t){this.getLView(e)[rt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[rt].$index=e}getLView(e){return y2(this.lContainer,e)}};function gt(n){let e=ie(null),t=Nr();try{let r=de(),i=r[oe],o=r[t],s=t+1,a=Lf(r,s);if(o.liveCollection===void 0){let l=Tv(i,s);o.liveCollection=new Sv(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(h2(c,n,o.trackByFn,e),c.updateIndexes(),o.hasEmptyBlock){let l=Eo(),d=c.length===0;if(Pr(r,l,d)){let h=t+2,m=Lf(r,h);if(d){let y=Tv(i,h),C=WA(m,y,r),N=Qf(r,y,void 0,{dehydratedView:C});Yf(m,N,0,uu(y,C))}else i.firstUpdatePass&&uF(m),qA(m,0)}}}finally{ie(e)}}function Lf(n,e){return n[e]}function p2(n,e){if(n.length<=et)return;let t=et+e,r=n[t],i=r?r[yo]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Mr];hk(o,i),Co.delete(r[Rr]),i.detachedLeaveAnimationFns=void 0}}function m2(n,e){if(n.length<=et)return;let t=et+e,r=n[t],i=r?r[yo]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function g2(n,e){return du(n,e)}function y2(n,e){return GA(n,e)}function Tv(n,e){return tu(n,e)}function Ft(n,e,t){let r=de(),i=Eo();if(Pr(r,i,e)){let o=ot(),s=uf();MA(s,r,n,e,r[Ze],t)}return Ft}function MD(n,e,t,r,i){Qv(e,n,t,i?"class":"style",r)}function _(n,e,t,r){let i=de(),o=i[oe],s=n+it,a=o.firstCreatePass?JA(s,i,2,e,RA,Oy(),t,r):o.data[s];if(NA(a,i,n,e,IS),eu(a)){let c=i[oe];Kv(c,i,a),lA(c,a,i)}return r!=null&&Kf(i,a),_}function w(){let n=ot(),e=At(),t=OA(e);return n.firstCreatePass&&XA(n,t),Py(t)&&ky(),Ny(),t.classesWithoutHost!=null&&EP(t)&&MD(n,t,de(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&IP(t)&&MD(n,t,de(),t.stylesWithoutHost,!1),w}function se(n,e,t,r){return _(n,e,t,r),w(),se}function F(n,e,t,r){let i=de(),o=i[oe],s=n+it,a=o.firstCreatePass?CF(s,o,2,e,t,r):o.data[s];return NA(a,i,n,e,IS),r!=null&&Kf(i,a),F}function B(){let n=At(),e=OA(n);return Py(e)&&ky(),Ny(),B}function Ae(n,e,t,r){return F(n,e,t,r),B(),Ae}var IS=(n,e,t,r,i)=>(df(!0),hA(e[Ze],r,Zb()));function st(){return de()}var ou=void 0;function v2(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var _2=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ou,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ou,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",ou,ou,ou],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",v2],tv={};function gn(n){let e=E2(n),t=RD(e);if(t)return t;let r=e.split("-")[0];if(t=RD(r),t)return t;if(r==="en")return _2;throw new W(701,!1)}function RD(n){return n in tv||(tv[n]=xr.ng&&xr.ng.common&&xr.ng.common.locales&&xr.ng.common.locales[n]),tv[n]}var at=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(at||{});function E2(n){return n.toLowerCase().replace(/_/g,"-")}var Iu="en-US";var I2=Iu;function wS(n){typeof n=="string"&&(I2=n.toLowerCase().replace(/_/g,"-"))}function ee(n,e,t){let r=de(),i=ot(),o=At();return CS(i,r,r[Ze],o,n,e,t),ee}function ia(n,e,t){let r=de(),i=ot(),o=At();return(o.type&3||t)&&nS(o,i,r,t,r[Ze],n,e,Ef(o,r,e)),ia}function CS(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Ef(r,e,o),nS(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){let m=d[h],y=d[h+1];c??=Ef(r,e,o),bD(r,e,m,y,i,c)}if(l&&l.length)for(let h of l)c??=Ef(r,e,o),bD(r,e,h,i,i,c)}}function q(n=1){return Yb(n)}function th(n,e,t,r){return WF(n,e,t,r),th}function c0(n){let e=de(),t=ot(),r=sf();ru(r+1);let i=e0(t,r);if(n.dirty&&Mb(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=lS(e,r);n.reset(o,JD),n.notifyOnChanges()}return!0}return!1}function u0(){return Xv(de(),sf())}function nh(n,e,t,r){return YF(n,zF(e,t,r)),nh}function l0(n=1){ru(sf()+n)}function rh(n){let e=Ub();return Dy(e,it+n)}function mf(n,e){return n<<17|e<<2}function So(n){return n>>17&32767}function w2(n){return(n&2)==2}function C2(n,e){return n&131071|e<<17}function xv(n){return n|2}function na(n){return(n&131068)>>2}function nv(n,e){return n&-131069|e<<2}function b2(n){return(n&1)===1}function Mv(n){return n|1}function D2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=So(s),c=na(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||$s(h,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let m=So(n[a+1]);n[r+1]=mf(m,a),m!==0&&(n[m+1]=nv(n[m+1],r)),n[a+1]=C2(n[a+1],r)}else n[r+1]=mf(a,0),a!==0&&(n[a+1]=nv(n[a+1],r)),a=r;else n[r+1]=mf(c,0),a===0?a=r:n[c+1]=nv(n[c+1],r),c=r;l&&(n[r+1]=xv(n[r+1])),ND(n,d,r,!0),ND(n,d,r,!1),A2(e,d,n,r,o),s=mf(a,c),o?e.classBindings=s:e.styleBindings=s}function A2(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$s(o,e)>=0&&(t[r+1]=Mv(t[r+1]))}function ND(n,e,t,r){let i=n[t+1],o=e===null,s=r?So(i):na(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];S2(c,e)&&(a=!0,n[s+1]=r?Mv(l):xv(l)),s=r?So(l):na(l)}a&&(n[t+1]=r?xv(i):Mv(i))}function S2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$s(n,e)>=0:!1}function Si(n,e,t){return bS(n,e,t,!1),Si}function Ee(n,e){return bS(n,e,null,!0),Ee}function bS(n,e,t,r){let i=de(),o=ot(),s=Uy(2);if(o.firstUpdatePass&&x2(o,n,s,r),e!==mn&&Pr(i,s,e)){let a=o.data[Nr()];P2(o,a,i,i[Ze],n,i[s+1]=k2(e,t),r,s)}}function T2(n,e){return e>=n.expandoStartIndex}function x2(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Nr()],s=T2(n,t);F2(o,r)&&e===null&&!s&&(e=!1),e=M2(i,o,e,r),D2(i,o,e,t,s,r)}}function M2(n,e,t,r){let i=zb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=rv(null,n,e,t,r),t=hu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=rv(i,n,e,t,r),o===null){let c=R2(n,e,r);c!==void 0&&Array.isArray(c)&&(c=rv(null,n,e,c[1],r),c=hu(c,e.attrs,r),N2(n,e,r,c))}else o=O2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function R2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(na(r)!==0)return n[So(r)]}function N2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[So(i)]=r}function O2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=hu(r,s,t)}return hu(r,e.attrs,t)}function rv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=hu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function hu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),wb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function P2(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=b2(l)?OD(c,e,t,i,na(l),s):void 0;if(!Vf(d)){Vf(o)||w2(l)&&(o=OD(c,null,t,i,a,s));let h=by(Nr(),t);xk(r,s,h,i,o)}}function OD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,m=t[i+1];m===mn&&(m=h?an:void 0);let y=h?Xd(m,r):d===r?m:void 0;if(l&&!Vf(y)&&(y=Xd(c,r)),Vf(y)&&(a=y,s))return a;let C=n[i+1];i=s?So(C):na(C)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Xd(c,r))}return a}function Vf(n){return n!==void 0}function k2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Sr($f(n)))),n}function F2(n,e){return(n.flags&(e?8:16))!==0}function D(n,e=""){let t=de(),r=ot(),i=n+it,o=r.firstCreatePass?vu(r,i,1,e,null):r.data[i],s=L2(r,t,o,e);t[i]=s,lf()&&zv(r,t,s,o),Ys(o,!1)}var L2=(n,e,t,r)=>(df(!0),qP(e[Ze],r));function V2(n,e,t,r=""){return Pr(n,Eo(),t)?e+Hs(t)+r:mn}function j2(n,e,t,r,i,o=""){let s=Bb(),a=tS(n,s,t,i);return Uy(2),a?e+Hs(t)+r+Hs(i)+o:mn}function fe(n){return He("",n),fe}function He(n,e,t){let r=de(),i=V2(r,n,e,t);return i!==mn&&DS(r,Nr(),i),He}function Mo(n,e,t,r,i){let o=de(),s=j2(o,n,e,t,r,i);return s!==mn&&DS(o,Nr(),s),Mo}function DS(n,e,t){let r=by(e,n);zP(n[Ze],r,t)}function $t(n,e,t){r0(e)&&(e=e());let r=de(),i=Eo();if(Pr(r,i,e)){let o=ot(),s=uf();MA(s,r,n,e,r[Ze],t)}return $t}function nn(n,e){let t=r0(n);return t&&n.set(e),t}function Gt(n,e){let t=de(),r=ot(),i=At();return CS(r,t,t[Ze],i,n,e),Gt}function PD(n,e,t){let r=ot();r.firstCreatePass&&AS(e,r.data,r.blueprint,cr(n),t)}function AS(n,e,t,r,i){if(n=kt(n),Array.isArray(n))for(let o=0;o<n.length;o++)AS(n[o],e,t,r,i);else{let o=ot(),s=de(),a=At(),c=lo(n)?n:kt(n.provide),l=vy(n),d=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(lo(n)||!n.multi){let y=new wo(l,i,Ce,null),C=ov(c,e,i?d:d+m,h);C===-1?(av(Df(a,s),o,c),iv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=ov(c,e,d+m,h),C=ov(c,e,d,d+m),N=y>=0&&t[y],P=C>=0&&t[C];if(i&&!P||!i&&!N){av(Df(a,s),o,c);let U=H2(i?B2:U2,t.length,i,r,l,n);!i&&P&&(t[C].providerFactory=U),iv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=SS(t[i?C:y],l,!i&&r);iv(o,n,y>-1?y:C,U)}!i&&r&&P&&t[C].componentProviders++}}}function iv(n,e,t,r){let i=lo(e),o=Ab(e);if(i||o){let c=(o?kt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function SS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ov(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function U2(n,e,t,r,i){return Rv(this.multi,[])}function B2(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=cu(r,r[oe],this.providerFactory.index,i);s=c.slice(0,a),Rv(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Rv(o,s);return s}function Rv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function H2(n,e,t,r,i,o){let s=new wo(n,t,Ce,null);return s.multi=[],s.index=e,s.componentProviders=0,SS(s,i,r&&!t),s}function wu(n,e){return t=>{t.providersResolver=(r,i)=>PD(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>PD(r,i?i(e):e,!0))}}function d0(n,e){let t=jy()+n,r=de();return r[t]===mn?eS(r,t,e()):bF(r,t)}function $2(n,e){let t=n[e];return t===mn?void 0:t}function G2(n,e,t,r,i,o,s){let a=e+t;return tS(n,a,i,o)?eS(n,a+2,s?r.call(s,i,o):r(i,o)):$2(n,a+2)}function Ro(n,e){let t=ot(),r,i=n+it;t.firstCreatePass?(r=q2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ui(r.type,!0)),s,a=Xt(Ce);try{let c=bf(!1),l=o();return bf(c),Ay(t,de(),i,l),l}finally{Xt(a)}}function q2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function No(n,e,t,r){let i=n+it,o=de(),s=Dy(o,i);return z2(o,i)?G2(o,jy(),e,s.transform,t,r,s):s.transform(t,r)}function z2(n,e){return n[oe].data[e].pure}var jf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},f0=(()=>{class n{compileModuleSync(t){return new Pf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uy(t),o=EA(i.declarations).reduce((s,a)=>{let c=hi(a);return c&&s.push(new ta(c)),s},[]);return new jf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TS=(()=>{class n{applicationErrorHandler=j($n);appRef=j(xo);taskService=j(_i);ngZone=j(fn);zonelessEnabled=j(iu);tracing=j(yu,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Nt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(Wy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?tD:Gy;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h0(){return Ii("NgZoneless"),Yc([...p0(),[]])}function p0(){return[{provide:ho,useExisting:TS},{provide:fn,useClass:Wc},{provide:iu,useValue:!0}]}function W2(){return typeof $localize<"u"&&$localize.locale||Iu}var Cu=new Z("",{factory:()=>j(Cu,{optional:!0,skipSelf:!0})||W2()});function tt(n,e){return kc(n,e?.equal)}var RS=Symbol("InputSignalNode#UNSET"),uL=re(L({},yd),{transformFn:void 0,applyValueToInputSignal(n,e){Fc(n,e)}});function NS(n,e){let t=Object.create(uL);t.value=n,t.transformFn=e?.transform;function r(){if(Nc(t),t.value===RS){let i=null;throw new W(-950,i)}return t.value}return r[Rt]=t,r}var oh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>mu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function xS(n,e){return NS(n,e)}function lL(n){return NS(RS,n)}var OS=(xS.required=lL,xS);function MS(n,e){return fS(e)}function dL(n,e){return hS(e)}var y0=(MS.required=dL,MS);var m0=new Z(""),fL=new Z("");function bu(n){return!n.moduleRef}function hL(n){let e=bu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(fn);return t.run(()=>{bu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get($n),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),bu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(m0);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(m0);s.add(o),n.moduleRef.onDestroy(()=>{au(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return mL(r,t,()=>{let o=e.get(_i),s=o.add(),a=e.get(s0);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Cu,Iu);if(wS(c||Iu),!e.get(fL,!0))return bu(n)?e.get(xo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(bu(n)){let d=e.get(xo);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return pL?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{o.remove(s)})})})}var pL;function mL(n,e,t){try{let r=t();return Di(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var ih=null;function gL(n=[],e){return Dn.create({name:e,providers:[{provide:Zc,useValue:"platform"},{provide:m0,useValue:new Set([()=>ih=null])},...n]})}function yL(n=[]){if(ih)return ih;let e=gL(n);return ih=e,_S(),vL(e),e}function vL(n){let e=n.get(Bf,null);Ht(n,()=>{e?.forEach(t=>t())})}var _L=1e4;var rZ=_L-1e3;var Oo=(()=>{class n{static __NG_ELEMENT_ID__=EL}return n})();function EL(n){return IL(At(),de(),(n&16)===16)}function IL(n,e,t){if(yi(n)&&!t){let r=xn(n.index,e);return new Ei(r,r)}else if(n.type&175){let r=e[hn];return new Ei(r,e)}return null}function PS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Be(Oe.BootstrapApplicationStart);try{let o=i?.injector??yL(r),s=[p0(),rD,...t||[]],a=new fu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return hL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Be(Oe.BootstrapApplicationEnd)}}function sa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var kS=null;function Nn(){return kS}function v0(n){kS??=n}var Du=class{},Po=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>j(FS),providedIn:"platform"})}return n})();var FS=(()=>{class n extends Po{_location;_history;_doc=j(St);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nn().getBaseHref(this._doc)}onPopState(t){let r=Nn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Nn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function LS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function zn(n){return n&&n[0]!=="?"?`?${n}`:n}var dr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>j(jS),providedIn:"root"})}return n})(),_0=new Z(""),jS=(()=>{class n extends dr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+zn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+zn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+zn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(Po),me(_0,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ko=(()=>{class n{_subject=new dt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bL(LS(VS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+zn(r))}normalize(t){return n.stripTrailingSlash(CL(this._basePath,VS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=zn;static joinWithSlash=sh;static stripTrailingSlash=LS;static \u0275fac=function(r){return new(r||n)(me(dr))};static \u0275prov=te({token:n,factory:()=>wL(),providedIn:"root"})}return n})();function wL(){return new ko(me(dr))}function CL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VS(n){return n.replace(/\/index.html$/,"")}function bL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var C0=(()=>{class n extends dr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=sh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+zn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+zn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(Po),me(_0,8))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();var qt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(qt||{}),$e=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})($e||{}),cn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(cn||{}),Vr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function HS(n){return gn(n)[at.LocaleId]}function $S(n,e,t){let r=gn(n),i=[r[at.DayPeriodsFormat],r[at.DayPeriodsStandalone]],o=On(i,e);return On(o,t)}function GS(n,e,t){let r=gn(n),i=[r[at.DaysFormat],r[at.DaysStandalone]],o=On(i,e);return On(o,t)}function qS(n,e,t){let r=gn(n),i=[r[at.MonthsFormat],r[at.MonthsStandalone]],o=On(i,e);return On(o,t)}function zS(n,e){let r=gn(n)[at.Eras];return On(r,e)}function Au(n,e){let t=gn(n);return On(t[at.DateFormat],e)}function Su(n,e){let t=gn(n);return On(t[at.TimeFormat],e)}function Tu(n,e){let r=gn(n)[at.DateTimeFormat];return On(r,e)}function xu(n,e){let t=gn(n),r=t[at.NumberSymbols][e];if(typeof r>"u"){if(e===Vr.CurrencyDecimal)return t[at.NumberSymbols][Vr.Decimal];if(e===Vr.CurrencyGroup)return t[at.NumberSymbols][Vr.Group]}return r}function WS(n){if(!n[at.ExtraData])throw new W(2303,!1)}function KS(n){let e=gn(n);return WS(e),(e[at.ExtraData][2]||[]).map(r=>typeof r=="string"?E0(r):[E0(r[0]),E0(r[1])])}function QS(n,e,t){let r=gn(n);WS(r);let i=[r[at.ExtraData][0],r[at.ExtraData][1]],o=On(i,e)||[];return On(o,t)||[]}function On(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new W(2304,!1)}function E0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var DL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ah={},AL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function YS(n,e,t,r){let i=kL(n);e=Lr(t,e)||e;let s=[],a;for(;e;)if(a=AL.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=JS(r,c),i=PL(i,r));let l="";return s.forEach(d=>{let h=NL(d);l+=h?h(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function fh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Lr(n,e){let t=HS(n);if(ah[t]??={},ah[t][e])return ah[t][e];let r="";switch(e){case"shortDate":r=Au(n,cn.Short);break;case"mediumDate":r=Au(n,cn.Medium);break;case"longDate":r=Au(n,cn.Long);break;case"fullDate":r=Au(n,cn.Full);break;case"shortTime":r=Su(n,cn.Short);break;case"mediumTime":r=Su(n,cn.Medium);break;case"longTime":r=Su(n,cn.Long);break;case"fullTime":r=Su(n,cn.Full);break;case"short":let i=Lr(n,"shortTime"),o=Lr(n,"shortDate");r=ch(Tu(n,cn.Short),[i,o]);break;case"medium":let s=Lr(n,"mediumTime"),a=Lr(n,"mediumDate");r=ch(Tu(n,cn.Medium),[s,a]);break;case"long":let c=Lr(n,"longTime"),l=Lr(n,"longDate");r=ch(Tu(n,cn.Long),[c,l]);break;case"full":let d=Lr(n,"fullTime"),h=Lr(n,"fullDate");r=ch(Tu(n,cn.Full),[d,h]);break}return r&&(ah[t][e]=r),r}function ch(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Wn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function SL(n,e){return Wn(n,3).substring(0,e)}function yt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=TL(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return SL(a,e);let c=xu(s,Vr.MinusSign);return Wn(a,e,c,r,i)}}function TL(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new W(2301,!1)}}function ze(n,e,t=qt.Format,r=!1){return function(i,o){return xL(i,o,n,e,t,r)}}function xL(n,e,t,r,i,o){switch(t){case 2:return qS(e,i,r)[n.getMonth()];case 1:return GS(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=KS(e),d=QS(e,i,r),h=l.findIndex(m=>{if(Array.isArray(m)){let[y,C]=m,N=s>=y.hours&&a>=y.minutes,P=s<C.hours||s===C.hours&&a<C.minutes;if(y.hours<C.hours){if(N&&P)return!0}else if(N||P)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return $S(e,i,r)[s<12?0:1];case 3:return zS(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new W(2302,!1)}}function uh(n){return function(e,t,r){let i=-1*r,o=xu(t,Vr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Wn(s,2,o)+Wn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Wn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Wn(s,2,o)+":"+Wn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Wn(s,2,o)+":"+Wn(Math.abs(i%60),2,o);default:throw new W(2310,!1)}}}var ML=0,dh=4;function RL(n){let e=fh(n,ML,1).getDay();return fh(n,0,1+(e<=dh?dh:dh+7)-e)}function ZS(n){let e=n.getDay(),t=e===0?-3:dh-e;return fh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function I0(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=ZS(t),s=RL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Wn(i,n,xu(r,Vr.MinusSign))}}function lh(n,e=!1){return function(t,r){let o=ZS(t).getFullYear();return Wn(o,n,xu(r,Vr.MinusSign),e)}}var w0={};function NL(n){if(w0[n])return w0[n];let e;switch(n){case"G":case"GG":case"GGG":e=ze(3,$e.Abbreviated);break;case"GGGG":e=ze(3,$e.Wide);break;case"GGGGG":e=ze(3,$e.Narrow);break;case"y":e=yt(0,1,0,!1,!0);break;case"yy":e=yt(0,2,0,!0,!0);break;case"yyy":e=yt(0,3,0,!1,!0);break;case"yyyy":e=yt(0,4,0,!1,!0);break;case"Y":e=lh(1);break;case"YY":e=lh(2,!0);break;case"YYY":e=lh(3);break;case"YYYY":e=lh(4);break;case"M":case"L":e=yt(1,1,1);break;case"MM":case"LL":e=yt(1,2,1);break;case"MMM":e=ze(2,$e.Abbreviated);break;case"MMMM":e=ze(2,$e.Wide);break;case"MMMMM":e=ze(2,$e.Narrow);break;case"LLL":e=ze(2,$e.Abbreviated,qt.Standalone);break;case"LLLL":e=ze(2,$e.Wide,qt.Standalone);break;case"LLLLL":e=ze(2,$e.Narrow,qt.Standalone);break;case"w":e=I0(1);break;case"ww":e=I0(2);break;case"W":e=I0(1,!0);break;case"d":e=yt(2,1);break;case"dd":e=yt(2,2);break;case"c":case"cc":e=yt(7,1);break;case"ccc":e=ze(1,$e.Abbreviated,qt.Standalone);break;case"cccc":e=ze(1,$e.Wide,qt.Standalone);break;case"ccccc":e=ze(1,$e.Narrow,qt.Standalone);break;case"cccccc":e=ze(1,$e.Short,qt.Standalone);break;case"E":case"EE":case"EEE":e=ze(1,$e.Abbreviated);break;case"EEEE":e=ze(1,$e.Wide);break;case"EEEEE":e=ze(1,$e.Narrow);break;case"EEEEEE":e=ze(1,$e.Short);break;case"a":case"aa":case"aaa":e=ze(0,$e.Abbreviated);break;case"aaaa":e=ze(0,$e.Wide);break;case"aaaaa":e=ze(0,$e.Narrow);break;case"b":case"bb":case"bbb":e=ze(0,$e.Abbreviated,qt.Standalone,!0);break;case"bbbb":e=ze(0,$e.Wide,qt.Standalone,!0);break;case"bbbbb":e=ze(0,$e.Narrow,qt.Standalone,!0);break;case"B":case"BB":case"BBB":e=ze(0,$e.Abbreviated,qt.Format,!0);break;case"BBBB":e=ze(0,$e.Wide,qt.Format,!0);break;case"BBBBB":e=ze(0,$e.Narrow,qt.Format,!0);break;case"h":e=yt(3,1,-12);break;case"hh":e=yt(3,2,-12);break;case"H":e=yt(3,1);break;case"HH":e=yt(3,2);break;case"m":e=yt(4,1);break;case"mm":e=yt(4,2);break;case"s":e=yt(5,1);break;case"ss":e=yt(5,2);break;case"S":e=yt(6,1);break;case"SS":e=yt(6,2);break;case"SSS":e=yt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=uh(0);break;case"ZZZZZ":e=uh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=uh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=uh(2);break;default:return null}return w0[n]=e,e}function JS(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function OL(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function PL(n,e,t){let i=n.getTimezoneOffset(),o=JS(e,i);return OL(n,-1*(o-i))}function kL(n){if(US(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return fh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(DL))return FL(r)}let e=new Date(n);if(!US(e))throw new W(2311,!1);return e}function FL(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function US(n){return n instanceof Date&&!isNaN(n.valueOf())}var b0=(()=>{class n{_viewContainer;_context=new hh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ce(Ci),Ce(bo))};static \u0275dir=tn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),hh=class{$implicit=null;ngIf=null};function BS(n,e){if(n&&!n.createEmbeddedView)throw new W(2020,!1)}function LL(n,e){return new W(2100,!1)}var VL="mediumDate",XS=new Z(""),eT=new Z(""),Mu=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??VL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return YS(t,s,o||this.locale,a)}catch(s){throw LL(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ce(Cu,16),Ce(XS,24),Ce(eT,24))};static \u0275pipe=t0({name:"date",type:n,pure:!0})}return n})();var un=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fr({type:n});static \u0275inj=ir({})}return n})();function D0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ru=class{};var tT="browser";var Nu=class{_doc;constructor(e){this._doc=e}manager},ph=(()=>{class n extends Nu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),yh=new Z(""),M0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof ph));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof ph);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(yh),me(fn))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),S0="ng-app-id";function nT(n){for(let e of n)e.remove()}function rT(n,e){let t=e.createElement("style");return t.textContent=n,t}function BL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${S0}="${e}"],link[${S0}="${e}"]`);if(i)for(let o of i)o.removeAttribute(S0),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function x0(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var R0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,BL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,rT);r?.forEach(i=>this.addUsage(i,this.external,x0))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(nT(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])nT(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,rT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,x0(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(St),me(Uf),me(Hf,8),me(gu))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),T0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},N0=/%COMP%/g;var oT="%COMP%",HL=`_nghost-${oT}`,$L=`_ngcontent-${oT}`,GL=!0,qL=new Z("",{factory:()=>GL});function zL(n){return $L.replace(N0,n)}function WL(n){return HL.replace(N0,n)}function sT(n,e){return e.map(t=>t.replace(N0,n))}var O0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new Ou(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof gh?i.applyToHost(t):i instanceof Pu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.tracingService;switch(r.encapsulation){case qn.Emulated:o=new gh(c,l,r,this.appId,d,s,a,h);break;case qn.ShadowDom:return new mh(c,t,r,s,a,this.nonce,h,l);case qn.ExperimentalIsolatedShadowDom:return new mh(c,t,r,s,a,this.nonce,h);default:o=new Pu(c,l,r,d,s,a,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(M0),me(R0),me(Uf),me(qL),me(St),me(fn),me(Hf),me(yu,8))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),Ou=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(T0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(iT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=T0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=T0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(lr.DashCase|lr.Important)?e.style.setProperty(t,r,i&lr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Nn().getGlobalEventTarget(this.doc,e),!e))throw new W(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function iT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var mh=class extends Ou{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=sT(r.id,l);for(let h of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=h,this.shadowRoot.appendChild(m)}let d=r.getExternalStyles?.();if(d)for(let h of d){let m=x0(h,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Pu=class extends Ou{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?sT(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Co.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gh=class extends Pu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=zL(l),this.hostAttr=WL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vh=class n extends Du{supportsDOMEvents=!0;static makeCurrent(){v0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=KL();return t==null?null:QL(t)}resetBaseElement(){ku=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return D0(document.cookie,e)}},ku=null;function KL(){return ku=ku||document.head.querySelector("base"),ku?ku.getAttribute("href"):null}function QL(n){return new URL(n,document.baseURI).pathname}var YL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),aT=["alt","control","meta","shift"],ZL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cT=(()=>{class n extends Nu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aT.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=ZL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aT.forEach(s=>{if(s!==i){let a=JL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();async function P0(n,e,t){let r=L({rootComponent:n},XL(e,t));return PS(r)}function XL(n,e){return{platformRef:e?.platformRef,appProviders:[...iV,...n?.providers??[]],platformProviders:rV}}function eV(){vh.makeCurrent()}function tV(){return new Tr}function nV(){return Pv(document),document}var rV=[{provide:gu,useValue:tT},{provide:Bf,useValue:eV,multi:!0},{provide:St,useFactory:nV}];var iV=[{provide:Zc,useValue:"root"},{provide:Tr,useFactory:tV},{provide:yh,useClass:ph,multi:!0},{provide:yh,useClass:cT,multi:!0},O0,R0,M0,{provide:Do,useExisting:O0},{provide:Ru,useClass:YL},[]];var uT=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var he="primary",Wu=Symbol("RouteTitle"),j0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Vo(n){return new j0(n)}function k0(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(i[0]===":")t[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function vT(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},l=n.slice(0,r.length);return k0(r,l,c)?{consumed:l,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!k0(o,n.slice(0,o.length),a)||!k0(s,n.slice(n.length-s.length),a)?null:{consumed:n,posParams:a}}function bh(n){return new Promise((e,t)=>{n.pipe(br()).subscribe({next:r=>e(r),error:r=>t(r)})})}function sV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fr(n[t],e[t]))return!1;return!0}function fr(n,e){let t=n?U0(n):void 0,r=e?U0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!_T(n[i],e[i]))return!1;return!0}function U0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _T(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function aV(n){return n.length>0?n[n.length-1]:null}function Bo(n){return Fd(n)?n:Di(n)?nt(Promise.resolve(n)):Ie(n)}function ET(n){return Fd(n)?bh(n):Promise.resolve(n)}var cV={exact:wT,subset:CT},IT={exact:uV,subset:lV,ignored:()=>!0};function e_(n,e,t){let r=n instanceof vn?n:e.parseUrl(n);return tt(()=>B0(e.lastSuccessfulNavigation()?.finalUrl??new vn,r,t))}function B0(n,e,t){return cV[t.paths](n.root,e.root,t.matrixParams)&&IT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uV(n,e){return fr(n,e)}function wT(n,e,t){if(!Fo(n.segments,e.segments)||!Ih(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!wT(n.children[r],e.children[r],t))return!1;return!0}function lV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_T(n[t],e[t]))}function CT(n,e,t){return bT(n,e,e.segments,t)}function bT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fo(i,t)||e.hasChildren()||!Ih(i,t,r))}else if(n.segments.length===t.length){if(!Fo(n.segments,t)||!Ih(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!CT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Fo(n.segments,i)||!Ih(n.segments,i,r)||!n.children[he]?!1:bT(n.children[he],e,o,r)}}function Ih(n,e,t){return e.every((r,i)=>IT[t](n[i].parameters,r.parameters))}var vn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vo(this.queryParams),this._queryParamMap}toString(){return hV.serialize(this)}},Pe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wh(this)}},Ti=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Vo(this.parameters),this._parameterMap}toString(){return AT(this)}};function dV(n,e){return Fo(n,e)&&n.every((t,r)=>fr(t.parameters,e[r].parameters))}function Fo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function fV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var Ku=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>new xi,providedIn:"root"})}return n})(),xi=class{parse(e){let t=new $0(e);return new vn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fu(e.root,!0)}`,r=gV(e.queryParams),i=typeof e.fragment=="string"?`#${pV(e.fragment)}`:"";return`${t}${r}${i}`}},hV=new xi;function wh(n){return n.segments.map(e=>AT(e)).join("/")}function Fu(n,e){if(!n.hasChildren())return wh(n);if(e){let t=n.children[he]?Fu(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${Fu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=fV(n,(r,i)=>i===he?[Fu(n.children[he],!1)]:[`${i}:${Fu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${wh(n)}/${t[0]}`:`${wh(n)}/(${t.join("//")})`}}function DT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _h(n){return DT(n).replace(/%3B/gi,";")}function pV(n){return encodeURI(n)}function H0(n){return DT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ch(n){return decodeURIComponent(n)}function lT(n){return Ch(n.replace(/\+/g,"%20"))}function AT(n){return`${H0(n.path)}${mV(n.parameters)}`}function mV(n){return Object.entries(n).map(([e,t])=>`;${H0(e)}=${H0(t)}`).join("")}function gV(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${_h(t)}=${_h(i)}`).join("&"):`${_h(t)}=${_h(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var yV=/^[^\/()?;#]+/;function F0(n){let e=n.match(yV);return e?e[0]:""}var vV=/^[^\/()?;=#]+/;function _V(n){let e=n.match(vV);return e?e[0]:""}var EV=/^[^=?&#]+/;function IV(n){let e=n.match(EV);return e?e[0]:""}var wV=/^[^&#]+/;function CV(n){let e=n.match(wV);return e?e[0]:""}var $0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(e=0){if(e>50)throw new W(4010,!1);if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0,e));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1,e)),(t.length>0||Object.keys(r).length>0)&&(i[he]=new Pe(t,r)),i}parseSegment(){let e=F0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Ti(Ch(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_V(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=F0(this.remaining);i&&(r=i,this.capture(r))}e[Ch(t)]=Ch(r)}parseQueryParam(e){let t=IV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=CV(this.remaining);s&&(r=s,this.capture(r))}let i=lT(t),o=lT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e,t){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=F0(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new W(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);let a=this.parseChildren(t+1);r[s??he]=Object.keys(a).length===1&&a[he]?a[he]:new Pe([],a),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function ST(n){return n.segments.length>0?new Pe([],{[he]:n}):n}function TT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=TT(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Pe(n.segments,e);return bV(t)}function bV(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Pe(n.segments.concat(e.segments),e.children)}return n}function Mi(n){return n instanceof vn}function xT(n,e,t=null,r=null,i=new xi){let o=MT(n);return RT(o,e,t,r,i)}function MT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Pe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=ST(r);return e??i}function RT(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return L0(o,o,o,t,r,i);let s=DV(e);if(s.toRoot())return L0(o,o,new Pe([],{}),t,r,i);let a=AV(s,o,n),c=a.processChildren?Vu(a.segmentGroup,a.index,s.commands):OT(a.segmentGroup,a.index,s.commands);return L0(o,a.segmentGroup,c,t,r,i)}function Dh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bu(n){return typeof n=="object"&&n!=null&&n.outlets}function dT(n,e,t){n||="\u0275";let r=new vn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function L0(n,e,t,r,i,o){let s={};for(let[l,d]of Object.entries(r??{}))s[l]=Array.isArray(d)?d.map(h=>dT(l,h,o)):dT(l,d,o);let a;n===e?a=t:a=NT(n,e,t);let c=ST(TT(a));return new vn(c,s,i)}function NT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=NT(o,e,t)}),new Pe(n.segments,r)}var Ah=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dh(r[0]))throw new W(4003,!1);let i=r.find(Bu);if(i&&i!==aV(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DV(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ah(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ah(t,e,r)}var ca=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function AV(n,e,t){if(n.isAbsolute)return new ca(e,!0,0);if(!t)return new ca(e,!1,NaN);if(t.parent===null)return new ca(t,!0,0);let r=Dh(n.commands[0])?0:1,i=t.segments.length-1+r;return SV(t,i,n.numberOfDoubleDots)}function SV(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new ca(r,!1,i-o)}function TV(n){return Bu(n[0])?n[0].outlets:{[he]:n}}function OT(n,e,t){if(n??=new Pe([],{}),n.segments.length===0&&n.hasChildren())return Vu(n,e,t);let r=xV(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Pe(n.segments.slice(0,r.pathIndex),{});return o.children[he]=new Pe(n.segments.slice(r.pathIndex),n.children),Vu(o,0,i)}else return r.match&&i.length===0?new Pe(n.segments,{}):r.match&&!n.hasChildren()?G0(n,e,t):r.match?Vu(n,0,i):G0(n,e,t)}function Vu(n,e,t){if(t.length===0)return new Pe(n.segments,{});{let r=TV(t),i={};if(Object.keys(r).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=Vu(n.children[he],e,t);return new Pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=OT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Pe(n.segments,i)}}function xV(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Bu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!hT(c,l,s))return o;r+=2}else{if(!hT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function G0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Bu(o)){let c=MV(o.outlets);return new Pe(r,c)}if(i===0&&Dh(t[0])){let c=n.segments[e];r.push(new Ti(c.path,fT(t[0]))),i++;continue}let s=Bu(o)?o.outlets[he]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Dh(a)?(r.push(new Ti(s,fT(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new Pe(r,{})}function MV(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=G0(new Pe([],{}),0,r))}),e}function fT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hT(n,e,t){return n==t.path&&fr(e,t.parameters)}var ju="imperative",Tt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Tt||{}),_n=class{id;url;constructor(e,t){this.id=e,this.url=t}},jo=class extends _n{type=Tt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends _n{urlAfterRedirects;type=Tt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(zt||{}),Hu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Hu||{}),Pn=class extends _n{reason;code;type=Tt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function PT(n){return n instanceof Pn&&(n.code===zt.Redirect||n.code===zt.SupersededByNewNavigation)}var Ur=class extends _n{reason;code;type=Tt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Uo=class extends _n{error;target;type=Tt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},la=class extends _n{urlAfterRedirects;state;type=Tt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class extends _n{urlAfterRedirects;state;type=Tt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Th=class extends _n{urlAfterRedirects;state;shouldActivate;type=Tt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xh=class extends _n{urlAfterRedirects;state;type=Tt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mh=class extends _n{urlAfterRedirects;state;type=Tt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rh=class{route;type=Tt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Nh=class{route;type=Tt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Oh=class{snapshot;type=Tt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ph=class{snapshot;type=Tt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kh=class{snapshot;type=Tt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fh=class{snapshot;type=Tt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var da=class{},fa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function RV(n){return!(n instanceof da)&&!(n instanceof fa)}var Lh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ma(this.rootInjector)}},ma=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Lh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(pt))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=q0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=q0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=z0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return z0(e,this._root).map(t=>t.value)}};function q0(n,e){if(n===e.value)return e;for(let t of e.children){let r=q0(n,t);if(r)return r}return null}function z0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=z0(n,t);if(r.length)return r.unshift(e),r}return[]}var yn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function aa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var $u=class extends Vh{snapshot;constructor(e,t){super(e),this.snapshot=t,t_(this,e)}toString(){return this.snapshot.toString()}};function kT(n,e){let t=NV(n,e),r=new Ot([new Ti("",{})]),i=new Ot({}),o=new Ot({}),s=new Ot({}),a=new Ot(""),c=new Br(r,i,s,a,o,he,n,t.root);return c.snapshot=t.root,new $u(new yn(c,[]),t)}function NV(n,e){let t={},r={},i={},s=new Lo([],t,i,"",r,he,n,null,{},e);return new Gu("",new yn(s,[]))}var Br=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ye(l=>l[Wu]))??Ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ye(e=>Vo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ye(e=>Vo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&LT(i)&&(r.resolve[Wu]=i.title),r}var Lo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Wu]}constructor(e,t,r,i,o,s,a,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l,this._environmentInjector=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gu=class extends Vh{url;constructor(e,t){super(t),this.url=e,t_(this,t)}toString(){return FT(this._root)}};function t_(n,e){e.value._routerState=n,e.children.forEach(t=>t_(n,t))}function FT(n){let e=n.children.length>0?` { ${n.children.map(FT).join(", ")} } `:"";return`${n.value}${e}`}function V0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),fr(e.params,t.params)||n.paramsSubject.next(t.params),sV(e.url,t.url)||n.urlSubject.next(t.url),fr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function W0(n,e){let t=fr(n.params,e.params)&&dV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||W0(n.parent,e.parent))}function LT(n){return typeof n.title=="string"||n.title===null}var VT=new Z(""),Qu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new ht;deactivateEvents=new ht;attachEvents=new ht;detachEvents=new ht;routerOutletData=OS();parentContexts=j(ma);location=j(Ci);changeDetector=j(Oo);inputBinder=j($h,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new K0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[kr]})}return n})(),K0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Br?this.route:e===ma?this.childContexts:e===VT?this.outletData:this.parent.get(e,t)}},$h=new Z("");var n_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=en({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&se(0,"router-outlet")},dependencies:[Qu],encapsulation:2})}return n})();function r_(n){let e=n.children&&n.children.map(r_),t=e?re(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=n_),t}function OV(n,e,t){let r=qu(n,e._root,t?t._root:void 0);return new $u(r,e)}function qu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=PV(n,e,t);return new yn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qu(n,a)),s}}let r=kV(e.value),i=e.children.map(o=>qu(n,o));return new yn(r,i)}}function PV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qu(n,r,i);return qu(n,r)})}function kV(n){return new Br(new Ot(n.url),new Ot(n.params),new Ot(n.queryParams),new Ot(n.fragment),new Ot(n.data),n.outlet,n.component,n)}var ha=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jT="ngNavigationCancelingError";function Uh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Mi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UT(!1,zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function UT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jT]=!0,t.cancellationCode=e,t}function FV(n){return BT(n)&&Mi(n.url)}function BT(n){return!!n&&n[jT]}var Q0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),V0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=aa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=aa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=aa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=aa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ph(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(V0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),V0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Bh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ua=class{component;route;constructor(e,t){this.component=e,this.route=t}};function LV(n,e,t){let r=n._root,i=e?e._root:null;return Lu(r,i,t,[r.value])}function VV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ga(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ry(n)?n:e.get(n):r}function Lu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=aa(e);return n.children.forEach(s=>{jV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Uu(a,t.getContext(s),i)),i}function jV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=UV(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Bh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Lu(n,e,a?a.children:null,r,i):Lu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ua(a.outlet.component,s))}else s&&Uu(e,a,i),i.canActivateChecks.push(new Bh(r)),o.component?Lu(n,null,a?a.children:null,r,i):Lu(n,null,t,r,i);return i}function UV(n,e,t){if(typeof t=="function")return Ht(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!Fo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fo(n.url,e.url)||!fr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!W0(n,e)||!fr(n.queryParams,e.queryParams);default:return!W0(n,e)}}function Uu(n,e,t){let r=aa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Uu(s,e.children.getContext(o),t):Uu(s,null,t):Uu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ua(e.outlet.component,i)):t.canDeactivateChecks.push(new ua(null,i)):t.canDeactivateChecks.push(new ua(null,i))}function Yu(n){return typeof n=="function"}function BV(n){return typeof n=="boolean"}function HV(n){return n&&Yu(n.canLoad)}function $V(n){return n&&Yu(n.canActivate)}function GV(n){return n&&Yu(n.canActivateChild)}function qV(n){return n&&Yu(n.canDeactivate)}function zV(n){return n&&Yu(n.canMatch)}function HT(n){return n instanceof ao||n?.name==="EmptyError"}var Eh=Symbol("INITIAL_VALUE");function pa(){return Dr(n=>Vg(n.map(e=>e.pipe(Cr(1),Bg(Eh)))).pipe(Ye(e=>{for(let t of e)if(t!==!0){if(t===Eh)return Eh;if(t===!1||WV(t))return t}return!0}),tr(e=>e!==Eh),Cr(1)))}function WV(n){return Mi(n)||n instanceof ha}function $T(n){return n.aborted?Ie(void 0).pipe(Cr(1)):new Me(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function GT(n){return Bc($T(n))}function KV(n){return Bt(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?Ie(re(L({},e),{guardsResult:!0})):QV(o,t,r).pipe(Bt(s=>s&&BV(s)?YV(t,i,n):Ie(s)),Ye(s=>re(L({},e),{guardsResult:s})))})}function QV(n,e,t){return nt(n).pipe(Bt(r=>t4(r.component,r.route,t,e)),br(r=>r!==!0,!0))}function YV(n,e,t){return nt(e).pipe(Uc(r=>Ls(JV(r.route.parent,t),ZV(r.route,t),e4(n,r.path),XV(n,r.route))),br(r=>r!==!0,!0))}function ZV(n,e){return n!==null&&e&&e(new kh(n)),Ie(!0)}function JV(n,e){return n!==null&&e&&e(new Oh(n)),Ie(!0)}function XV(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Ie(!0);let r=t.map(i=>jc(()=>{let o=e._environmentInjector,s=ga(i,o),a=$V(s)?s.canActivate(e,n):Ht(o,()=>s(e,n));return Bo(a).pipe(br())}));return Ie(r).pipe(pa())}function e4(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>VV(o)).filter(o=>o!==null).map(o=>jc(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,l=ga(a,c),d=GV(l)?l.canActivateChild(t,n):Ht(c,()=>l(t,n));return Bo(d).pipe(br())});return Ie(s).pipe(pa())}));return Ie(i).pipe(pa())}function t4(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Ie(!0);let o=i.map(s=>{let a=e._environmentInjector,c=ga(s,a),l=qV(c)?c.canDeactivate(n,e,t,r):Ht(a,()=>c(n,e,t,r));return Bo(l).pipe(br())});return Ie(o).pipe(pa())}function n4(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return Ie(!0);let s=o.map(a=>{let c=ga(a,n),l=HV(c)?c.canLoad(e,t):Ht(n,()=>c(e,t)),d=Bo(l);return i?d.pipe(GT(i)):d});return Ie(s).pipe(pa(),qT(r))}function qT(n){return Pg(nr(e=>{if(typeof e!="boolean")throw Uh(n,e)}),Ye(e=>e===!0))}function r4(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return Ie(!0);let s=o.map(a=>{let c=ga(a,n),l=zV(c)?c.canMatch(e,t):Ht(n,()=>c(e,t));return Bo(l).pipe(GT(i))});return Ie(s).pipe(pa(),qT(r))}var jr=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},zu=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function i4(n){throw new W(4e3,!1)}function o4(n){throw UT(!1,zt.GuardRejected)}var Y0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[he])throw i4(`${e.redirectTo}`);i=i.children[he]}}async applyRedirectCommands(e,t,r,i,o){let s=await s4(t,i,o);if(s instanceof vn)throw new zu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new zu(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new vn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function s4(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:d,title:h,paramMap:m,queryParamMap:y}=e;return bh(Bo(Ht(t,()=>r({params:l,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h,paramMap:m,queryParamMap:y}))))}function a4(n,e){return n.providers&&!n._injector&&(n._injector=Eu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kn(n){return n.outlet||he}function c4(n,e){let t=n.filter(r=>Kn(r)===e);return t.push(...n.filter(r=>Kn(r)!==e)),t}var Z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function u4(n,e,t,r,i,o){let s=zT(n,e,t);return s.matched?(r=a4(e,r),r4(r,e,t,i,o).pipe(Ye(a=>a===!0?s:L({},Z0)))):Ie(s)}function zT(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Z0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||vT)(t,n,e);if(!i)return L({},Z0);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function pT(n,e,t,r){return t.length>0&&f4(n,t,r)?{segmentGroup:new Pe(e,d4(r,new Pe(t,n.children))),slicedSegments:[]}:t.length===0&&h4(n,t,r)?{segmentGroup:new Pe(n.segments,l4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pe(n.segments,n.children),slicedSegments:t}}function l4(n,e,t,r){let i={};for(let o of t)if(Gh(n,e,o)&&!r[Kn(o)]){let s=new Pe([],{});i[Kn(o)]=s}return L(L({},r),i)}function d4(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&Kn(r)!==he){let i=new Pe([],{});t[Kn(r)]=i}return t}function f4(n,e,t){return t.some(r=>Gh(n,e,r)&&Kn(r)!==he)}function h4(n,e,t){return t.some(r=>Gh(n,e,r))}function Gh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function p4(n,e,t){return e.length===0&&!n.children[t]}var J0=class{};async function m4(n,e,t,r,i,o,s="emptyOnly",a){return new X0(n,e,t,r,i,s,o,a).recognize()}var g4=31,X0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Y0(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}async recognize(){let e=pT(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new yn(r,t),o=new Gu("",i),s=xT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new Lo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,he,t),rootSnapshot:t}}catch(r){if(r instanceof zu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof jr?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof yn?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],d=c4(t,c),h=await this.processSegmentGroup(e,d,l,c,i);s.push(...h)}let a=WT(s);return y4(a),a}async processSegment(e,t,r,i,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a)}catch(l){if(l instanceof jr||HT(l))continue;throw l}if(p4(r,i,o))return new J0;throw new jr(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,c){if(Kn(r)!==s&&(s===he||!Gh(i,o,r)))throw new jr(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c);throw new jr(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:m}=zT(t,i,o);if(!c)throw new jr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>g4&&(this.allowRedirects=!1));let y=new Lo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,mT(i),Kn(i),i.component??i._loadedComponent??null,i,gT(i),e),C=jh(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let N=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,y,e),P=await this.applyRedirects.lineralizeSegments(i,N);return this.processSegment(e,r,t,P.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await bh(u4(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new jr(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:m}=a,y=new Lo(h,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,mT(r),Kn(r),r.component??r._loadedComponent??null,r,gT(r),e),C=jh(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let{segmentGroup:N,slicedSegments:P}=pT(t,h,m,c);if(P.length===0&&N.hasChildren()){let Q=await this.processChildren(l,c,N,y);return new yn(y,Q)}if(c.length===0&&P.length===0)return new yn(y,[]);let U=Kn(r)===o,J=await this.processSegment(l,c,N,P,U?he:o,!0,y);return new yn(y,J instanceof yn?[J]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let o=t._loadedNgModuleFactory;return o&&!t._loadedInjector&&(t._loadedInjector=o.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await bh(n4(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,t._loadedNgModuleFactory=o.factory,o}throw o4(t)}return{routes:[],injector:e}}};function y4(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function v4(n){let e=n.value.routeConfig;return e&&e.path===""}function WT(n){let e=[],t=new Set;for(let r of n){if(!v4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=WT(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!t.has(r))}function mT(n){return n.data||{}}function gT(n){return n.resolve||{}}function _4(n,e,t,r,i,o,s){return Bt(async a=>{let{state:c,tree:l}=await m4(n,e,t,r,a.extractedUrl,i,o,s);return re(L({},a),{targetSnapshot:c,urlAfterRedirects:l})})}function E4(n){return Bt(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Ie(e);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of KT(a))o.add(c);let s=0;return nt(o).pipe(Uc(a=>i.has(a)?I4(a,t,n):(a.data=jh(a,a.parent,n).resolve,Ie(void 0))),nr(()=>s++),Ud(1),Bt(a=>s===o.size?Ie(e):Pt))})}function KT(n){let e=n.children.map(t=>KT(t)).flat();return[n,...e]}function I4(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!LT(r)&&(i[Wu]=r.title),jc(()=>(n.data=jh(n,n.parent,t).resolve,w4(i,n,e).pipe(Ye(o=>(n._resolvedData=o,n.data=L(L({},n.data),o),null)))))}function w4(n,e,t){let r=U0(n);if(r.length===0)return Ie({});let i={};return nt(r).pipe(Bt(o=>C4(n[o],e,t).pipe(br(),nr(s=>{if(s instanceof ha)throw Uh(new xi,s);i[o]=s}))),Ud(1),Ye(()=>i),Vs(o=>HT(o)?Pt:Lg(o)))}function C4(n,e,t){let r=e._environmentInjector,i=ga(n,r),o=i.resolve?i.resolve(e,t):Ht(r,()=>i(e,t));return Bo(o)}function yT(n){return Dr(e=>{let t=n(e);return t?nt(t).pipe(Ye(()=>e)):Ie(e)})}var i_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[Wu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>j(QT),providedIn:"root"})}return n})(),QT=(()=>{class n extends i_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(uT))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ya=new Z("",{factory:()=>({})}),Zu=new Z(""),YT=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(f0);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await ET(Ht(t,()=>r.loadComponent())),s=await XT(JT(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await ZT(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function ZT(n,e,t,r){let i=await ET(Ht(t,()=>n.loadChildren())),o=await XT(JT(i)),s;o instanceof Jf||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,c,l=!1,d;return Array.isArray(s)?(c=s,l=!0):(a=s.create(t).injector,d=s,c=a.get(Zu,[],{optional:!0,self:!0}).flat()),{routes:c.map(r_),injector:a,factory:d}}function b4(n){return n&&typeof n=="object"&&"default"in n}function JT(n){return b4(n)?n.default:n}async function XT(n){return n}var qh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>j(D4),providedIn:"root"})}return n})(),D4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e1=new Z("");var A4=()=>{},t1=new Z(""),n1=(()=>{class n{currentNavigation=Ne(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ne(null);events=new dt;transitionAbortWithErrorSubject=new dt;configLoader=j(YT);environmentInjector=j(pt);destroyRef=j(Or);urlSerializer=j(Ku);rootContexts=j(ma);location=j(ko);inputBindingEnabled=j($h,{optional:!0})!==null;titleStrategy=j(i_);options=j(ya,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(qh);createViewTransition=j(e1,{optional:!0});navigationErrorHandler=j(t1,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Rh(i)),r=i=>this.events.next(new Nh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Ct(()=>{this.transitions?.next(re(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Ot(null),this.transitions.pipe(tr(r=>r!==null),Dr(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return Ie(r).pipe(Dr(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Pt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?re(L({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload")return this.events.next(new Ur(a.id,this.urlSerializer.serialize(a.rawUrl),"",Hu.IgnoredSameUrlNavigation)),a.resolve(!1),Pt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Ie(a).pipe(Dr(h=>(this.events.next(new jo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Pt:Promise.resolve(h))),_4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),nr(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=h.urlAfterRedirects,y));let m=new la(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:h,extractedUrl:m,source:y,restoredState:C,extras:N}=a,P=new jo(h,this.urlSerializer.serialize(m),y,C);this.events.next(P);let U=kT(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=re(L({},a),{targetSnapshot:U,urlAfterRedirects:m,extras:re(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(J=>(J.finalUrl=m,J)),Ie(r)}else return this.events.next(new Ur(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Hu.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Pt}),Ye(a=>{let c=new Sh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=re(L({},a),{guards:LV(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),KV(a=>this.events.next(a)),Dr(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Uh(this.urlSerializer,a.guardsResult);let c=new Th(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return Pt;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",zt.GuardRejected),Pt;if(a.guards.canActivateChecks.length===0)return Ie(a);let l=new xh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(l),!s())return Pt;let d=!1;return Ie(a).pipe(E4(this.paramsInheritanceStrategy),nr({next:()=>{d=!0;let h=new Mh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(h)},complete:()=>{d||this.cancelNavigationTransition(a,"",zt.NoDataFromResolver)}}))}),yT(a=>{let c=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let m=d._environmentInjector;h.push(this.configLoader.loadComponent(m,d.routeConfig).then(y=>{d.component=y}))}for(let m of d.children)h.push(...c(m));return h},l=c(a.targetSnapshot.root);return l.length===0?Ie(a):nt(Promise.all(l).then(()=>a))}),yT(()=>this.afterPreactivation()),Dr(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?nt(l).pipe(Ye(()=>r)):Ie(r)}),Cr(1),Ye(a=>{let c=OV(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=re(L({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),this.events.next(new da),s()&&(new Q0(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=A4,l)),this.lastSuccessfulNavigation.set(Ct(this.currentNavigation)),this.events.next(new Qn(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Bc($T(o.signal).pipe(tr(()=>!i&&!r.targetRouterState),nr(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",zt.Aborted)}))),nr({complete:()=>{i=!0}}),Bc(this.transitionAbortWithErrorSubject.pipe(nr(a=>{throw a}))),Ug(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Vs(a=>{if(i=!0,this.destroyed)return r.resolve(!1),Pt;if(BT(a))this.events.next(new Pn(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),FV(a)?this.events.next(new fa(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Uo(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=Ht(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof ha){let{message:d,cancellationCode:h}=Uh(this.urlSerializer,l);this.events.next(new Pn(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new fa(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Pt}))}))}cancelNavigationTransition(t,r,i){let o=new Pn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ct(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S4(n){return n!==ju}var r1=new Z("");var i1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>j(T4),providedIn:"root"})}return n})(),Hh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},T4=(()=>{class n extends Hh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=To(n)))(i||n)}})();static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o_=(()=>{class n{urlSerializer=j(Ku);options=j(ya,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(ko);urlHandlingStrategy=j(qh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof vn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=kT(null,j(pt));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>j(x4),providedIn:"root"})}return n})(),x4=(()=>{class n extends o_{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof jo?this.updateStateMemento():t instanceof Ur?this.commitTransition(r):t instanceof la?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof da?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Pn&&!PT(t)?this.restoreHistory(r):t instanceof Uo?this.restoreHistory(r,!0):t instanceof Qn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=To(n)))(i||n)}})();static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function s_(n,e){n.events.pipe(tr(t=>t instanceof Qn||t instanceof Pn||t instanceof Uo||t instanceof Ur),Ye(t=>t instanceof Qn||t instanceof Ur?0:(t instanceof Pn?t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation:!1)?2:1),tr(t=>t!==2),Cr(1)).subscribe(()=>{e()})}var a_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},va=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(n0);stateManager=j(o_);options=j(ya,{optional:!0})||{};pendingTasks=j(_i);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(n1);urlSerializer=j(Ku);location=j(ko);urlHandlingStrategy=j(qh);injector=j(pt);_events=new dt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(i1);injectorCleanup=j(r1,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Zu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j($h,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Nt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ct(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pn&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof fa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=L({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||S4(i.source)},s);this.scheduleNavigation(a,ju,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}RV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ju,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=L({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get($n)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ct(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(r_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let m=i?i.snapshot:this.routerState.snapshot.root;h=MT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return RT(h,t,d,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Mi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ju,null,r)}navigate(t,r={skipLocationChange:!1}){return M4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Bs(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},a_):r===!1?i=L({},c_):i=r,Mi(t))return B0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return B0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,m)=>{a=h,c=m});let d=this.pendingTasks.add();return s_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(Promise.reject.bind(Promise))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new W(4008,!1)}var _a=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ne(null);get href(){return Ct(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new dt;applicationErrorHandler=j($n);options=j(ya,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(j(new oh("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof Qn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Mi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Mi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ce(va),Ce(Br),mu("tabindex"),Ce(wi),Ce(Rn),Ce(dr))};static \u0275dir=tn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ee("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ai("href",i.reactiveHref(),Lv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",sa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",sa],replaceUrl:[2,"replaceUrl","replaceUrl",sa],routerLink:"routerLink"},features:[kr]})}return n})(),u_=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ht;link=j(_a,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof Qn&&this.update()})}ngAfterContentInit(){Ie(this.links.changes,Ie(null)).pipe(Fs()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=nt(t).pipe(Fs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=N4(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact??!1?L({},a_):L({},c_);return i=>{let o=i.urlTree;return o?Ct(e_(o,t,r)):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Ce(va),Ce(Rn),Ce(wi),Ce(Oo))};static \u0275dir=tn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&th(o,_a,5),r&2){let s;c0(s=u0())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[kr]})}return n})();function N4(n){return!!n.paths}var O4=new Z("");function l_(n,...e){return Yc([{provide:Zu,multi:!0,useValue:n},[],{provide:Br,useFactory:P4},{provide:eh,multi:!0,useFactory:F4},e.map(t=>t.\u0275providers)])}function P4(){return j(va).routerState.root}function k4(n,e){return{\u0275kind:n,\u0275providers:e}}function F4(){let n=j(Dn);return e=>{let t=n.get(xo);if(e!==t.components[0])return;let r=n.get(va),i=n.get(L4);n.get(V4)===1&&r.initialNavigation(),n.get(j4,null,{optional:!0})?.setUpPreloading(),n.get(O4,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var L4=new Z("",{factory:()=>new dt}),V4=new Z("",{factory:()=>1});var j4=new Z("");function d_(){return k4(6,[{provide:dr,useClass:C0}])}var Ea=class n{constructor(){this.notifications=Ne([]);this.unreadCount=Ne(0);this.audioContext=null;this.add("Bem-vindo","Sistema iniciado com sucesso.","SUCCESS")}add(e,t,r="INFO"){let i={id:crypto.randomUUID(),title:e,message:t,time:new Date,read:!1,type:r};this.notifications.update(o=>[i,...o]),this.updateUnreadCount(),this.playSound(r)}markAsRead(e){this.notifications.update(t=>t.map(r=>r.id===e?re(L({},r),{read:!0}):r)),this.updateUnreadCount()}markAllAsRead(){this.notifications.update(e=>e.map(t=>re(L({},t),{read:!0}))),this.updateUnreadCount()}clearAll(){this.notifications.set([]),this.updateUnreadCount()}updateUnreadCount(){this.unreadCount.set(this.notifications().filter(e=>!e.read).length)}playSound(e="INFO"){try{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&this.audioContext.resume();let t=this.audioContext.createGain();t.connect(this.audioContext.destination),t.gain.value=.6;let r=this.audioContext.currentTime,i=(o,s,a,c)=>{if(!this.audioContext)return;let l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(o,s);let d=this.audioContext.createOscillator();d.type="triangle",d.frequency.setValueAtTime(o*2.01,s);let h=this.audioContext.createGain(),m=this.audioContext.createGain();l.connect(h),d.connect(m),h.connect(t),m.connect(t),h.gain.setValueAtTime(0,s),h.gain.linearRampToValueAtTime(c,s+.02),h.gain.exponentialRampToValueAtTime(.001,s+a),m.gain.setValueAtTime(0,s),m.gain.linearRampToValueAtTime(c*.3,s+.01),m.gain.exponentialRampToValueAtTime(.001,s+.3),l.start(s),d.start(s),l.stop(s+a+.1),d.stop(s+.4)};e==="SUCCESS"?(i(783.99,r,1.5,.4),i(1046.5,r+.09,2,.4)):e==="ERROR"?(i(349.23,r,.5,.4),i(311.13,r+.15,.7,.4)):e==="WARNING"?(i(523.25,r,.6,.3),i(523.25,r+.18,.9,.4)):(i(880,r,1.2,.3),i(1108.73,r+.1,1.5,.3))}catch(t){console.error("Error playing notification sound",t)}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}};var U4=()=>({exact:!1}),B4=(n,e)=>e.label,H4=(n,e)=>e.link,$4=(n,e)=>e.id;function G4(n,e){if(n&1&&(_(0,"a",11,0),X(),_(2,"svg",39),se(3,"path"),w(),ye(),_(4,"span",40),D(5),w()()),n&2){let t=e.$implicit,r=rh(1);Ft("routerLink",t.link)("routerLinkActiveOptions",d0(6,U4)),R(2),Ee("text-primary",!r.isActive),R(),Ai("d",t.icon),R(2),fe(t.label)}}function q4(n,e){n&1&&se(0,"span",33)}function z4(n,e){n&1&&(_(0,"div",54),X(),_(1,"svg",64),se(2,"path",65),w()())}function W4(n,e){n&1&&(_(0,"div",55),X(),_(1,"svg",64),se(2,"path",66),w()())}function K4(n,e){n&1&&(_(0,"div",56),X(),_(1,"svg",64),se(2,"path",67),w()())}function Q4(n,e){n&1&&(_(0,"div",57),X(),_(1,"svg",64),se(2,"path",68),w()())}function Y4(n,e){n&1&&se(0,"div",63)}function Z4(n,e){if(n&1&&(_(0,"div",51)(1,"div",52)(2,"div",53),be(3,z4,3,0,"div",54)(4,W4,3,0,"div",55)(5,K4,3,0,"div",56)(6,Q4,3,0,"div",57),w(),_(7,"div",58)(8,"div",59)(9,"h4",60),D(10),w(),_(11,"span",61),D(12),Ro(13,"date"),w()(),_(14,"p",62),D(15),w()()(),be(16,Y4,1,0,"div",63),w()),n&2){let t=e.$implicit;Ee("bg-blue-50",!t.read),R(3),De(t.type==="SUCCESS"?3:t.type==="WARNING"?4:t.type==="ERROR"?5:6),R(6),Ee("text-primary",!t.read),R(),fe(t.title),R(2),fe(No(13,9,t.time,"HH:mm")),R(3),fe(t.message),R(),De(t.read?-1:16)}}function J4(n,e){n&1&&(_(0,"div",50),X(),_(1,"svg",69),se(2,"path",35),w(),ye(),_(3,"p",70),D(4,"Nenhuma notifica\xE7\xE3o."),w()())}function X4(n,e){if(n&1){let t=st();_(0,"div",41),ee("click",function(){ae(t);let i=q();return ce(i.closeNotifications())}),w(),_(1,"div",42)(2,"div",43)(3,"h3",44),D(4,"Notifica\xE7\xF5es"),w(),_(5,"div",45)(6,"button",46),ee("click",function(){ae(t);let i=q();return ce(i.notificationService.markAllAsRead())}),D(7,"Marcar lidas"),w(),_(8,"button",47),ee("click",function(){ae(t);let i=q();return ce(i.notificationService.clearAll())}),D(9,"Limpar"),w()()(),_(10,"div",48),mt(11,Z4,17,12,"div",49,$4),be(13,J4,5,0,"div",50),w()()}if(n&2){let t=q();R(11),gt(t.notificationService.notifications()),R(2),De(t.notificationService.notifications().length===0?13:-1)}}function e3(n,e){if(n&1&&(_(0,"a",71,1)(2,"div",72),X(),_(3,"svg",73),se(4,"path"),w()(),ye(),_(5,"span",74),D(6),w()()),n&2){let t=e.$implicit,r=rh(1);Ee("bg-white\\/10",r.isActive),Ft("routerLink",t.link),R(2),Ee("-translate-y-1",r.isActive)("text-white",r.isActive),R(2),Ai("d",t.icon),R(),Ee("text-secondary",r.isActive),R(),fe(t.shortLabel)}}var zh=class n{constructor(){this.notificationService=j(Ea);this.menuOpen=!1;this.notificationsOpen=!1;this.sidebarItems=[{label:"Dashboard",shortLabel:"Dash",icon:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z",link:"/dashboard"},{label:"Movimenta\xE7\xF5es",shortLabel:"Movim.",icon:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",link:"/movements"},{label:"Estoque",shortLabel:"Estoque",icon:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z",link:"/inventory"},{label:"Pedidos",shortLabel:"Pedidos",icon:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z",link:"/orders"},{label:"Relat\xF3rios",shortLabel:"Relat.",icon:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z",link:"/reports"}]}toggleMenu(){this.menuOpen=!this.menuOpen}toggleNotifications(){this.notificationsOpen=!this.notificationsOpen,this.notificationsOpen}closeNotifications(){this.notificationsOpen=!1}onBackdropClick(){this.notificationsOpen&&this.closeNotifications()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=en({type:n,selectors:[["app-root"]],decls:52,vars:2,consts:[["rlaDesktop","routerLinkActive"],["rlaMobile","routerLinkActive"],[1,"flex","h-[100dvh]","bg-background","text-dark","overflow-hidden","font-sans","selection:bg-primary","selection:text-white"],[1,"hidden","md:flex","relative","z-50","w-72","bg-sidebar","text-white","flex-col","py-6","pl-0"],[1,"flex","items-center","gap-3","px-8","mb-10"],[1,"w-10","h-10","rounded","bg-primary","flex","items-center","justify-center","text-white","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","3","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 8.25l-7.5 7.5-7.5-7.5"],[1,"block","text-lg","font-bold","leading-none","tracking-tight","text-white"],[1,"text-[10px]","text-gray-400","font-medium","tracking-[0.2em]","uppercase"],[1,"flex-1","space-y-1","overflow-y-auto","custom-scrollbar"],["routerLinkActive","bg-white/5 text-white border-l-4 border-secondary",1,"flex","items-center","gap-4","px-8","py-4","text-gray-400","hover:text-white","hover:bg-white/5","transition-all","group","font-medium","text-sm","border-l-4","border-transparent",3,"routerLink","routerLinkActiveOptions"],[1,"px-6","mt-4"],[1,"bg-white/5","rounded","p-4","border","border-white/10"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-secondary","text-sidebar","flex","items-center","justify-center","font-bold","text-sm"],[1,"overflow-hidden"],[1,"text-sm","font-bold","truncate","text-white"],[1,"text-xs","text-gray-400","truncate"],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","relative"],[1,"h-16","md:h-20","flex","items-center","justify-between","px-4","md:px-8","z-10","bg-white","border-b","border-gray-100","shrink-0","shadow-sm"],[1,"md:hidden","flex","items-center","gap-2"],[1,"w-8","h-8","rounded","bg-primary","text-white","flex","items-center","justify-center","shadow-lg"],["fill","none","viewBox","0 0 24 24","stroke-width","3","stroke","currentColor",1,"w-4","h-4"],[1,"font-bold","text-sidebar","tracking-tight"],[1,"hidden","md:flex","flex-col"],[1,"text-xl","font-bold","text-dark"],[1,"text-xs","text-muted"],[1,"flex","items-center","gap-6","ml-auto","relative"],[1,"hidden","md:flex","items-center","gap-2","px-3","py-1.5","bg-gray-50","rounded-full","border","border-gray-200"],[1,"w-2","h-2","rounded-full","bg-green-500","animate-pulse"],[1,"text-xs","font-bold","text-muted"],[1,"relative","bg-white","p-2","rounded-lg","border","border-gray-200","text-muted","hover:text-primary","transition-colors","focus:outline-none","focus:ring-2","focus:ring-primary/20",3,"click"],[1,"absolute","top-1.5","right-2","w-2.5","h-2.5","bg-secondary","rounded-full","border-2","border-white","animate-bounce"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"flex-1","overflow-x-hidden","overflow-y-auto","px-4","md:px-8","pb-28","md:pb-8","custom-scrollbar","bg-background"],[1,"md:hidden","fixed","bottom-0","left-0","right-0","bg-sidebar","z-50","flex","justify-around","items-center","px-2","py-3","border-t-4","border-secondary","shadow-2xl","safe-area-pb"],["routerLinkActive","text-white",1,"flex","flex-col","items-center","justify-center","gap-1","text-gray-500","transition-all","duration-300","relative","w-16","group","p-2","rounded-lg",3,"routerLink","bg-white\\/10"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","group-hover:text-secondary","transition-colors"],[1,"tracking-wide"],[1,"fixed","inset-0","z-40","bg-transparent","cursor-default",3,"click"],[1,"absolute","top-full","right-0","mt-3","w-80","md:w-96","bg-white","rounded-2xl","shadow-2xl","border","border-gray-100","z-50","overflow-hidden","animate-enter","origin-top-right"],[1,"p-4","border-b","border-gray-100","flex","justify-between","items-center","bg-gray-50/50"],[1,"font-bold","text-dark","text-sm"],[1,"flex","gap-2"],[1,"text-[10px]","font-bold","text-primary","hover:underline",3,"click"],[1,"text-[10px]","font-bold","text-muted","hover:text-danger",3,"click"],[1,"max-h-[400px]","overflow-y-auto","custom-scrollbar"],[1,"p-4","border-b","border-gray-50","hover:bg-gray-50","transition-colors","relative","group",3,"bg-blue-50"],[1,"p-8","text-center","text-muted"],[1,"p-4","border-b","border-gray-50","hover:bg-gray-50","transition-colors","relative","group"],[1,"flex","gap-3"],[1,"shrink-0","mt-1"],[1,"w-8","h-8","rounded-full","bg-green-100","text-green-600","flex","items-center","justify-center"],[1,"w-8","h-8","rounded-full","bg-yellow-100","text-yellow-600","flex","items-center","justify-center"],[1,"w-8","h-8","rounded-full","bg-red-100","text-red-600","flex","items-center","justify-center"],[1,"w-8","h-8","rounded-full","bg-blue-100","text-blue-600","flex","items-center","justify-center"],[1,"flex-1"],[1,"flex","justify-between","items-start"],[1,"text-sm","font-bold","text-dark"],[1,"text-[10px]","text-muted"],[1,"text-xs","text-muted","mt-1","leading-relaxed"],[1,"absolute","top-4","right-2","w-2","h-2","rounded-full","bg-primary"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","text-gray-200","mb-2"],[1,"text-xs","font-medium"],["routerLinkActive","text-white",1,"flex","flex-col","items-center","justify-center","gap-1","text-gray-500","transition-all","duration-300","relative","w-16","group","p-2","rounded-lg",3,"routerLink"],[1,"relative","transition-all","duration-300","transform"],["fill","currentColor","stroke","none","viewBox","0 0 24 24",1,"w-6","h-6"],[1,"text-[10px]","font-medium"]],template:function(t,r){t&1&&(_(0,"div",2)(1,"aside",3)(2,"div",4)(3,"div",5),X(),_(4,"svg",6),se(5,"path",7),w()(),ye(),_(6,"div")(7,"span",8),D(8,"EPI SERRA SUL"),w(),_(9,"span",9),D(10,"Sistema"),w()()(),_(11,"nav",10),mt(12,G4,6,7,"a",11,B4),w(),_(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),D(18," AD "),w(),_(19,"div",16)(20,"p",17),D(21,"Administrador"),w(),_(22,"p",18),D(23,"Serra Sul"),w()()()()()(),_(24,"div",19)(25,"header",20)(26,"div",21)(27,"div",22),X(),_(28,"svg",23),se(29,"path",7),w()(),ye(),_(30,"span",24),D(31,"SERRA SUL"),w()(),_(32,"div",25)(33,"h1",26),D(34,"Portal de Gest\xE3o"),w(),_(35,"p",27),D(36,"Controle de EPIs e Uniformes"),w()(),_(37,"div",28)(38,"div",29),se(39,"span",30),_(40,"span",31),D(41,"Sistema Online"),w()(),_(42,"button",32),ee("click",function(){return r.toggleNotifications()}),be(43,q4,1,0,"span",33),X(),_(44,"svg",34),se(45,"path",35),w()(),be(46,X4,14,1),w()(),ye(),_(47,"main",36),se(48,"router-outlet"),w(),_(49,"nav",37),mt(50,e3,7,11,"a",38,H4),w()()()),t&2&&(R(12),gt(r.sidebarItems),R(31),De(r.notificationService.unreadCount()>0?43:-1),R(3),De(r.notificationsOpen?46:-1),R(4),gt(r.sidebarItems))},dependencies:[Qu,_a,u_,un,Mu],encapsulation:2})}};var o1=()=>{};var a1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},t3=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},c1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=o>>2,h=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(m=64)),r.push(t[d],t[h],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(a1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):t3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let h=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw new f_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),h!==64){let C=l<<6&192|h;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},f_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},n3=function(n){let e=a1(n);return c1.encodeByteArray(e,!0)},h_=function(n){return n3(n).replace(/\./g,"")},u1=function(n){try{return c1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function p_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var r3=()=>p_().__FIREBASE_DEFAULTS__,i3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},o3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&u1(n[1]);return e&&JSON.parse(e)},l1=()=>{try{return o1()||r3()||i3()||o3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var d1=()=>l1()?.config;var Wh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function m_(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f1(n){return(await fetch(n,{credentials:"include"})).ok}function Xu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h1(){let n=l1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g_(){return!h1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y_(){return!h1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Kh(){try{return typeof indexedDB=="object"}catch{return!1}}function p1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var s3="FirebaseError",Hr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=s3,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ju.prototype.create)}},Ju=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?a3(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Hr(i,a,r)}};function a3(n,e){return n.replace(c3,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var c3=/\{\$([^}]+)}/g;function Ho(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(s1(o)&&s1(s)){if(!Ho(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function s1(n){return n!==null&&typeof n=="object"}var Eee=14400*1e3;function kn(n){return n&&n._delegate?n._delegate:n}var $r=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $o="[DEFAULT]";var v_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l3(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u3(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function u3(n){return n===$o?void 0:n}function l3(n){return n.instantiationMode==="EAGER"}var Qh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new v_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var f3=[],Se=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Se||{}),h3={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},p3=Se.INFO,m3={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},g3=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=m3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ia=class{constructor(e){this.name=e,this._logLevel=p3,this._logHandler=g3,this._userLogHandler=null,f3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var y3=(n,e)=>e.some(t=>n instanceof t),m1,g1;function v3(){return m1||(m1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _3(){return g1||(g1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var y1=new WeakMap,E_=new WeakMap,v1=new WeakMap,__=new WeakMap,w_=new WeakMap;function E3(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(hr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&y1.set(t,n)}).catch(()=>{}),w_.set(e,n),e}function I3(n){if(E_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});E_.set(n,e)}var I_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return E_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||v1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _1(n){I_=n(I_)}function w3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Yh(this),e,...t);return v1.set(r,e.sort?e.sort():[e]),hr(r)}:_3().includes(n)?function(...e){return n.apply(Yh(this),e),hr(y1.get(this))}:function(...e){return hr(n.apply(Yh(this),e))}}function C3(n){return typeof n=="function"?w3(n):(n instanceof IDBTransaction&&I3(n),y3(n,v3())?new Proxy(n,I_):n)}function hr(n){if(n instanceof IDBRequest)return E3(n);if(__.has(n))return __.get(n);let e=C3(n);return e!==n&&(__.set(n,e),w_.set(e,n)),e}var Yh=n=>w_.get(n);function I1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=hr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(hr(s.result),c.oldVersion,c.newVersion,hr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var b3=["get","getKey","getAll","getAllKeys","count"],D3=["put","add","delete","clear"],C_=new Map;function E1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(C_.get(e))return C_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=D3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||b3.includes(t)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return C_.set(e,o),o}_1(n=>re(L({},n),{get:(e,t,r)=>E1(e,t)||n.get(e,t,r),has:(e,t)=>!!E1(e,t)||n.has(e,t)}));var D_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(A3(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function A3(n){return n.getComponent()?.type==="VERSION"}var A_="@firebase/app",w1="0.14.8";var Gr=new Ia("@firebase/app"),S3="@firebase/app-compat",T3="@firebase/analytics-compat",x3="@firebase/analytics",M3="@firebase/app-check-compat",R3="@firebase/app-check",N3="@firebase/auth",O3="@firebase/auth-compat",P3="@firebase/database",k3="@firebase/data-connect",F3="@firebase/database-compat",L3="@firebase/functions",V3="@firebase/functions-compat",j3="@firebase/installations",U3="@firebase/installations-compat",B3="@firebase/messaging",H3="@firebase/messaging-compat",$3="@firebase/performance",G3="@firebase/performance-compat",q3="@firebase/remote-config",z3="@firebase/remote-config-compat",W3="@firebase/storage",K3="@firebase/storage-compat",Q3="@firebase/firestore",Y3="@firebase/ai",Z3="@firebase/firestore-compat",J3="firebase",X3="12.9.0";var ej="[DEFAULT]",tj={[A_]:"fire-core",[S3]:"fire-core-compat",[x3]:"fire-analytics",[T3]:"fire-analytics-compat",[R3]:"fire-app-check",[M3]:"fire-app-check-compat",[N3]:"fire-auth",[O3]:"fire-auth-compat",[P3]:"fire-rtdb",[k3]:"fire-data-connect",[F3]:"fire-rtdb-compat",[L3]:"fire-fn",[V3]:"fire-fn-compat",[j3]:"fire-iid",[U3]:"fire-iid-compat",[B3]:"fire-fcm",[H3]:"fire-fcm-compat",[$3]:"fire-perf",[G3]:"fire-perf-compat",[q3]:"fire-rc",[z3]:"fire-rc-compat",[W3]:"fire-gcs",[K3]:"fire-gcs-compat",[Q3]:"fire-fst",[Z3]:"fire-fst-compat",[Y3]:"fire-vertex","fire-js":"fire-js",[J3]:"fire-js-all"};var S_=new Map,nj=new Map,T_=new Map;function C1(n,e){try{n.container.addComponent(e)}catch(t){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function el(n){let e=n.name;if(T_.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;T_.set(e,n);for(let t of S_.values())C1(t,n);for(let t of nj.values())C1(t,n);return!0}function S1(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function T1(n){return n==null?!1:n.settings!==void 0}var rj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new Ju("app","Firebase",rj);var x_=class{constructor(e,t,r){this._isDeleted=!1,this._options=L({},e),this._config=L({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}};var x1=X3;function M1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=L({name:ej,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Go.create("bad-app-name",{appName:String(i)});if(t||(t=d1()),!t)throw Go.create("no-options");let o=S_.get(i);if(o){if(Ho(t,o.options)&&Ho(r,o.config))return o;throw Go.create("duplicate-app",{appName:i})}let s=new Qh(i);for(let c of T_.values())s.addComponent(c);let a=new x_(t,r,s);return S_.set(i,a),a}function Ri(n,e,t){let r=tj[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(s.join(" "));return}el(new $r(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var ij="firebase-heartbeat-database",oj=1,tl="firebase-heartbeat-store",b_=null;function R1(){return b_||(b_=I1(ij,oj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Go.create("idb-open",{originalErrorMessage:n.message})})),b_}async function sj(n){try{let t=(await R1()).transaction(tl),r=await t.objectStore(tl).get(N1(n));return await t.done,r}catch(e){if(e instanceof Hr)Gr.warn(e.message);else{let t=Go.create("idb-get",{originalErrorMessage:e?.message});Gr.warn(t.message)}}}async function b1(n,e){try{let r=(await R1()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,N1(n)),await r.done}catch(t){if(t instanceof Hr)Gr.warn(t.message);else{let r=Go.create("idb-set",{originalErrorMessage:t?.message});Gr.warn(r.message)}}}function N1(n){return`${n.name}!${n.options.appId}`}var aj=1024,cj=30,M_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new R_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=D1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>cj){let i=lj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=D1(),{heartbeatsToSend:t,unsentEntries:r}=uj(this._heartbeatsCache.heartbeats),i=h_(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Gr.warn(e),""}}};function D1(){return new Date().toISOString().substring(0,10)}function uj(n,e=aj){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),A1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),A1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var R_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kh()?p1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await sj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return b1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return b1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function A1(n){return h_(JSON.stringify({version:2,heartbeats:n})).length}function lj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dj(n){el(new $r("platform-logger",e=>new D_(e),"PRIVATE")),el(new $r("heartbeat",e=>new M_(e),"PRIVATE")),Ri(A_,w1,n),Ri(A_,w1,"esm2020"),Ri("fire-js","")}dj("");var fj="firebase",hj="12.9.0";Ri(fj,hj,"app");var O1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P1={};var qr,N_;(function(){var n;function e(b,v){function I(){}I.prototype=v.prototype,b.F=v.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(S,A,x){for(var E=Array(arguments.length-2),on=2;on<arguments.length;on++)E[on-2]=arguments[on];return v.prototype[A].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,I){I||(I=0);let S=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)S[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;A<16;++A)S[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=b.g[0],I=b.g[1],A=b.g[2];let x=b.g[3],E;E=v+(x^I&(A^x))+S[0]+3614090360&4294967295,v=I+(E<<7&4294967295|E>>>25),E=x+(A^v&(I^A))+S[1]+3905402710&4294967295,x=v+(E<<12&4294967295|E>>>20),E=A+(I^x&(v^I))+S[2]+606105819&4294967295,A=x+(E<<17&4294967295|E>>>15),E=I+(v^A&(x^v))+S[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(x^I&(A^x))+S[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=x+(A^v&(I^A))+S[5]+1200080426&4294967295,x=v+(E<<12&4294967295|E>>>20),E=A+(I^x&(v^I))+S[6]+2821735955&4294967295,A=x+(E<<17&4294967295|E>>>15),E=I+(v^A&(x^v))+S[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(x^I&(A^x))+S[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=x+(A^v&(I^A))+S[9]+2336552879&4294967295,x=v+(E<<12&4294967295|E>>>20),E=A+(I^x&(v^I))+S[10]+4294925233&4294967295,A=x+(E<<17&4294967295|E>>>15),E=I+(v^A&(x^v))+S[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(x^I&(A^x))+S[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=x+(A^v&(I^A))+S[13]+4254626195&4294967295,x=v+(E<<12&4294967295|E>>>20),E=A+(I^x&(v^I))+S[14]+2792965006&4294967295,A=x+(E<<17&4294967295|E>>>15),E=I+(v^A&(x^v))+S[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(A^x&(I^A))+S[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=x+(I^A&(v^I))+S[6]+3225465664&4294967295,x=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(x^v))+S[11]+643717713&4294967295,A=x+(E<<14&4294967295|E>>>18),E=I+(x^v&(A^x))+S[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^x&(I^A))+S[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=x+(I^A&(v^I))+S[10]+38016083&4294967295,x=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(x^v))+S[15]+3634488961&4294967295,A=x+(E<<14&4294967295|E>>>18),E=I+(x^v&(A^x))+S[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^x&(I^A))+S[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=x+(I^A&(v^I))+S[14]+3275163606&4294967295,x=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(x^v))+S[3]+4107603335&4294967295,A=x+(E<<14&4294967295|E>>>18),E=I+(x^v&(A^x))+S[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^x&(I^A))+S[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=x+(I^A&(v^I))+S[2]+4243563512&4294967295,x=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(x^v))+S[7]+1735328473&4294967295,A=x+(E<<14&4294967295|E>>>18),E=I+(x^v&(A^x))+S[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(I^A^x)+S[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=x+(v^I^A)+S[8]+2272392833&4294967295,x=v+(E<<11&4294967295|E>>>21),E=A+(x^v^I)+S[11]+1839030562&4294967295,A=x+(E<<16&4294967295|E>>>16),E=I+(A^x^v)+S[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^x)+S[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=x+(v^I^A)+S[4]+1272893353&4294967295,x=v+(E<<11&4294967295|E>>>21),E=A+(x^v^I)+S[7]+4139469664&4294967295,A=x+(E<<16&4294967295|E>>>16),E=I+(A^x^v)+S[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^x)+S[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=x+(v^I^A)+S[0]+3936430074&4294967295,x=v+(E<<11&4294967295|E>>>21),E=A+(x^v^I)+S[3]+3572445317&4294967295,A=x+(E<<16&4294967295|E>>>16),E=I+(A^x^v)+S[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^x)+S[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=x+(v^I^A)+S[12]+3873151461&4294967295,x=v+(E<<11&4294967295|E>>>21),E=A+(x^v^I)+S[15]+530742520&4294967295,A=x+(E<<16&4294967295|E>>>16),E=I+(A^x^v)+S[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(A^(I|~x))+S[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=x+(I^(v|~A))+S[7]+1126891415&4294967295,x=v+(E<<10&4294967295|E>>>22),E=A+(v^(x|~I))+S[14]+2878612391&4294967295,A=x+(E<<15&4294967295|E>>>17),E=I+(x^(A|~v))+S[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~x))+S[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=x+(I^(v|~A))+S[3]+2399980690&4294967295,x=v+(E<<10&4294967295|E>>>22),E=A+(v^(x|~I))+S[10]+4293915773&4294967295,A=x+(E<<15&4294967295|E>>>17),E=I+(x^(A|~v))+S[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~x))+S[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=x+(I^(v|~A))+S[15]+4264355552&4294967295,x=v+(E<<10&4294967295|E>>>22),E=A+(v^(x|~I))+S[6]+2734768916&4294967295,A=x+(E<<15&4294967295|E>>>17),E=I+(x^(A|~v))+S[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~x))+S[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=x+(I^(v|~A))+S[11]+3174756917&4294967295,x=v+(E<<10&4294967295|E>>>22),E=A+(v^(x|~I))+S[2]+718787259&4294967295,A=x+(E<<15&4294967295|E>>>17),E=I+(x^(A|~v))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+x&4294967295}r.prototype.v=function(b,v){v===void 0&&(v=b.length);let I=v-this.blockSize,S=this.C,A=this.h,x=0;for(;x<v;){if(A==0)for(;x<=I;)i(this,b,x),x+=this.blockSize;if(typeof b=="string"){for(;x<v;)if(S[A++]=b.charCodeAt(x++),A==this.blockSize){i(this,S),A=0;break}}else for(;x<v;)if(S[A++]=b[x++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;v=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=v&255,v/=256;for(this.v(b),b=Array(16),v=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)b[v++]=this.g[I]>>>S&255;return b};function o(b,v){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=v(b)}function s(b,v){this.h=v;let I=[],S=!0;for(let A=b.length-1;A>=0;A--){let x=b[A]|0;S&&x==v||(I[A]=x,S=!1)}this.g=I}var a={};function c(b){return-128<=b&&b<128?o(b,function(v){return new s([v|0],v<0?-1:0)}):new s([b|0],b<0?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return h;if(b<0)return P(l(-b));let v=[],I=1;for(let S=0;b>=I;S++)v[S]=b/I|0,I*=4294967296;return new s(v,0)}function d(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return P(d(b.substring(1),v));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=l(Math.pow(v,8)),S=h;for(let x=0;x<b.length;x+=8){var A=Math.min(8,b.length-x);let E=parseInt(b.substring(x,x+A),v);A<8?(A=l(Math.pow(v,A)),S=S.j(A).add(l(E))):(S=S.j(I),S=S.add(l(E)))}return S}var h=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(N(this))return-P(this).m();let b=0,v=1;for(let I=0;I<this.g.length;I++){let S=this.i(I);b+=(S>=0?S:4294967296+S)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(N(this))return"-"+P(this).toString(b);let v=l(Math.pow(b,6));var I=this;let S="";for(;;){let A=Re(I,v).g;I=U(I,A.j(v));let x=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=A,C(I))return x+S;for(;x.length<6;)x="0"+x;S=x+S}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(let v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function N(b){return b.h==-1}n.l=function(b){return b=U(this,b),N(b)?-1:C(b)?0:1};function P(b){let v=b.g.length,I=[];for(let S=0;S<v;S++)I[S]=~b.g[S];return new s(I,~b.h).add(m)}n.abs=function(){return N(this)?P(this):this},n.add=function(b){let v=Math.max(this.g.length,b.g.length),I=[],S=0;for(let A=0;A<=v;A++){let x=S+(this.i(A)&65535)+(b.i(A)&65535),E=(x>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);S=E>>>16,x&=65535,E&=65535,I[A]=E<<16|x}return new s(I,I[I.length-1]&-2147483648?-1:0)};function U(b,v){return b.add(P(v))}n.j=function(b){if(C(this)||C(b))return h;if(N(this))return N(b)?P(this).j(P(b)):P(P(this).j(b));if(N(b))return P(this.j(P(b)));if(this.l(y)<0&&b.l(y)<0)return l(this.m()*b.m());let v=this.g.length+b.g.length,I=[];for(var S=0;S<2*v;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<b.g.length;A++){let x=this.i(S)>>>16,E=this.i(S)&65535,on=b.i(A)>>>16,ti=b.i(A)&65535;I[2*S+2*A]+=E*ti,J(I,2*S+2*A),I[2*S+2*A+1]+=x*ti,J(I,2*S+2*A+1),I[2*S+2*A+1]+=E*on,J(I,2*S+2*A+1),I[2*S+2*A+2]+=x*on,J(I,2*S+2*A+2)}for(b=0;b<v;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=v;b<2*v;b++)I[b]=0;return new s(I,0)};function J(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function Q(b,v){this.g=b,this.h=v}function Re(b,v){if(C(v))throw Error("division by zero");if(C(b))return new Q(h,h);if(N(b))return v=Re(P(b),v),new Q(P(v.g),P(v.h));if(N(v))return v=Re(b,P(v)),new Q(P(v.g),v.h);if(b.g.length>30){if(N(b)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,S=v;S.l(b)<=0;)I=Ue(I),S=Ue(S);var A=xe(I,1),x=xe(S,1);for(S=xe(S,2),I=xe(I,2);!C(S);){var E=x.add(S);E.l(b)<=0&&(A=A.add(I),x=E),S=xe(S,1),I=xe(I,1)}return v=U(b,A.j(v)),new Q(A,v)}for(A=h;b.l(v)>=0;){for(I=Math.max(1,Math.floor(b.m()/v.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),x=l(I),E=x.j(v);N(E)||E.l(b)>0;)I-=S,x=l(I),E=x.j(v);C(x)&&(x=m),A=A.add(x),b=U(b,E)}return new Q(A,b)}n.B=function(b){return Re(this,b).h},n.and=function(b){let v=Math.max(this.g.length,b.g.length),I=[];for(let S=0;S<v;S++)I[S]=this.i(S)&b.i(S);return new s(I,this.h&b.h)},n.or=function(b){let v=Math.max(this.g.length,b.g.length),I=[];for(let S=0;S<v;S++)I[S]=this.i(S)|b.i(S);return new s(I,this.h|b.h)},n.xor=function(b){let v=Math.max(this.g.length,b.g.length),I=[];for(let S=0;S<v;S++)I[S]=this.i(S)^b.i(S);return new s(I,this.h^b.h)};function Ue(b){let v=b.g.length+1,I=[];for(let S=0;S<v;S++)I[S]=b.i(S)<<1|b.i(S-1)>>>31;return new s(I,b.h)}function xe(b,v){let I=v>>5;v%=32;let S=b.g.length-I,A=[];for(let x=0;x<S;x++)A[x]=v>0?b.i(x+I)>>>v|b.i(x+I+1)<<32-v:b.i(x+I);return new s(A,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,N_=P1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,qr=P1.Integer=s}).apply(typeof O1<"u"?O1:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zr={};var O_,pj,wa,P_,nl,Jh,k_,F_,L_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var f=0;f<u.length;++f){var p=u[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var p=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var T=u[g];if(!(T in p))break e;p=p[T]}u=u[u.length-1],g=p[u],f=f(g),f!=g&&f!=null&&e(p,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var p=[],g;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&p.push([g,f[g]]);return p}});var o=o||{},s=this||self;function a(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function c(u,f,p){return u.call.apply(u.bind,arguments)}function l(u,f,p){return l=c,l.apply(null,arguments)}function d(u,f){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function h(u,f){function p(){}p.prototype=f.prototype,u.Z=f.prototype,u.prototype=new p,u.prototype.constructor=u,u.Ob=function(g,T,O){for(var H=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)H[ve-2]=arguments[ve];return f.prototype[T].apply(g,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){let f=u.length;if(f>0){let p=Array(f);for(let g=0;g<f;g++)p[g]=u[g];return p}return[]}function C(u,f){for(let g=1;g<arguments.length;g++){let T=arguments[g];var p=typeof T;if(p=p!="object"?p:T?Array.isArray(T)?"array":p:"null",p=="array"||p=="object"&&typeof T.length=="number"){p=u.length||0;let O=T.length||0;u.length=p+O;for(let H=0;H<O;H++)u[p+H]=T[H]}else u.push(T)}}class N{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function P(u){s.setTimeout(()=>{throw u},0)}function U(){var u=b;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class J{constructor(){this.h=this.g=null}add(f,p){let g=Q.get();g.set(f,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Q=new N(()=>new Re,u=>u.reset());class Re{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,xe=!1,b=new J,v=()=>{let u=Promise.resolve(void 0);Ue=()=>{u.then(I)}};function I(){for(var u;u=U();){try{u.h.call(u.g)}catch(p){P(p)}var f=Q;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}xe=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};s.addEventListener("test",p,f),s.removeEventListener("test",p,f)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function on(u,f){A.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}h(on,A),on.prototype.init=function(u,f){let p=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(p=="mouseover"?f=u.fromElement:p=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&on.Z.h.call(this)},on.prototype.h=function(){on.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ti="closure_listenable_"+(Math.random()*1e6|0),gN=0;function yN(u,f,p,g,T){this.listener=u,this.proxy=null,this.src=f,this.type=p,this.capture=!!g,this.ha=T,this.key=++gN,this.da=this.fa=!1}function Jl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Xl(u,f,p){for(let g in u)f.call(p,u[g],g,u)}function vN(u,f){for(let p in u)f.call(void 0,u[p],p,u)}function Aw(u){let f={};for(let p in u)f[p]=u[p];return f}let Sw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tw(u,f){let p,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(p in g)u[p]=g[p];for(let O=0;O<Sw.length;O++)p=Sw[O],Object.prototype.hasOwnProperty.call(g,p)&&(u[p]=g[p])}}function ed(u){this.src=u,this.g={},this.h=0}ed.prototype.add=function(u,f,p,g,T){let O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);let H=qm(u,f,g,T);return H>-1?(f=u[H],p||(f.fa=!1)):(f=new yN(f,this.src,O,!!g,T),f.fa=p,u.push(f)),f};function Gm(u,f){let p=f.type;if(p in u.g){var g=u.g[p],T=Array.prototype.indexOf.call(g,f,void 0),O;(O=T>=0)&&Array.prototype.splice.call(g,T,1),O&&(Jl(f),u.g[p].length==0&&(delete u.g[p],u.h--))}}function qm(u,f,p,g){for(let T=0;T<u.length;++T){let O=u[T];if(!O.da&&O.listener==f&&O.capture==!!p&&O.ha==g)return T}return-1}var zm="closure_lm_"+(Math.random()*1e6|0),Wm={};function xw(u,f,p,g,T){if(g&&g.once)return Rw(u,f,p,g,T);if(Array.isArray(f)){for(let O=0;O<f.length;O++)xw(u,f[O],p,g,T);return null}return p=Zm(p),u&&u[ti]?u.J(f,p,a(g)?!!g.capture:!!g,T):Mw(u,f,p,!1,g,T)}function Mw(u,f,p,g,T,O){if(!f)throw Error("Invalid event type");let H=a(T)?!!T.capture:!!T,ve=Qm(u);if(ve||(u[zm]=ve=new ed(u)),p=ve.add(f,p,g,H,O),p.proxy)return p;if(g=_N(),p.proxy=g,g.src=u,g.listener=p,u.addEventListener)x||(T=H),T===void 0&&(T=!1),u.addEventListener(f.toString(),g,T);else if(u.attachEvent)u.attachEvent(Ow(f.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function _N(){function u(p){return f.call(u.src,u.listener,p)}let f=EN;return u}function Rw(u,f,p,g,T){if(Array.isArray(f)){for(let O=0;O<f.length;O++)Rw(u,f[O],p,g,T);return null}return p=Zm(p),u&&u[ti]?u.K(f,p,a(g)?!!g.capture:!!g,T):Mw(u,f,p,!0,g,T)}function Nw(u,f,p,g,T){if(Array.isArray(f))for(var O=0;O<f.length;O++)Nw(u,f[O],p,g,T);else g=a(g)?!!g.capture:!!g,p=Zm(p),u&&u[ti]?(u=u.i,O=String(f).toString(),O in u.g&&(f=u.g[O],p=qm(f,p,g,T),p>-1&&(Jl(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete u.g[O],u.h--)))):u&&(u=Qm(u))&&(f=u.g[f.toString()],u=-1,f&&(u=qm(f,p,g,T)),(p=u>-1?f[u]:null)&&Km(p))}function Km(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ti])Gm(f.i,u);else{var p=u.type,g=u.proxy;f.removeEventListener?f.removeEventListener(p,g,u.capture):f.detachEvent?f.detachEvent(Ow(p),g):f.addListener&&f.removeListener&&f.removeListener(g),(p=Qm(f))?(Gm(p,u),p.h==0&&(p.src=null,f[zm]=null)):Jl(u)}}}function Ow(u){return u in Wm?Wm[u]:Wm[u]="on"+u}function EN(u,f){if(u.da)u=!0;else{f=new on(f,this);let p=u.listener,g=u.ha||u.src;u.fa&&Km(u),u=p.call(g,f)}return u}function Qm(u){return u=u[zm],u instanceof ed?u:null}var Ym="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zm(u){return typeof u=="function"?u:(u[Ym]||(u[Ym]=function(f){return u.handleEvent(f)}),u[Ym])}function jt(){S.call(this),this.i=new ed(this),this.M=this,this.G=null}h(jt,S),jt.prototype[ti]=!0,jt.prototype.removeEventListener=function(u,f,p,g){Nw(this,u,f,p,g)};function Zt(u,f){var p,g=u.G;if(g)for(p=[];g;g=g.G)p.push(g);if(u=u.M,g=f.type||f,typeof f=="string")f=new A(f,u);else if(f instanceof A)f.target=f.target||u;else{var T=f;f=new A(g,u),Tw(f,T)}T=!0;let O,H;if(p)for(H=p.length-1;H>=0;H--)O=f.g=p[H],T=td(O,g,!0,f)&&T;if(O=f.g=u,T=td(O,g,!0,f)&&T,T=td(O,g,!1,f)&&T,p)for(H=0;H<p.length;H++)O=f.g=p[H],T=td(O,g,!1,f)&&T}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var u=this.i;for(let f in u.g){let p=u.g[f];for(let g=0;g<p.length;g++)Jl(p[g]);delete u.g[f],u.h--}}this.G=null},jt.prototype.J=function(u,f,p,g){return this.i.add(String(u),f,!1,p,g)},jt.prototype.K=function(u,f,p,g){return this.i.add(String(u),f,!0,p,g)};function td(u,f,p,g){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let T=!0;for(let O=0;O<f.length;++O){let H=f[O];if(H&&!H.da&&H.capture==p){let ve=H.listener,It=H.ha||H.src;H.fa&&Gm(u.i,H),T=ve.call(It,g)!==!1&&T}}return T&&!g.defaultPrevented}function IN(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:s.setTimeout(u,f||0)}function Pw(u){u.g=IN(()=>{u.g=null,u.i&&(u.i=!1,Pw(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class wN extends S{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Pw(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gc(u){S.call(this),this.h=u,this.g={}}h(gc,S);var kw=[];function Fw(u){Xl(u.g,function(f,p){this.g.hasOwnProperty(p)&&Km(f)},u),u.g={}}gc.prototype.N=function(){gc.Z.N.call(this),Fw(this)},gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jm=s.JSON.stringify,CN=s.JSON.parse,bN=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function Lw(){}function Vw(){}var yc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xm(){A.call(this,"d")}h(Xm,A);function eg(){A.call(this,"c")}h(eg,A);var Ji={},jw=null;function nd(){return jw=jw||new jt}Ji.Ia="serverreachability";function Uw(u){A.call(this,Ji.Ia,u)}h(Uw,A);function vc(u){let f=nd();Zt(f,new Uw(f))}Ji.STAT_EVENT="statevent";function Bw(u,f){A.call(this,Ji.STAT_EVENT,u),this.stat=f}h(Bw,A);function Jt(u){let f=nd();Zt(f,new Bw(f,u))}Ji.Ja="timingevent";function Hw(u,f){A.call(this,Ji.Ja,u),this.size=f}h(Hw,A);function _c(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},f)}function Ec(){this.g=!0}Ec.prototype.ua=function(){this.g=!1};function DN(u,f,p,g,T,O){u.info(function(){if(u.g)if(O){var H="",ve=O.split("&");for(let qe=0;qe<ve.length;qe++){var It=ve[qe].split("=");if(It.length>1){let Dt=It[0];It=It[1];let er=Dt.split("_");H=er.length>=2&&er[1]=="type"?H+(Dt+"="+It+"&"):H+(Dt+"=redacted&")}}}else H=null;else H=O;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+f+`
`+p+`
`+H})}function AN(u,f,p,g,T,O,H){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+f+`
`+p+`
`+O+" "+H})}function Ds(u,f,p,g){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+TN(u,p)+(g?" "+g:"")})}function SN(u,f){u.info(function(){return"TIMEOUT: "+f})}Ec.prototype.info=function(){};function TN(u,f){if(!u.g)return f;if(!f)return null;try{let O=JSON.parse(f);if(O){for(u=0;u<O.length;u++)if(Array.isArray(O[u])){var p=O[u];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var T=g[0];if(T!="noop"&&T!="stop"&&T!="close")for(let H=1;H<g.length;H++)g[H]=""}}}}return Jm(O)}catch{return f}}var rd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$w={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gw;function tg(){}h(tg,Lw),tg.prototype.g=function(){return new XMLHttpRequest},Gw=new tg;function Ic(u){return encodeURIComponent(String(u))}function xN(u){var f=1;u=u.split(":");let p=[];for(;f>0&&u.length;)p.push(u.shift()),f--;return u.length&&p.push(u.join(":")),p}function ni(u,f,p,g){this.j=u,this.i=f,this.l=p,this.S=g||1,this.V=new gc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qw}function qw(){this.i=null,this.g="",this.h=!1}var zw={},ng={};function rg(u,f,p){u.M=1,u.A=od(Xn(f)),u.u=p,u.R=!0,Ww(u,null)}function Ww(u,f){u.F=Date.now(),id(u),u.B=Xn(u.A);var p=u.B,g=u.S;Array.isArray(g)||(g=[String(g)]),sC(p.i,"t",g),u.C=0,p=u.j.L,u.h=new qw,u.g=bC(u.j,p?f:null,!u.u),u.P>0&&(u.O=new wN(l(u.Y,u,u.g),u.P)),f=u.V,p=u.g,g=u.ba;var T="readystatechange";Array.isArray(T)||(T&&(kw[0]=T.toString()),T=kw);for(let O=0;O<T.length;O++){let H=xw(p,T[O],g||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=u.J?Aw(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),vc(),DN(u.i,u.v,u.B,u.l,u.S,u.u)}ni.prototype.ba=function(u){u=u.target;let f=this.O;f&&oi(u)==3?f.j():this.Y(u)},ni.prototype.Y=function(u){try{if(u==this.g)e:{let ve=oi(this.g),It=this.g.ya(),qe=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||hC(this.g)))){this.K||ve!=4||It==7||(It==8||qe<=0?vc(3):vc(2)),ig(this);var f=this.g.ca();this.X=f;var p=MN(this);if(this.o=f==200,AN(this.i,this.v,this.B,this.l,this.S,ve,f),this.o){if(this.U&&!this.L){t:{if(this.g){var g,T=this.g;if((g=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var O=g;break t}}O=null}if(u=O)Ds(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,og(this,u);else{this.o=!1,this.m=3,Jt(12),Xi(this),wc(this);break e}}if(this.R){u=!0;let Dt;for(;!this.K&&this.C<p.length;)if(Dt=RN(this,p),Dt==ng){ve==4&&(this.m=4,Jt(14),u=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==zw){this.m=4,Jt(15),Ds(this.i,this.l,p,"[Invalid Chunk]"),u=!1;break}else Ds(this.i,this.l,Dt,null),og(this,Dt);if(Kw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||p.length!=0||this.h.h||(this.m=1,Jt(16),u=!1),this.o=this.o&&u,!u)Ds(this.i,this.l,p,"[Invalid Chunked Response]"),Xi(this),wc(this);else if(p.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),fg(H),H.P=!0,Jt(11))}}else Ds(this.i,this.l,p,null),og(this,p);ve==4&&Xi(this),this.o&&!this.K&&(ve==4?EC(this.j,this):(this.o=!1,id(this)))}else qN(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Xi(this),wc(this)}}}catch{}};function MN(u){if(!Kw(u))return u.g.la();let f=hC(u.g);if(f==="")return"";let p="",g=f.length,T=oi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Xi(u),wc(u),"";u.h.i=new s.TextDecoder}for(let O=0;O<g;O++)u.h.h=!0,p+=u.h.i.decode(f[O],{stream:!(T&&O==g-1)});return f.length=0,u.h.g+=p,u.C=0,u.h.g}function Kw(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function RN(u,f){var p=u.C,g=f.indexOf(`
`,p);return g==-1?ng:(p=Number(f.substring(p,g)),isNaN(p)?zw:(g+=1,g+p>f.length?ng:(f=f.slice(g,g+p),u.C=g+p,f)))}ni.prototype.cancel=function(){this.K=!0,Xi(this)};function id(u){u.T=Date.now()+u.H,Qw(u,u.H)}function Qw(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=_c(l(u.aa,u),f)}function ig(u){u.D&&(s.clearTimeout(u.D),u.D=null)}ni.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(SN(this.i,this.B),this.M!=2&&(vc(),Jt(17)),Xi(this),this.m=2,wc(this)):Qw(this,this.T-u)};function wc(u){u.j.I==0||u.K||EC(u.j,u)}function Xi(u){ig(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,Fw(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function og(u,f){try{var p=u.j;if(p.I!=0&&(p.g==u||sg(p.h,u))){if(!u.L&&sg(p.h,u)&&p.I==3){try{var g=p.Ba.g.parse(f)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<u.F)dd(p),ud(p);else break e;dg(p),Jt(18)}}else p.xa=T[1],0<p.xa-p.K&&T[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=_c(l(p.Va,p),6e3));Jw(p.h)<=1&&p.ta&&(p.ta=void 0)}else to(p,11)}else if((u.L||p.g==u)&&dd(p),!E(f))for(T=p.Ba.g.parse(f),f=0;f<T.length;f++){let qe=T[f],Dt=qe[0];if(!(Dt<=p.K))if(p.K=Dt,qe=qe[1],p.I==2)if(qe[0]=="c"){p.M=qe[1],p.ba=qe[2];let er=qe[3];er!=null&&(p.ka=er,p.j.info("VER="+p.ka));let no=qe[4];no!=null&&(p.za=no,p.j.info("SVER="+p.za));let si=qe[5];si!=null&&typeof si=="number"&&si>0&&(g=1.5*si,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let ai=u.g;if(ai){let hd=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hd){var O=g.h;O.g||hd.indexOf("spdy")==-1&&hd.indexOf("quic")==-1&&hd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ag(O,O.h),O.h=null))}if(g.G){let hg=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;hg&&(g.wa=hg,We(g.J,g.G,hg))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-u.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var H=u;if(g.na=CC(g,g.L?g.ba:null,g.W),H.L){Xw(g.h,H);var ve=H,It=g.O;It&&(ve.H=It),ve.D&&(ig(ve),id(ve)),g.g=H}else vC(g);p.i.length>0&&ld(p)}else qe[0]!="stop"&&qe[0]!="close"||to(p,7);else p.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?to(p,7):lg(p):qe[0]!="noop"&&p.l&&p.l.qa(qe),p.A=0)}}vc(4)}catch{}}var NN=class{constructor(u,f){this.g=u,this.map=f}};function Yw(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Jw(u){return u.h?1:u.g?u.g.size:0}function sg(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function ag(u,f){u.g?u.g.add(f):u.h=f}function Xw(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Yw.prototype.cancel=function(){if(this.i=eC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function eC(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let p of u.g.values())f=f.concat(p.G);return f}return y(u.i)}var tC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ON(u,f){if(u){u=u.split("&");for(let p=0;p<u.length;p++){let g=u[p].indexOf("="),T,O=null;g>=0?(T=u[p].substring(0,g),O=u[p].substring(g+1)):T=u[p],f(T,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ri(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof ri?(this.l=u.l,Cc(this,u.j),this.o=u.o,this.g=u.g,bc(this,u.u),this.h=u.h,cg(this,aC(u.i)),this.m=u.m):u&&(f=String(u).match(tC))?(this.l=!1,Cc(this,f[1]||"",!0),this.o=Dc(f[2]||""),this.g=Dc(f[3]||"",!0),bc(this,f[4]),this.h=Dc(f[5]||"",!0),cg(this,f[6]||"",!0),this.m=Dc(f[7]||"")):(this.l=!1,this.i=new Sc(null,this.l))}ri.prototype.toString=function(){let u=[];var f=this.j;f&&u.push(Ac(f,nC,!0),":");var p=this.g;return(p||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ac(f,nC,!0),"@"),u.push(Ic(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&u.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ac(p,p.charAt(0)=="/"?FN:kN,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ac(p,VN)),u.join("")},ri.prototype.resolve=function(u){let f=Xn(this),p=!!u.j;p?Cc(f,u.j):p=!!u.o,p?f.o=u.o:p=!!u.g,p?f.g=u.g:p=u.u!=null;var g=u.h;if(p)bc(f,u.u);else if(p=!!u.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var T=f.h.lastIndexOf("/");T!=-1&&(g=f.h.slice(0,T+1)+g)}if(T=g,T==".."||T==".")g="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){g=T.lastIndexOf("/",0)==0,T=T.split("/");let O=[];for(let H=0;H<T.length;){let ve=T[H++];ve=="."?g&&H==T.length&&O.push(""):ve==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),g&&H==T.length&&O.push("")):(O.push(ve),g=!0)}g=O.join("/")}else g=T}return p?f.h=g:p=u.i.toString()!=="",p?cg(f,aC(u.i)):p=!!u.m,p&&(f.m=u.m),f};function Xn(u){return new ri(u)}function Cc(u,f,p){u.j=p?Dc(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bc(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function cg(u,f,p){f instanceof Sc?(u.i=f,jN(u.i,u.l)):(p||(f=Ac(f,LN)),u.i=new Sc(f,u.l))}function We(u,f,p){u.i.set(f,p)}function od(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Dc(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ac(u,f,p){return typeof u=="string"?(u=encodeURI(u).replace(f,PN),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nC=/[#\/\?@]/g,kN=/[#\?:]/g,FN=/[#\?]/g,LN=/[#\?@]/g,VN=/#/g;function Sc(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function eo(u){u.g||(u.g=new Map,u.h=0,u.i&&ON(u.i,function(f,p){u.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=Sc.prototype,n.add=function(u,f){eo(this),this.i=null,u=As(this,u);let p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(f),this.h+=1,this};function rC(u,f){eo(u),f=As(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function iC(u,f){return eo(u),f=As(u,f),u.g.has(f)}n.forEach=function(u,f){eo(this),this.g.forEach(function(p,g){p.forEach(function(T){u.call(f,T,g,this)},this)},this)};function oC(u,f){eo(u);let p=[];if(typeof f=="string")iC(u,f)&&(p=p.concat(u.g.get(As(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)p=p.concat(u[f]);return p}n.set=function(u,f){return eo(this),this.i=null,u=As(this,u),iC(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=oC(this,u),u.length>0?String(u[0]):f):f};function sC(u,f,p){rC(u,f),p.length>0&&(u.i=null,u.g.set(As(u,f),y(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(let g=0;g<f.length;g++){var p=f[g];let T=Ic(p);p=oC(this,p);for(let O=0;O<p.length;O++){let H=T;p[O]!==""&&(H+="="+Ic(p[O])),u.push(H)}}return this.i=u.join("&")};function aC(u){let f=new Sc;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function As(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function jN(u,f){f&&!u.j&&(eo(u),u.i=null,u.g.forEach(function(p,g){let T=g.toLowerCase();g!=T&&(rC(this,g),sC(this,T,p))},u)),u.j=f}function UN(u,f){let p=new Ec;if(s.Image){let g=new Image;g.onload=d(ii,p,"TestLoadImage: loaded",!0,f,g),g.onerror=d(ii,p,"TestLoadImage: error",!1,f,g),g.onabort=d(ii,p,"TestLoadImage: abort",!1,f,g),g.ontimeout=d(ii,p,"TestLoadImage: timeout",!1,f,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else f(!1)}function BN(u,f){let p=new Ec,g=new AbortController,T=setTimeout(()=>{g.abort(),ii(p,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:g.signal}).then(O=>{clearTimeout(T),O.ok?ii(p,"TestPingServer: ok",!0,f):ii(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(T),ii(p,"TestPingServer: error",!1,f)})}function ii(u,f,p,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(p)}catch{}}function HN(){this.g=new bN}function sd(u){this.i=u.Sb||null,this.h=u.ab||!1}h(sd,Lw),sd.prototype.g=function(){return new ad(this.i,this.h)};function ad(u,f){jt.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(ad,jt),n=ad.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,xc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||s).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xc(this)),this.g&&(this.readyState=3,xc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cC(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function cC(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Tc(this):xc(this),this.readyState==3&&cC(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Tc(this))},n.Na=function(u){this.g&&(this.response=u,Tc(this))},n.ga=function(){this.g&&Tc(this)};function Tc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,xc(u)}n.setRequestHeader=function(u,f){this.A.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=f.next();return u.join(`\r
`)};function xc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function uC(u){let f="";return Xl(u,function(p,g){f+=g,f+=":",f+=p,f+=`\r
`}),f}function ug(u,f,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=uC(p),typeof u=="string"?p!=null&&Ic(p):We(u,f,p))}function Xe(u){jt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Xe,jt);var $N=/^https?$/i,GN=["POST","PUT"];n=Xe.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,f,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gw.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){lC(this,O);return}if(u=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)p.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),T=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(GN,f,void 0)>=0)||g||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,H]of p)this.g.setRequestHeader(O,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(O){lC(this,O)}};function lC(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,dC(u),cd(u)}function dC(u){u.A||(u.A=!0,Zt(u,"complete"),Zt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Zt(this,"complete"),Zt(this,"abort"),cd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cd(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?fC(this):this.Xa())},n.Xa=function(){fC(this)};function fC(u){if(u.h&&typeof o<"u"){if(u.v&&oi(u)==4)setTimeout(u.Ca.bind(u),0);else if(Zt(u,"readystatechange"),oi(u)==4){u.h=!1;try{let O=u.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var g;if(g=O===0){let H=String(u.D).match(tC)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),g=!$N.test(H?H.toLowerCase():"")}p=g}if(p)Zt(u,"complete"),Zt(u,"success");else{u.o=6;try{var T=oi(u)>2?u.g.statusText:""}catch{T=""}u.l=T+" ["+u.ca()+"]",dC(u)}}finally{cd(u)}}}}function cd(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let p=u.g;u.g=null,f||Zt(u,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function oi(u){return u.g?u.g.readyState:0}n.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),CN(f)}};function hC(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qN(u){let f={};u=(u.g&&oi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(E(u[g]))continue;var p=xN(u[g]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=f[T]||[];f[T]=O,O.push(p)}vN(f,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mc(u,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||f}function pC(u){this.za=0,this.i=[],this.j=new Ec,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mc("baseRetryDelayMs",5e3,u),this.Za=Mc("retryDelaySeedMs",1e4,u),this.Ta=Mc("forwardChannelMaxRetries",2,u),this.va=Mc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Yw(u&&u.concurrentRequestLimit),this.Ba=new HN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=pC.prototype,n.ka=8,n.I=1,n.connect=function(u,f,p,g){Jt(0),this.W=u,this.H=f||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=CC(this,null,this.W),ld(this)};function lg(u){if(mC(u),u.I==3){var f=u.V++,p=Xn(u.J);if(We(p,"SID",u.M),We(p,"RID",f),We(p,"TYPE","terminate"),Rc(u,p),f=new ni(u,u.j,f),f.M=2,f.A=od(Xn(p)),p=!1,s.navigator&&s.navigator.sendBeacon)try{p=s.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&s.Image&&(new Image().src=f.A,p=!0),p||(f.g=bC(f.j,null),f.g.ea(f.A)),f.F=Date.now(),id(f)}wC(u)}function ud(u){u.g&&(fg(u),u.g.cancel(),u.g=null)}function mC(u){ud(u),u.v&&(s.clearTimeout(u.v),u.v=null),dd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function ld(u){if(!Zw(u.h)&&!u.m){u.m=!0;var f=u.Ea;Ue||v(),xe||(Ue(),xe=!0),b.add(f,u),u.D=0}}function zN(u,f){return Jw(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=_c(l(u.Ea,u,f),IC(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let T=new ni(this,this.j,u),O=this.o;if(this.U&&(O?(O=Aw(O),Tw(O,this.U)):O=this.U),this.u!==null||this.R||(T.J=O,O=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(f+=g,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=yC(this,T,f),p=Xn(this.J),We(p,"RID",u),We(p,"CVER",22),this.G&&We(p,"X-HTTP-Session-Id",this.G),Rc(this,p),O&&(this.R?f="headers="+Ic(uC(O))+"&"+f:this.u&&ug(p,this.u,O)),ag(this.h,T),this.Ra&&We(p,"TYPE","init"),this.S?(We(p,"$req",f),We(p,"SID","null"),T.U=!0,rg(T,p,null)):rg(T,p,f),this.I=2}}else this.I==3&&(u?gC(this,u):this.i.length==0||Zw(this.h)||gC(this))};function gC(u,f){var p;f?p=f.l:p=u.V++;let g=Xn(u.J);We(g,"SID",u.M),We(g,"RID",p),We(g,"AID",u.K),Rc(u,g),u.u&&u.o&&ug(g,u.u,u.o),p=new ni(u,u.j,p,u.D+1),u.u===null&&(p.J=u.o),f&&(u.i=f.G.concat(u.i)),f=yC(u,p,1e3),p.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ag(u.h,p),rg(p,g,f)}function Rc(u,f){u.H&&Xl(u.H,function(p,g){We(f,g,p)}),u.l&&Xl({},function(p,g){We(f,g,p)})}function yC(u,f,p){p=Math.min(u.i.length,p);let g=u.l?l(u.l.Ka,u.l,u):null;e:{var T=u.i;let ve=-1;for(;;){let It=["count="+p];ve==-1?p>0?(ve=T[0].g,It.push("ofs="+ve)):ve=0:It.push("ofs="+ve);let qe=!0;for(let Dt=0;Dt<p;Dt++){var O=T[Dt].g;let er=T[Dt].map;if(O-=ve,O<0)ve=Math.max(0,T[Dt].g-100),qe=!1;else try{O="req"+O+"_"||"";try{var H=er instanceof Map?er:Object.entries(er);for(let[no,si]of H){let ai=si;a(si)&&(ai=Jm(si)),It.push(O+no+"="+encodeURIComponent(ai))}}catch(no){throw It.push(O+"type="+encodeURIComponent("_badmap")),no}}catch{g&&g(er)}}if(qe){H=It.join("&");break e}}H=void 0}return u=u.i.splice(0,p),f.G=u,H}function vC(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;Ue||v(),xe||(Ue(),xe=!0),b.add(f,u),u.A=0}}function dg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=_c(l(u.Da,u),IC(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,_C(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=_c(l(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),ud(this),_C(this))};function fg(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function _C(u){u.g=new ni(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=Xn(u.na);We(f,"RID","rpc"),We(f,"SID",u.M),We(f,"AID",u.K),We(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(f,"TO",u.ia),We(f,"TYPE","xmlhttp"),Rc(u,f),u.u&&u.o&&ug(f,u.u,u.o),u.O&&(u.g.H=u.O);var p=u.g;u=u.ba,p.M=1,p.A=od(Xn(f)),p.u=null,p.R=!0,Ww(p,u)}n.Va=function(){this.C!=null&&(this.C=null,ud(this),dg(this),Jt(19))};function dd(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function EC(u,f){var p=null;if(u.g==f){dd(u),fg(u),u.g=null;var g=2}else if(sg(u.h,f))p=f.G,Xw(u.h,f),g=1;else return;if(u.I!=0){if(f.o)if(g==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var T=u.D;g=nd(),Zt(g,new Hw(g,p)),ld(u)}else vC(u);else if(T=f.m,T==3||T==0&&f.X>0||!(g==1&&zN(u,f)||g==2&&dg(u)))switch(p&&p.length>0&&(f=u.h,f.i=f.i.concat(p)),T){case 1:to(u,5);break;case 4:to(u,10);break;case 3:to(u,6);break;default:to(u,2)}}}function IC(u,f){let p=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(p*=2),p*f}function to(u,f){if(u.j.info("Error code "+f),f==2){var p=l(u.bb,u),g=u.Ua;let T=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Cc(g,"https"),od(g),T?UN(g.toString(),p):BN(g.toString(),p)}else Jt(2);u.I=0,u.l&&u.l.pa(f),wC(u),mC(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function wC(u){if(u.I=0,u.ja=[],u.l){let f=eC(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ja,f),C(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function CC(u,f,p){var g=p instanceof ri?Xn(p):new ri(p);if(g.g!="")f&&(g.g=f+"."+g.g),bc(g,g.u);else{var T=s.location;g=T.protocol,f=f?f+"."+T.hostname:T.hostname,T=+T.port;let O=new ri(null);g&&Cc(O,g),f&&(O.g=f),T&&bc(O,T),p&&(O.h=p),g=O}return p=u.G,f=u.wa,p&&f&&We(g,p,f),We(g,"VER",u.ka),Rc(u,g),g}function bC(u,f,p){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new Xe(new sd({ab:p})):new Xe(u.ma),f.Fa(u.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function DC(){}n=DC.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fd(){}fd.prototype.g=function(u,f){return new dn(u,f)};function dn(u,f){jt.call(this),this.g=new pC(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!E(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Ss(this)}h(dn,jt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){lg(this.g)},dn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.v&&(p={},p.__data__=Jm(u),u=p);f.i.push(new NN(f.Ya++,u)),f.I==3&&ld(f)},dn.prototype.N=function(){this.g.l=null,delete this.j,lg(this.g),delete this.g,dn.Z.N.call(this)};function AC(u){Xm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let p in f){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}h(AC,Xm);function SC(){eg.call(this),this.status=1}h(SC,eg);function Ss(u){this.g=u}h(Ss,DC),Ss.prototype.ra=function(){Zt(this.g,"a")},Ss.prototype.qa=function(u){Zt(this.g,new AC(u))},Ss.prototype.pa=function(u){Zt(this.g,new SC)},Ss.prototype.oa=function(){Zt(this.g,"b")},fd.prototype.createWebChannel=fd.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,L_=zr.createWebChannelTransport=function(){return new fd},F_=zr.getStatEventTarget=function(){return nd()},k_=zr.Event=Ji,Jh=zr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rd.NO_ERROR=0,rd.TIMEOUT=8,rd.HTTP_ERROR=6,nl=zr.ErrorCode=rd,$w.COMPLETE="complete",P_=zr.EventType=$w,Vw.EventType=yc,yc.OPEN="a",yc.CLOSE="b",yc.ERROR="c",yc.MESSAGE="d",jt.prototype.listen=jt.prototype.J,wa=zr.WebChannel=Vw,pj=zr.FetchXmlHttpFactory=sd,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,O_=zr.XhrIo=Xe}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});var xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");var sc="12.9.0";function qx(n){sc=n}var os=new Ia("@firebase/firestore");function xa(){return os.logLevel}function V(n,...e){if(os.logLevel<=Se.DEBUG){let t=e.map(NI);os.debug(`Firestore (${sc}): ${n}`,...t)}}function ct(n,...e){if(os.logLevel<=Se.ERROR){let t=e.map(NI);os.error(`Firestore (${sc}): ${n}`,...t)}}function Li(n,...e){if(os.logLevel<=Se.WARN){let t=e.map(NI);os.warn(`Firestore (${sc}): ${n}`,...t)}}function NI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function z(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zx(n,r,t)}function zx(n,e,t){let r=`FIRESTORE (${sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ct(r),new Error(r)}function Y(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||zx(e,i,r)}function K(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var yr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var z_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}};var hp=class{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new yr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new yr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string",31837,{l:r}),new z_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string",2055,{h:e}),new xt(e)}},W_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},K_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new W_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},pp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,T1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Y(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ss=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function Q_(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return V_(i)===V_(o)?le(i,o):V_(i)?1:-1}return le(n.length,e.length)}var gj=55296,yj=57343;function V_(n){let e=n.charCodeAt(0);return e>=gj&&e<=yj}function La(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Wx(n){return n+"\0"}var k1="__name__",gp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&z(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Q_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}},Ve=class n extends gp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class n extends gp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k1}static keyField(){return new n([k1])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ve.fromString(e))}static fromName(e){return new n(Ve.fromString(e).popFirst(5))}static empty(){return new n(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ve(e.slice()))}};function Kx(n,e,t){if(!t)throw new $(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Qx(n,e,t,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function F1(n){if(!G.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function L1(n){if(G.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z(12329,{type:typeof n})}function Xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pm(n);throw new $(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ut(n,e){let t={typeString:n};return e&&(t.value=e),t}function ac(n,e){if(!Yx(n))throw new $(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new $(k.INVALID_ARGUMENT,t);return!0}var V1=-62135596800,j1=1e6,Ke=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*j1);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<V1)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j1}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ac(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-V1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:ut("string",Ke._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ke(0,0))}static max(){return new n(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Va=-1,as=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Y_(n){return n.fields.find(e=>e.kind===2)}function zo(n){return n.fields.filter(e=>e.kind!==2)}as.UNKNOWN_ID=-1;var es=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ja=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Fn.min())}};function Zx(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ke(t+1,0):new Ke(t,r));return new Fn(i,G.empty(),e)}function Jx(n){return new Fn(n.readTime,n.key,Va)}var Fn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),G.empty(),Va)}static max(){return new n(ne.max(),G.empty(),Va)}};function OI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var Xx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function qi(n){if(n.code!==k.FAILED_PRECONDITION||n.message!==Xx)throw n;V("LocalStore","Unexpectedly lost primary lease")}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var En="SimpleDb",vp=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ts(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ts(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=PI(r.target.error);this.S.reject(new ts(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(V(En,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new J_(t)}},Ua=class n{static delete(e){return V(En,"Removing database:",e),Ko(p_().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Kh())return!1;if(n.F())return!0;let e=Xu(),t=n.M(e),r=0<t&&t<10,i=eM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,n.M(Xu())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(V(En,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ts(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new $(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new $(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ts(e,s))},i.onupgradeneeded=o=>{V(En,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next(()=>{V(En,"Database upgrade to version "+this.version+" complete")})}})),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){let o=t==="readonly",s=0;for(;;){++s;try{this.db=await this.L(e);let a=vp.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.C(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(V(En,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}};function eM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Z_=class{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ko(this.U.delete())}},ts=class extends ${constructor(e,t){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function zi(n){return n.name==="IndexedDbTransactionError"}var J_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(V(En,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(V(En,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ko(r)}add(e){return V(En,"ADD",this.store.name,e,e),Ko(this.store.add(e))}get(e){return Ko(this.store.get(e)).next(t=>(t===void 0&&(t=null),V(En,"GET",this.store.name,e,t),t))}delete(e){return V(En,"DELETE",this.store.name,e),Ko(this.store.delete(e))}count(){return V(En,"COUNT",this.store.name),Ko(this.store.count())}H(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}Z(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}X(e,t){V(En,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Y=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}ee(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}te(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=PI(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Z_(a),l=t(a.primaryKey,a.value,c);if(l instanceof M){let d=l.catch(h=>(c.done(),M.reject(h)));r.push(d)}c.isDone?i():c.G===null?a.continue():a.continue(c.G)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ko(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=PI(r.target.error);t(i)}})}var U1=!1;function PI(n){let e=Ua.M(Xu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return U1||(U1=!0,setTimeout(()=>{throw r},0)),r}}return n}var ll="IndexBackfiller",X_=class{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){V(ll,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let t=await this.ne.ie();V(ll,`Documents written: ${t}`)}catch(t){zi(t)?V(ll,"Ignoring IndexedDB error during index backfill: ",t):await qi(t)}await this.re(6e4)})}},eE=class{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return V(ll,`Processing collection: ${s}`),this.oe(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(i,o)).next(a=>(V(ll,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=Jx(o);OI(s,r)>0&&(r=s)}),new Fn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var In=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ns=-1;function mm(n){return n==null}function vl(n){return n===0&&1/n==-1/0}function tM(n){return typeof n=="number"&&Number.isInteger(n)&&!vl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _p="";function Yt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=B1(e)),e=_j(n.get(t),e);return B1(e)}function _j(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case _p:t+="";break;default:t+=o}}return t}function B1(n){return n+_p+""}function mr(n){let e=n.length;if(Y(e>=2,64408,{path:n}),e===2)return Y(n.charAt(0)===_p&&n.charAt(1)==="",56145,{path:n}),Ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(_p,o);switch((s<0||s>t)&&z(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z(61167,{path:n})}o=s+2}return new Ve(r)}var Wo="remoteDocuments",jl="owner",Ca="owner",_l="mutationQueues",Ej="userId",Yn="mutations",H1="batchId",Jo="userMutationsIndex",$1=["userId","batchId"];function ip(n,e){return[n,Yt(e)]}function nM(n,e,t){return[n,Yt(e),t]}var Ij={},Ba="documentMutations",Ep="remoteDocumentsV14",wj=["prefixPath","collectionGroup","readTime","documentId"],op="documentKeyIndex",Cj=["prefixPath","collectionGroup","documentId"],rM="collectionGroupIndex",bj=["collectionGroup","readTime","prefixPath","documentId"],El="remoteDocumentGlobal",tE="remoteDocumentGlobalKey",Ha="targets",iM="queryTargetsIndex",Dj=["canonicalId","targetId"],$a="targetDocuments",Aj=["targetId","path"],kI="documentTargetsIndex",Sj=["path","targetId"],Ip="targetGlobalKey",rs="targetGlobal",Il="collectionParents",Tj=["collectionId","parent"],Ga="clientMetadata",xj="clientId",gm="bundles",Mj="bundleId",ym="namedQueries",Rj="name",FI="indexConfiguration",Nj="indexId",nE="collectionGroupIndex",Oj="collectionGroup",dl="indexState",Pj=["indexId","uid"],oM="sequenceNumberIndex",kj=["uid","sequenceNumber"],fl="indexEntries",Fj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sM="documentKeyIndex",Lj=["indexId","uid","orderedDocumentKey"],vm="documentOverlays",Vj=["userId","collectionPath","documentId"],rE="collectionPathOverlayIndex",jj=["userId","collectionPath","largestBatchId"],aM="collectionGroupOverlayIndex",Uj=["userId","collectionGroup","largestBatchId"],LI="globals",Bj="name",cM=[_l,Yn,Ba,Wo,Ha,jl,rs,$a,Ga,El,Il,gm,ym],Hj=[...cM,vm],uM=[_l,Yn,Ba,Ep,Ha,jl,rs,$a,Ga,El,Il,gm,ym,vm],lM=uM,VI=[...lM,FI,dl,fl],$j=VI,dM=[...VI,LI],Gj=dM;var wl=class extends yp{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}};function bt(n,e){let t=K(n);return Ua.O(t.le,e)}function G1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Qe=class n{constructor(e,t){this.comparator=e,this.root=t||vr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pa(this.root,e,this.comparator,!0)}},Pa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new vr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ge=class n{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wp(this.data.getIterator())}getIteratorFrom(e){return new wp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},wp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ba(n){return n.hasNext()?n.getNext():void 0}var wn=class n{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ge(Et.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Cp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Cp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var qj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(n){if(Y(!!n,39018),typeof n=="string"){let e=0,t=qj.exec(n);if(Y(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(n.seconds),nanos:Je(n.nanos)}}function Je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zr(n){return typeof n=="string"?lt.fromBase64String(n):lt.fromUint8Array(n)}var hM="server_timestamp",pM="__type__",mM="__previous_value__",gM="__local_write_time__";function _m(n){return(n?.mapValue?.fields||{})[pM]?.stringValue===hM}function Em(n){let e=n.mapValue.fields[mM];return _m(e)?Em(e):e}function Cl(n){let e=Yr(n.mapValue.fields[gM].timestampValue);return new Ke(e.seconds,e.nanos)}var iE=class{constructor(e,t,r,i,o,s,a,c,l,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d,this.apiKey=h}},bp="(default)",cs=class n{constructor(e,t){this.projectId=e,this.database=t||bp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===bp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function yM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(n.options.projectId,e)}var jI="__type__",vM="__max__",Fi={mapValue:{fields:{__type__:{stringValue:vM}}}},UI="__vector__",qa="value",sp={nullValue:"NULL_VALUE"};function Vi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_m(n)?4:_M(n)?9007199254740991:wm(n)?10:11:z(28295,{value:n})}function Ir(n,e){if(n===e)return!0;let t=Vi(n);if(t!==Vi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cl(n).isEqual(Cl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Yr(i.timestampValue),a=Yr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Zr(i.bytesValue).isEqual(Zr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Je(i.geoPointValue.latitude)===Je(o.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Je(i.integerValue)===Je(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Je(i.doubleValue),a=Je(o.doubleValue);return s===a?vl(s)===vl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return La(n.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(G1(s)!==G1(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ir(s[c],a[c])))return!1;return!0})(n,e);default:return z(52216,{left:n})}}function bl(n,e){return(n.values||[]).find(t=>Ir(t,e))!==void 0}function ji(n,e){if(n===e)return 0;let t=Vi(n),r=Vi(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Je(o.integerValue||o.doubleValue),c=Je(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return q1(n.timestampValue,e.timestampValue);case 4:return q1(Cl(n),Cl(e));case 5:return Q_(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Zr(o),c=Zr(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=le(a[l],c[l]);if(d!==0)return d}return le(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=le(Je(o.latitude),Je(s.latitude));return a!==0?a:le(Je(o.longitude),Je(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return z1(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},c=s.fields||{},l=a[qa]?.arrayValue,d=c[qa]?.arrayValue,h=le(l?.values?.length||0,d?.values?.length||0);return h!==0?h:z1(l,d)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Fi.mapValue&&s===Fi.mapValue)return 0;if(o===Fi.mapValue)return 1;if(s===Fi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let m=Q_(c[h],d[h]);if(m!==0)return m;let y=ji(a[c[h]],l[d[h]]);if(y!==0)return y}return le(c.length,d.length)})(n.mapValue,e.mapValue);default:throw z(23264,{he:t})}}function q1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=Yr(n),r=Yr(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function z1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ji(t[i],r[i]);if(o)return o}return le(t.length,r.length)}function za(n){return oE(n)}function oE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Yr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Zr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return G.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=oE(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${oE(t.fields[s])}`;return i+"}"})(n.mapValue):z(61005,{value:n})}function ap(n){switch(Vi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Em(n);return e?16+ap(e):16;case 5:return 2*n.stringValue.length;case 6:return Zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+ap(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Wi(r.fields,(o,s)=>{i+=o.length+ap(s)}),i})(n.mapValue);default:throw z(13486,{value:n})}}function Im(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sE(n){return!!n&&"integerValue"in n}function Dl(n){return!!n&&"arrayValue"in n}function W1(n){return!!n&&"nullValue"in n}function K1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cp(n){return!!n&&"mapValue"in n}function wm(n){return(n?.mapValue?.fields||{})[jI]?.stringValue===UI}function hl(n){if(n.geoPointValue)return{geoPointValue:L({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:L({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return L({},n)}function _M(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vM}var EM={mapValue:{fields:{[jI]:{stringValue:UI},[qa]:{arrayValue:{}}}}};function zj(n){return"nullValue"in n?sp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Im(cs.empty(),G.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?wm(n)?EM:{mapValue:{}}:z(35942,{value:n})}function Wj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Im(cs.empty(),G.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?EM:"mapValue"in n?wm(n)?{mapValue:{}}:Fi:z(61959,{value:n})}function Q1(n,e){let t=ji(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Y1(n,e){let t=ji(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Kt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=Et.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=hl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());cp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(hl(this.value))}};function IM(n){let e=[];return Wi(n.fields,(t,r)=>{let i=new Et([t]);if(cp(r)){let o=IM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new wn(e)}var Vt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Kt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Kt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Z1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=ji(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function J1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ir(n.position[t],e.position[t]))return!1;return!0}var us=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Kj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Dp=class{},we=class n extends Dp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uE(e,t,r):t==="array-contains"?new fE(e,r):t==="in"?new Ap(e,r):t==="not-in"?new hE(e,r):t==="array-contains-any"?new pE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lE(e,r):new dE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ji(t,this.value)):t!==null&&Vi(this.value)===Vi(t)&&this.matchesComparison(ji(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},je=class n extends Dp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Wa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Wa(n){return n.op==="and"}function aE(n){return n.op==="or"}function BI(n){return wM(n)&&Wa(n)}function wM(n){for(let e of n.filters)if(e instanceof je)return!1;return!0}function cE(n){if(n instanceof we)return n.field.canonicalString()+n.op.toString()+za(n.value);if(BI(n))return n.filters.map(e=>cE(e)).join(",");{let e=n.filters.map(t=>cE(t)).join(",");return`${n.op}(${e})`}}function CM(n,e){return n instanceof we?(function(r,i){return i instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&Ir(r.value,i.value)})(n,e):n instanceof je?(function(r,i){return i instanceof je&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CM(s,i.filters[a]),!0):!1})(n,e):void z(19439)}function bM(n,e){let t=n.filters.concat(e);return je.create(t,n.op)}function DM(n){return n instanceof we?(function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`})(n):n instanceof je?(function(t){return t.op.toString()+" {"+t.getFilters().map(DM).join(" ,")+"}"})(n):"Filter"}var uE=class extends we{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},lE=class extends we{constructor(e,t){super(e,"in",t),this.keys=AM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},dE=class extends we{constructor(e,t){super(e,"not-in",t),this.keys=AM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AM(n,e){return(e.arrayValue?.values||[]).map(t=>G.fromName(t.referenceValue))}var fE=class extends we{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Dl(t)&&bl(t.arrayValue,this.value)}},Ap=class extends we{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bl(this.value.arrayValue,t)}},hE=class extends we{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bl(this.value.arrayValue,t)}},pE=class extends we{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bl(this.value.arrayValue,r))}};var mE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function gE(n,e=null,t=[],r=[],i=null,o=null,s=null){return new mE(n,e,t,r,i,o,s)}function ls(n){let e=K(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),mm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>za(r)).join(",")),e.Te=t}return e.Te}function Ul(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Kj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!J1(n.startAt,e.startAt)&&J1(n.endAt,e.endAt)}function Sp(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Tp(n,e){return n.filters.filter(t=>t instanceof we&&t.field.isEqual(e))}function X1(n,e,t){let r=sp,i=!0;for(let o of Tp(n,e)){let s=sp,a=!0;switch(o.op){case"<":case"<=":s=zj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=sp}Q1({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Q1({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function ex(n,e,t){let r=Fi,i=!0;for(let o of Tp(n,e)){let s=Fi,a=!0;switch(o.op){case">=":case">":s=Wj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Fi}Y1({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Y1({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ka=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function SM(n,e,t,r,i,o,s,a){return new Ka(n,e,t,r,i,o,s,a)}function Bl(n){return new Ka(n)}function tx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Qj(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function TM(n){return n.collectionGroup!==null}function ka(n){let e=K(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ge(Et.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new us(o,r))}),t.has(Et.keyField().canonicalString())||e.Ie.push(new us(Et.keyField(),r))}return e.Ie}function bn(n){let e=K(n);return e.Ee||(e.Ee=Yj(e,ka(n))),e.Ee}function Yj(n,e){if(n.limitType==="F")return gE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new us(i.field,o)});let t=n.endAt?new Jr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jr(n.startAt.position,n.startAt.inclusive):null;return gE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xp(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cm(n,e){return Ul(bn(n),bn(e))&&n.limitType===e.limitType}function xM(n){return`${ls(bn(n))}|lt:${n.limitType}`}function Ma(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>DM(i)).join(", ")}]`),mm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>za(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>za(i)).join(",")),`Target(${r})`})(bn(n))}; limitType=${n.limitType})`}function Hl(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of ka(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=Z1(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,ka(r),i)||r.endAt&&!(function(s,a,c){let l=Z1(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,ka(r),i))})(n,e)}function MM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RM(n){return(e,t)=>{let r=!1;for(let i of ka(n)){let o=Zj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Zj(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?ji(c,l):z(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:n.dir})}}var Zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fM(this.inner)}size(){return this.innerSize}};var Jj=new Qe(G.comparator);function Cn(){return Jj}var NM=new Qe(G.comparator);function cl(...n){let e=NM;for(let t of n)e=e.insert(t.key,t);return e}function OM(n){let e=NM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gr(){return pl()}function PM(){return pl()}function pl(){return new Zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var Xj=new Qe(G.comparator),eU=new Ge(G.comparator);function _e(...n){let e=eU;for(let t of n)e=e.add(t);return e}var tU=new Ge(le);function HI(){return tU}function $I(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function kM(n){return{integerValue:""+n}}function nU(n,e){return tM(e)?kM(e):$I(n,e)}var Qa=class{constructor(){this._=void 0}};function rU(n,e,t){return n instanceof ds?(function(i,o){let s={fields:{[pM]:{stringValue:hM},[gM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_m(o)&&(o=Em(o)),o&&(s.fields[mM]=o),{mapValue:s}})(t,e):n instanceof Ui?LM(n,e):n instanceof Bi?VM(n,e):(function(i,o){let s=FM(i,o),a=nx(s)+nx(i.Ae);return sE(s)&&sE(i.Ae)?kM(a):$I(i.serializer,a)})(n,e)}function iU(n,e,t){return n instanceof Ui?LM(n,e):n instanceof Bi?VM(n,e):t}function FM(n,e){return n instanceof fs?(function(r){return sE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ds=class extends Qa{},Ui=class extends Qa{constructor(e){super(),this.elements=e}};function LM(n,e){let t=jM(e);for(let r of n.elements)t.some(i=>Ir(i,r))||t.push(r);return{arrayValue:{values:t}}}var Bi=class extends Qa{constructor(e){super(),this.elements=e}};function VM(n,e){let t=jM(e);for(let r of n.elements)t=t.filter(i=>!Ir(i,r));return{arrayValue:{values:t}}}var fs=class extends Qa{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function nx(n){return Je(n.integerValue||n.doubleValue)}function jM(n){return Dl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var yE=class{constructor(e,t){this.field=e,this.transform=t}};function oU(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ui&&i instanceof Ui||r instanceof Bi&&i instanceof Bi?La(r.elements,i.elements,Ir):r instanceof fs&&i instanceof fs?Ir(r.Ae,i.Ae):r instanceof ds&&i instanceof ds})(n.transform,e.transform)}var vE=class{constructor(e,t){this.version=e,this.transformResults=t}},Qt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function up(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ya=class{};function UM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hs(n.key,Qt.none()):new Hi(n.key,n.data,Qt.none());{let t=n.data,r=Kt.empty(),i=new Ge(Et.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Jn(n.key,r,new wn(i.toArray()),Qt.none())}}function sU(n,e,t){n instanceof Hi?(function(i,o,s){let a=i.value.clone(),c=ix(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Jn?(function(i,o,s){if(!up(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ix(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(BM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function ml(n,e,t,r){return n instanceof Hi?(function(o,s,a,c){if(!up(o.precondition,s))return a;let l=o.value.clone(),d=ox(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Jn?(function(o,s,a,c){if(!up(o.precondition,s))return a;let l=ox(o.fieldTransforms,c,s),d=s.data;return d.setAll(BM(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,r):(function(o,s,a){return up(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function aU(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=FM(r.transform,i||null);o!=null&&(t===null&&(t=Kt.empty()),t.set(r.field,o))}return t||null}function rx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&La(r,i,(o,s)=>oU(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Hi=class extends Ya{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jn=class extends Ya{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ix(n,e,t){let r=new Map;Y(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,iU(s,a,t[i]))}return r}function ox(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,rU(o,s,e))}return r}var hs=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Mp=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Al=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&sU(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ml(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=PM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=UM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(t,r)=>rx(t,r))&&La(this.baseMutations,e.baseMutations,(t,r)=>rx(t,r))}},_E=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Y(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Xj})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var EE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var vt,Te;function cU(n){switch(n){case k.OK:return z(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return z(15467,{code:n})}}function HM(n){if(n===void 0)return ct("GRPC error has no .code"),k.UNKNOWN;switch(n){case vt.OK:return k.OK;case vt.CANCELLED:return k.CANCELLED;case vt.UNKNOWN:return k.UNKNOWN;case vt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case vt.INTERNAL:return k.INTERNAL;case vt.UNAVAILABLE:return k.UNAVAILABLE;case vt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case vt.NOT_FOUND:return k.NOT_FOUND;case vt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case vt.ABORTED:return k.ABORTED;case vt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case vt.DATA_LOSS:return k.DATA_LOSS;default:return z(39323,{code:n})}}(Te=vt||(vt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var uU=null;function lU(){return new TextEncoder}var dU=new qr([4294967295,4294967295],0);function sx(n){let e=lU().encode(n),t=new N_;return t.update(e),new Uint8Array(t.digest())}function ax(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qr([t,r],0),new qr([i,o],0)]}var IE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xo(`Invalid padding: ${t}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(qr.fromNumber(r)));return i.compare(dU)===1&&(i=new qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=sx(e),[r,i]=ax(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=sx(e),[r,i]=ax(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Xo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Qe(le),Cn(),_e())}},xl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var Fa=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},Rp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Np=class{constructor(e,t,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Op=class{constructor(){this.ve=0,this.Fe=cx(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),t=_e(),r=_e();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new xl(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=cx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Y(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},wE=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.He=Xh(),this.Je=Xh(),this.Ze=new Qe(le)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Sp(o))if(r===0){let s=new G(o.path);this.et(t,s,Vt.newNoDocument(s,ne.min()))}else Y(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}uU?.lt((function(d,h,m,y,C){let N={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},P=h.unchangedNames;return P&&(N.bloomFilter={applied:C===0,hashCount:P?.hashCount??0,bitmapLength:P?.bits?.bitmap?.length??0,padding:P?.bits?.padding??0,mightContain:U=>y?.mightContain(U)??!1}),N})(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Zr(r).toUint8Array()}catch(c){if(c instanceof Cp)return Li("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new IE(s,i,o)}catch(c){return Li(c instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Sp(a.target)){let c=new G(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Vt.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.Ke())}});let r=_e();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Tl(e,t,this.Ze,this.je,r);return this.je=Cn(),this.He=Xh(),this.Je=Xh(),this.Ze=new Qe(le),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Op,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ge(le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ge(le),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Op),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Xh(){return new Qe(G.comparator)}function cx(){return new Qe(G.comparator)}var fU={asc:"ASCENDING",desc:"DESCENDING"},hU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pU={and:"AND",or:"OR"},CE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function bE(n,e){return n.useProto3Json||mm(e)?e:{value:e}}function Za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $M(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mU(n,e){return Za(n,e.toTimestamp())}function rn(n){return Y(!!n,49232),ne.fromTimestamp((function(t){let r=Yr(t);return new Ke(r.seconds,r.nanos)})(n))}function GI(n,e){return DE(n,e).canonicalString()}function DE(n,e){let t=(function(i){return new Ve(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GM(n){let e=Ve.fromString(n);return Y(eR(e),10190,{key:e.toString()}),e}function Pp(n,e){return GI(n.databaseId,e.path)}function is(n,e){let t=GM(e);if(t.get(1)!==n.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(WM(t))}function qM(n,e){return GI(n.databaseId,e)}function zM(n){let e=GM(n);return e.length===4?Ve.emptyPath():WM(e)}function AE(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WM(n){return Y(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ux(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function KM(n,e,t){let r=is(n,e.name),i=rn(e.updateTime),o=e.createTime?rn(e.createTime):ne.min(),s=new Kt({mapValue:{fields:e.fields}}),a=Vt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function gU(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,d){return l.useProto3Json?(Y(d===void 0||typeof d=="string",58123),lt.fromBase64String(d||"")):(Y(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),lt.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let d=l.code===void 0?k.UNKNOWN:HM(l.code);return new $(d,l.message||"")})(s);t=new Np(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=is(n,r.document.name),o=rn(r.document.updateTime),s=r.document.createTime?rn(r.document.createTime):ne.min(),a=new Kt({mapValue:{fields:r.document.fields}}),c=Vt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Fa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=is(n,r.document),o=r.readTime?rn(r.readTime):ne.min(),s=Vt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Fa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=is(n,r.document),o=r.removedTargetIds||[];t=new Fa([],o,i,null)}else{if(!("filter"in e))return z(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new EE(i,o),a=r.targetId;t=new Rp(a,s)}}return t}function kp(n,e){let t;if(e instanceof Hi)t={update:ux(n,e.key,e.value)};else if(e instanceof hs)t={delete:Pp(n,e.key)};else if(e instanceof Jn)t={update:ux(n,e.key,e.data),updateMask:wU(e.fieldMask)};else{if(!(e instanceof Mp))return z(16599,{dt:e.type});t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ds)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ui)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fs)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw z(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:mU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)})(n,e.precondition)),t}function SE(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Qt.updateTime(rn(o.updateTime)):o.exists!==void 0?Qt.exists(o.exists):Qt.none()})(e.currentDocument):Qt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let c=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ds;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Ui(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Bi(d)}else"increment"in a?c=new fs(s,a.increment):z(16584,{proto:a});let l=Et.fromServerFormat(a.fieldPath);return new yE(l,c)})(n,i)):[];if(e.update){e.update.name;let i=is(n,e.update.name),o=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(c){let l=c.fieldPaths||[];return new wn(l.map(d=>Et.fromServerFormat(d)))})(e.updateMask);return new Jn(i,o,s,t,r)}return new Hi(i,o,t,r)}if(e.delete){let i=is(n,e.delete);return new hs(i,t)}if(e.verify){let i=is(n,e.verify);return new Mp(i,t)}return z(1463,{proto:e})}function yU(n,e){return n&&n.length>0?(Y(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?rn(i.updateTime):rn(o);return s.isEqual(ne.min())&&(s=rn(o)),new vE(s,i.transformResults||[])})(t,e))):[]}function QM(n,e){return{documents:[qM(n,e.path)]}}function YM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qM(n,i);let o=(function(l){if(l.length!==0)return XM(je.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(d=>(function(m){return{field:Ra(m.field),direction:_U(m.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=bE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function ZM(n){let e=zM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Y(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(h){let m=JM(h);return m instanceof je&&BI(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(m=>(function(C){return new us(Na(C.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let m;return m=typeof h=="object"?h.value:h,mm(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(h){let m=!!h.before,y=h.values||[];return new Jr(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(h){let m=!h.before,y=h.values||[];return new Jr(y,m)})(t.endAt)),SM(e,i,s,o,a,"F",c,l)}function vU(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Na(t.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Na(t.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Na(t.unaryFilter.field);return we.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Na(t.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}})(n):n.fieldFilter!==void 0?(function(t){return we.create(Na(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return je.create(t.compositeFilter.filters.map(r=>JM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}})(t.compositeFilter.op))})(n):z(30097,{filter:n})}function _U(n){return fU[n]}function EU(n){return hU[n]}function IU(n){return pU[n]}function Ra(n){return{fieldPath:n.canonicalString()}}function Na(n){return Et.fromServerFormat(n.fieldPath)}function XM(n){return n instanceof we?(function(t){if(t.op==="=="){if(K1(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NAN"}};if(W1(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K1(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NAN"}};if(W1(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(t.field),op:EU(t.op),value:t.value}}})(n):n instanceof je?(function(t){let r=t.getFilters().map(i=>XM(i));return r.length===1?r[0]:{compositeFilter:{op:IU(t.op),filters:r}}})(n):z(54877,{filter:n})}function wU(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function tR(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var Ja=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fp=class{constructor(e){this.yt=e}};function CU(n,e){let t;if(e.document)t=KM(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=G.fromSegments(e.noDocument.path),i=ms(e.noDocument.readTime);t=Vt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z(56709);{let r=G.fromSegments(e.unknownDocument.path),i=ms(e.unknownDocument.version);t=Vt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new Ke(i[0],i[1]);return ne.fromTimestamp(o)})(e.readTime)),t}function lx(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:Pp(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Za(o,s.version.toTimestamp()),createTime:Za(o,s.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ps(e.version)};else{if(!e.isUnknownDocument())return z(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ps(e.version)}}return r}function Lp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ps(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ms(n){let e=new Ke(n.seconds,n.nanoseconds);return ne.fromTimestamp(e)}function Qo(n,e){let t=(e.baseMutations||[]).map(o=>SE(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>SE(n.yt,o)),i=Ke.fromMillis(e.localWriteTimeMs);return new Al(e.batchId,i,t,r)}function ul(n){let e=ms(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ms(n.lastLimboFreeSnapshotVersion):ne.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return Y(s===1,1966,{count:s}),bn(Bl(zM(o.documents[0])))})(n.query):(function(o){return bn(ZM(o))})(n.query),new Ja(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,lt.fromBase64String(n.resumeToken))}function nR(n,e){let t=ps(e.snapshotVersion),r=ps(e.lastLimboFreeSnapshotVersion),i;i=Sp(e.target)?QM(n.yt,e.target):YM(n.yt,e.target).ft;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ls(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qI(n){let e=ZM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xp(e,e.limit,"L"):e}function j_(n,e){return new Sl(e.largestBatchId,SE(n.yt,e.overlayMutation))}function dx(n,e){let t=e.path.lastSegment();return[n,Yt(e.path.popLast()),t]}function fx(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ps(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}var TE=class{getBundleMetadata(e,t){return hx(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:ms(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return hx(e).put((function(i){return{bundleId:i.id,createTime:ps(rn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return px(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:qI(o.bundledQuery),readTime:ms(o.readTime)}})(r)})}saveNamedQuery(e,t){return px(e).put((function(i){return{name:i.name,readTime:ps(rn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function hx(n){return bt(n,gm)}function px(n){return bt(n,ym)}var Vp=class n{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return rl(e).get(dx(this.userId,t)).next(r=>r?j_(this.serializer,r):null)}getOverlays(e,t){let r=gr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Sl(t,s);i.push(this.bt(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Yt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(rl(e).X(rE,a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=gr(),o=Yt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return rl(e).H(rE,s).next(a=>{for(let c of a){let l=j_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=gr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rl(e).ee({index:aM,range:a},(c,l,d)=>{let h=j_(this.serializer,l);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):d.done()}).next(()=>o)}bt(e,t){return rl(e).put((function(i,o,s){let[a,c,l]=dx(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kp(i.yt,s.mutation)}})(this.serializer,this.userId,t))}};function rl(n){return bt(n,vm)}var xE=class{St(e){return bt(e,LI)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?lt.fromUint8Array(r):lt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Wr=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Je(e.integerValue));else if("doubleValue"in e){let r=Je(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),vl(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Yr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Zr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?_M(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):wm(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):z(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=qa,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Je(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),G.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Wr.Wt=new Wr;var Da=255;function bU(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function mx(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=bU(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var ME=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{let i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{let i=t.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){let t=this.en(e),r=mx(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){let t=this.en(e),r=mx(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Da),this.sn(255)}_n(){this.an(Da),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){let t=255&e;t===0?(this.sn(0),this.sn(255)):t===Da?(this.sn(Da),this.sn(0)):this.sn(t)}Ht(e){let t=255&e;t===0?(this.an(0),this.an(255)):t===Da?(this.an(Da),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},RE=class{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}},NE=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},Yo=class{constructor(){this.cn=new ME,this.ascending=new RE(this.cn),this.descending=new NE(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}};var Zo=class n{constructor(e,t,r,i){this.hn=e,this.Pn=t,this.Tn=r,this.In=i}En(){let e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new n(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:lp(this.Tn),directionalValue:lp(this.In),orderedDocumentKey:lp(t),documentKey:r.path.toArray()}}An(e,t,r){let i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function Ni(n,e){let t=n.hn-e.hn;return t!==0?t:(t=gx(n.Tn,e.Tn),t!==0?t:(t=gx(n.In,e.In),t!==0?t:G.comparator(n.Pn,e.Pn)))}function gx(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function lp(n){return y_()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function yx(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var jp=class{constructor(e){this.Vn=new Ge((t,r)=>Et.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Y(e.collectionGroup===this.collectionId,49279),this.fn)return!1;let t=Y_(e);if(t!==void 0&&!this.pn(t))return!1;let r=zo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.pn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.yn(a,c)||!this.wn(this.dn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.dn.length||!this.wn(this.dn[s++],a))return!1}return!0}bn(){if(this.fn)return null;let e=new Ge(Et.comparator),t=[];for(let r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new es(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new es(r.field,0))}for(let r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new es(r.field,r.dir==="asc"?0:1)));return new as(as.UNKNOWN_ID,this.collectionId,t,ja.empty())}pn(e){for(let t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function rR(n){if(Y(n instanceof we||n instanceof je,20012),n instanceof we){if(n instanceof Ap){let t=n.value.arrayValue?.values?.map(r=>we.create(n.field,"==",r))||[];return je.create(t,"or")}return n}let e=n.filters.map(t=>rR(t));return je.create(e,n.op)}function DU(n){if(n.getFilters().length===0)return[];let e=kE(rR(n));return Y(iR(e),7391),OE(e)||PE(e)?[e]:e.getFilters()}function OE(n){return n instanceof we}function PE(n){return n instanceof je&&BI(n)}function iR(n){return OE(n)||PE(n)||(function(t){if(t instanceof je&&aE(t)){for(let r of t.getFilters())if(!OE(r)&&!PE(r))return!1;return!0}return!1})(n)}function kE(n){if(Y(n instanceof we||n instanceof je,34018),n instanceof we)return n;if(n.filters.length===1)return kE(n.filters[0]);let e=n.filters.map(r=>kE(r)),t=je.create(e,n.op);return t=Up(t),iR(t)?t:(Y(t instanceof je,64498),Y(Wa(t),40251),Y(t.filters.length>1,57927),t.filters.reduce((r,i)=>zI(r,i)))}function zI(n,e){let t;return Y(n instanceof we||n instanceof je,38388),Y(e instanceof we||e instanceof je,25473),t=n instanceof we?e instanceof we?(function(i,o){return je.create([i,o],"and")})(n,e):vx(n,e):e instanceof we?vx(e,n):(function(i,o){if(Y(i.filters.length>0&&o.filters.length>0,48005),Wa(i)&&Wa(o))return bM(i,o.getFilters());let s=aE(i)?i:o,a=aE(i)?o:i,c=s.filters.map(l=>zI(l,a));return je.create(c,"or")})(n,e),Up(t)}function vx(n,e){if(Wa(e))return bM(e,n.getFilters());{let t=e.filters.map(r=>zI(n,r));return je.create(t,"or")}}function Up(n){if(Y(n instanceof we||n instanceof je,11850),n instanceof we)return n;let e=n.getFilters();if(e.length===1)return Up(e[0]);if(wM(n))return n;let t=e.map(i=>Up(i)),r=[];return t.forEach(i=>{i instanceof we?r.push(i):i instanceof je&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:je.create(r,n.op)}var FE=class{constructor(){this.Sn=new Ml}addToCollectionParentIndex(e,t){return this.Sn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Fn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Ml=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Ve.comparator)).toArray()}};var _x="IndexedDbIndexManager",ep=new Uint8Array(0),LE=class{constructor(e,t){this.databaseId=t,this.Dn=new Ml,this.Cn=new Zn(r=>ls(r),(r,i)=>Ul(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Dn.add(t)});let o={collectionId:r,parent:Yt(i)};return Ex(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[Wx(t),""],!1,!0);return Ex(e).H(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(mr(s.parent))}return r})}addFieldIndex(e,t){let r=il(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Sa(e);return o.next(a=>{s.put(fx(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=il(e),i=Sa(e),o=Aa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=il(e),r=Aa(e),i=Sa(e);return t.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,t){return M.forEach(this.vn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new jp(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Aa(e),i=!0,o=new Map;return M.forEach(this.vn(t),s=>this.Fn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=_e(),a=[];return M.forEach(o,(c,l)=>{V(_x,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`})(c)} to execute ${ls(t)}`);let d=(function(Q,Re){let Ue=Y_(Re);if(Ue===void 0)return null;for(let xe of Tp(Q,Ue.fieldPath))switch(xe.op){case"array-contains-any":return xe.value.arrayValue.values||[];case"array-contains":return[xe.value]}return null})(l,c),h=(function(Q,Re){let Ue=new Map;for(let xe of zo(Re))for(let b of Tp(Q,xe.fieldPath))switch(b.op){case"==":case"in":Ue.set(xe.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return Ue.set(xe.fieldPath.canonicalString(),b.value),Array.from(Ue.values())}return null})(l,c),m=(function(Q,Re){let Ue=[],xe=!0;for(let b of zo(Re)){let v=b.kind===0?X1(Q,b.fieldPath,Q.startAt):ex(Q,b.fieldPath,Q.startAt);Ue.push(v.value),xe&&(xe=v.inclusive)}return new Jr(Ue,xe)})(l,c),y=(function(Q,Re){let Ue=[],xe=!0;for(let b of zo(Re)){let v=b.kind===0?ex(Q,b.fieldPath,Q.endAt):X1(Q,b.fieldPath,Q.endAt);Ue.push(v.value),xe&&(xe=v.inclusive)}return new Jr(Ue,xe)})(l,c),C=this.Mn(c,l,m),N=this.Mn(c,l,y),P=this.xn(c,l,h),U=this.On(c.indexId,d,C,m.inclusive,N,y.inclusive,P);return M.forEach(U,J=>r.Z(J,t.limit).next(Q=>{Q.forEach(Re=>{let Ue=G.fromSegments(Re.documentKey);s.has(Ue)||(s=s.add(Ue),a.push(Ue))})}))}).next(()=>a)}return M.resolve(null)})}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=DU(je.create(e.filters,"and")).map(r=>gE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}On(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let m=t?this.Nn(t[h/l]):ep,y=this.Bn(e,m,r[h%l],i),C=this.Ln(e,m,o[h%l],s),N=a.map(P=>this.Bn(e,m,P,!0));d.push(...this.createRange(y,C,N))}return d}Bn(e,t,r,i){let o=new Zo(e,G.empty(),t,r);return i?o:o.En()}Ln(e,t,r,i){let o=new Zo(e,G.empty(),t,r);return i?o.En():o}Fn(e,t){let r=new jp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.gn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.vn(t);return M.forEach(i,o=>this.Fn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(c){let l=new Ge(Et.comparator),d=!1;for(let h of c.filters)for(let m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:l=l.add(m.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}kn(e,t){let r=new Yo;for(let i of zo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.ln(i.kind);Wr.Wt.Dt(o,s)}return r.un()}Nn(e){let t=new Yo;return Wr.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){let r=new Yo;return Wr.Wt.Dt(Im(this.databaseId,t),r.ln((function(o){let s=zo(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let i=[];i.push(new Yo);let o=0;for(let s of zo(e)){let a=r[o++];for(let c of i)if(this.qn(t,s.fieldPath)&&Dl(a))i=this.Un(i,s,a);else{let l=c.ln(s.kind);Wr.Wt.Dt(a,l)}}return this.$n(i)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Yo;c.seed(a.un()),Wr.Wt.Dt(s,c.ln(t.kind)),o.push(c)}return o}qn(e,t){return!!e.filters.find(r=>r instanceof we&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=il(e),i=Sa(e);return(t?r.H(nE,IDBKeyRange.bound(t,t)):r.H()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push((function(d,h){let m=h?new ja(h.sequenceNumber,new Fn(ms(h.readTime),new G(mr(h.documentKey)),h.largestBatchId)):ja.empty(),y=d.fields.map(([C,N])=>new es(Et.fromServerFormat(C),N));return new as(d.indexId,d.collectionGroup,y,m)})(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:le(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=il(e),o=Sa(e);return this.Wn(e).next(s=>i.H(nE,IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,c=>o.put(fx(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,c=>this.Qn(e,i,c).next(l=>{let d=this.Gn(o,c);return l.isEqual(d)?M.resolve():this.zn(e,o,c,l,d)}))))})}jn(e,t,r,i){return Aa(e).put(i.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,i){return Aa(e).delete(i.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){let i=Aa(e),o=new Ge(Ni);return i.ee({index:sM,range:IDBKeyRange.only([r.indexId,this.uid,lp(this.Kn(r,t))])},(s,a)=>{o=o.add(new Zo(r.indexId,t,yx(a.arrayValue),yx(a.directionalValue)))}).next(()=>o)}Gn(e,t){let r=new Ge(Ni),i=this.kn(t,e);if(i==null)return r;let o=Y_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Dl(s))for(let a of s.arrayValue.values||[])r=r.add(new Zo(t.indexId,e.key,this.Nn(a),i))}else r=r.add(new Zo(t.indexId,e.key,ep,i));return r}zn(e,t,r,i,o){V(_x,"Updating index entries for document '%s'",t.key);let s=[];return(function(c,l,d,h,m){let y=c.getIterator(),C=l.getIterator(),N=ba(y),P=ba(C);for(;N||P;){let U=!1,J=!1;if(N&&P){let Q=d(N,P);Q<0?J=!0:Q>0&&(U=!0)}else N!=null?J=!0:U=!0;U?(h(P),P=ba(C)):J?(m(N),N=ba(y)):(N=ba(y),P=ba(C))}})(i,o,Ni,a=>{s.push(this.jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),M.waitFor(s)}Wn(e){let t=1;return Sa(e).ee({index:oM,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ni(s,a)).filter((s,a,c)=>!a||Ni(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ni(s,e),c=Ni(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Jn(i[s],i[s+1]))return[];let a=i[s].An(this.uid,ep,G.empty()),c=i[s+1].An(this.uid,ep,G.empty());o.push(IDBKeyRange.bound(a,c))}return o}Jn(e,t){return Ni(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ix)}getMinOffset(e,t){return M.mapArray(this.vn(t),r=>this.Fn(e,r).next(i=>i||z(44426))).next(Ix)}};function Ex(n){return bt(n,Il)}function Aa(n){return bt(n,fl)}function il(n){return bt(n,FI)}function Sa(n){return bt(n,dl)}function Ix(n){Y(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;OI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fn(e.readTime,e.documentKey,t)}var wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oR=41943040,ln=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function sR(n,e,t){let r=n.store(Yn),i=n.store(Ba),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.ee({range:s},(d,h,m)=>(a++,m.delete()));o.push(c.next(()=>{Y(a===1,47070,{batchId:t.batchId})}));let l=[];for(let d of t.mutations){let h=nM(e,d.key.path,t.batchId);o.push(i.delete(h)),l.push(d.key)}return M.waitFor(o).next(()=>l)}function Bp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z(14731);e=n.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(oR,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var Hp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,t,r,i){Y(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).ee({index:Jo,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Oa(e),s=Oi(e);return s.add({}).next(a=>{Y(typeof a=="number",49019);let c=new Al(a,t,r,i),l=(function(y,C,N){let P=N.baseMutations.map(J=>kp(y.yt,J)),U=N.mutations.map(J=>kp(y.yt,J));return{userId:C,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:P,mutations:U}})(this.serializer,this.userId,c),d=[],h=new Ge((m,y)=>le(m.canonicalString(),y.canonicalString()));for(let m of i){let y=nM(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,Ij))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),M.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Oi(e).get(t).next(r=>r?(Y(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Qo(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?M.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Oi(e).ee({index:Jo,range:i},(s,a,c)=>{a.userId===this.userId&&(Y(a.batchId>=r,47524,{Yn:r}),o=Qo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=ns;return Oi(e).ee({index:Jo,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,ns],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).H(Jo,t).next(r=>r.map(i=>Qo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=ip(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Oa(e).ee({range:i},(s,a,c)=>{let[l,d,h]=s,m=mr(d);if(l===this.userId&&t.path.isEqual(m))return Oi(e).get(h).next(y=>{if(!y)throw z(61480,{er:s,batchId:h});Y(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),o.push(Qo(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(le),i=[];return t.forEach(o=>{let s=ip(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Oa(e).ee({range:a},(l,d,h)=>{let[m,y,C]=l,N=mr(y);m===this.userId&&o.path.isEqual(N)?r=r.add(C):h.done()});i.push(c)}),M.waitFor(i).next(()=>this.tr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=ip(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ge(le);return Oa(e).ee({range:s},(c,l,d)=>{let[h,m,y]=c,C=mr(m);h===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(y)):d.done()}).next(()=>this.tr(e,a))}tr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Oi(e).get(o).next(s=>{if(s===null)throw z(35274,{batchId:o});Y(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Qo(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sR(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.nr(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Oa(e).ee({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=mr(o[1]);i.push(c)}else a.done()}).next(()=>{Y(i.length===0,56720,{rr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return aR(e,this.userId,t)}ir(e){return cR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ns,lastStreamToken:""})}};function aR(n,e,t){let r=ip(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Oa(n).ee({range:o,Y:!0},(a,c,l)=>{let[d,h,m]=a;d===e&&h===i&&(s=!0),l.done()}).next(()=>s)}function Oi(n){return bt(n,Yn)}function Oa(n){return bt(n,Ba)}function cR(n){return bt(n,_l)}var Xa=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var VE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next(t=>{let r=new Xa(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.ur(e).next(t=>ne.fromTimestamp(new Ke(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.ur(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.ur(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.cr(e,i)))}addTargetData(e,t){return this.lr(e,t).next(()=>this.ur(e).next(r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ta(e).delete(t.targetId)).next(()=>this.ur(e)).next(r=>(Y(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ta(e).ee((s,a)=>{let c=ul(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ta(e).ee((r,i)=>{let o=ul(i);t(o)})}ur(e){return Cx(e).get(Ip).next(t=>(Y(t!==null,2888),t))}cr(e,t){return Cx(e).put(Ip,t)}lr(e,t){return Ta(e).put(nR(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ls(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ta(e).ee({range:i,index:iM},(s,a,c)=>{let l=ul(a);Ul(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ki(e);return t.forEach(s=>{let a=Yt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=ki(e);return M.forEach(t,o=>{let s=Yt(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ki(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ki(e),o=_e();return i.ee({range:r,Y:!0},(s,a,c)=>{let l=mr(s[1]),d=new G(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Yt(t.path),i=IDBKeyRange.bound([r],[Wx(r)],!1,!0),o=0;return ki(e).ee({index:kI,Y:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}At(e,t){return Ta(e).get(t).next(r=>r?ul(r):null)}};function Ta(n){return bt(n,Ha)}function Cx(n){return bt(n,rs)}function ki(n){return bt(n,$a)}var bx="LruGarbageCollector",uR=1048576;function Dx([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var jE=class{constructor(e){this.Pr=e,this.buffer=new Ge(Dx),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Dx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},$p=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){V(bx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zi(t)?V(bx,"Ignoring IndexedDB error during garbage collection: ",t):await qi(t)}await this.Ar(3e5)})}},UE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(In.ce);let r=new jE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(wx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wx):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),xa()<=Se.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function lR(n,e){return new UE(n,e)}var BE=class{constructor(e,t){this.db=e,this.garbageCollector=lR(this,t)}dr(e){let t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,(r,i)=>t(i))}addReference(e,t,r){return tp(e,r)}removeReference(e,t,r){return tp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tp(e,t)}wr(e,t){return(function(i,o){let s=!1;return cR(i).te(a=>aR(i,a,o).next(c=>(c&&(s=!0),M.resolve(!c)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.yr(e,(s,a)=>{if(a<=t){let c=this.wr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ne.min()),ki(e).delete((function(h){return[0,Yt(h.path)]})(s))))});i.push(c)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tp(e,t)}yr(e,t){let r=ki(e),i,o=In.ce;return r.ee({index:kI},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==In.ce&&t(new G(mr(i)),o),o=l,i=c):o=In.ce}).next(()=>{o!==In.ce&&t(new G(mr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function tp(n,e){return ki(n).put((function(r,i){return{targetId:0,path:Yt(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var Gp=class{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var HE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qo(e).put(r)}removeEntry(e,t,r){return qo(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Lp(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=Vt.newInvalidDocument(t);return qo(e).ee({index:op,range:IDBKeyRange.only(ol(t))},(i,o)=>{r=this.Sr(t,o)}).next(()=>r)}Dr(e,t){let r={size:0,document:Vt.newInvalidDocument(t)};return qo(e).ee({index:op,range:IDBKeyRange.only(ol(t))},(i,o)=>{r={document:this.Sr(t,o),size:Bp(o)}}).next(()=>r)}getEntries(e,t){let r=Cn();return this.Cr(e,t,(i,o)=>{let s=this.Sr(i,o);r=r.insert(i,s)}).next(()=>r)}vr(e,t){let r=Cn(),i=new Qe(G.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Sr(o,s);r=r.insert(o,a),i=i.insert(o,Bp(s))}).next(()=>({documents:r,Fr:i}))}Cr(e,t,r){if(t.isEmpty())return M.resolve();let i=new Ge(Tx);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ol(i.first()),ol(i.last())),s=i.getIterator(),a=s.getNext();return qo(e).ee({index:op,range:o},(c,l,d)=>{let h=G.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Tx(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.j(ol(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Lp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qo(e).H(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Cn();for(let h of l){let m=this.Sr(G.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(Hl(t,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Cn(),s=Sx(t,r),a=Sx(t,Fn.max());return qo(e).ee({index:rM,range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let h=this.Sr(G.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(h.key,h),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new $E(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ax(e).get(tE).next(t=>(Y(!!t,20021),t))}br(e,t){return Ax(e).put(tE,t)}Sr(e,t){if(t){let r=CU(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return Vt.newInvalidDocument(e)}};function dR(n){return new HE(n)}var $E=class extends Gp{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Zn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ge((o,s)=>le(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Or.get(o);if(t.push(this.Mr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=lx(this.Mr.serializer,s);i=i.add(o.path.popLast());let l=Bp(c);r+=l-a.size,t.push(this.Mr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=lx(this.Mr.serializer,s.convertToNoDocument(ne.min()));t.push(this.Mr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Mr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next(r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Mr.vr(e,t).next(({documents:r,Fr:i})=>(i.forEach((o,s)=>{this.Or.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Ax(n){return bt(n,El)}function qo(n){return bt(n,Ep)}function ol(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Sx(n,e){let t=e.documentKey.path.toArray();return[n,Lp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Tx(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=le(t[o],r[o]),i)return i;return i=le(t.length,r.length),i||(i=le(t[t.length-2],r[r.length-2]),i||le(t[t.length-1],r[r.length-1]))}var GE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var qp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ml(r.mutation,i,wn.empty(),Ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=gr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=cl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=gr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Cn(),s=pl(),a=(function(){return pl()})();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Jn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),ml(d.mutation,l,d.mutation.getFieldMask(),Ke.now())):s.set(l.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>a.set(l,new GE(d,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=pl(),i=new Qe((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||wn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=PM();d.forEach(m=>{if(!o.has(m)){let y=UM(t.get(m),r.get(m));y!==null&&h.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Qj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(gr()),a=Va,c=o;return s.next(l=>M.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,_e())).next(d=>({batchId:a,changes:OM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=cl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=cl();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{let l=(function(h,m){return new Ka(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,m)=>{s=s.insert(h,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Vt.newInvalidDocument(d)))});let a=cl();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&ml(d.mutation,l,wn.empty(),Ke.now()),Hl(t,l)&&(a=a.insert(c,l))}),a})}};var qE=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return M.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:rn(i.createTime)}})(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:qI(i.bundledQuery),readTime:rn(i.readTime)}})(t)),M.resolve()}};var zE=class{constructor(){this.overlays=new Qe(G.comparator),this.Lr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=gr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=gr(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Qe((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=gr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=gr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return M.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sl(t,r));let o=this.Lr.get(t);o===void 0&&(o=_e(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var WE=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Rl=class{constructor(){this.kr=new Ge(_t.Kr),this.qr=new Ge(_t.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new _t(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new _t(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new G(new Ve([])),r=new _t(t,e),i=new _t(t,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new G(new Ve([])),r=new _t(t,e),i=new _t(t,e+1),o=_e();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new _t(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},_t=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return G.comparator(e.key,t.key)||le(e.Hr,t.Hr)}static Ur(e,t){return le(e.Hr,t.Hr)||G.comparator(e.key,t.key)}};var KE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ge(_t.Kr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Al(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Jr=this.Jr.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ns:this.Yn-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new _t(t,0),i=new _t(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(le);return t.forEach(i=>{let o=new _t(i,0),s=new _t(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),M.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new _t(new G(o),0),a=new Ge(le);return this.Jr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),M.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Y(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return M.forEach(t.mutations,i=>{let o=new _t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new _t(t,0),i=this.Jr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var QE=class{constructor(e){this.ti=e,this.docs=(function(){return new Qe(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let r=Cn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Cn(),s=t.path,a=new G(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||OI(Jx(d),r)<=0||(i.has(d.key)||Hl(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z(9500)}ni(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YE(this)}getSize(e){return M.resolve(this.size)}},YE=class extends Gp{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var ZE=class{constructor(e){this.persistence=e,this.ri=new Zn(t=>ls(t),Ul),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.ii=0,this.si=new Rl,this.targetCount=0,this.oi=Xa._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),M.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.lr(t),M.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.si.containsKey(t))}};var Nl=class{constructor(e,t){this._i={},this.overlays={},this.ai=new In(0),this.ui=!1,this.ui=!0,this.ci=new WE,this.referenceDelegate=e(this),this.li=new ZE(this),this.indexManager=new FE,this.remoteDocumentCache=(function(i){return new QE(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new Fp(t),this.Pi=new qE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new KE(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new JE(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return M.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},JE=class extends yp{constructor(e){super(),this.currentSequenceNumber=e}},zp=class n{constructor(e){this.persistence=e,this.Ri=new Rl,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw z(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.di,r=>{let i=G.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return M.or([()=>M.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Wp=class n{constructor(e,t){this.persistence=e,this.fi=new Zn(r=>Yt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lR(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return M.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),M.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ap(e.data.value)),t}wr(e,t,r){return M.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var XE=class{constructor(e){this.serializer=e}k(e,t,r,i){let o=new vp("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(jl)})(e),(function(c){c.createObjectStore(_l,{keyPath:Ej}),c.createObjectStore(Yn,{keyPath:H1,autoIncrement:!0}).createIndex(Jo,$1,{unique:!0}),c.createObjectStore(Ba)})(e),xx(e),(function(c){c.createObjectStore(Wo)})(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore($a),c.deleteObjectStore(Ha),c.deleteObjectStore(rs)})(e),xx(e)),s=s.next(()=>(function(c){let l=c.store(rs),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return l.put(Ip,d)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(c,l){return l.store(Yn).H().next(h=>{c.deleteObjectStore(Yn),c.createObjectStore(Yn,{keyPath:H1,autoIncrement:!0}).createIndex(Jo,$1,{unique:!0});let m=l.store(Yn),y=h.map(C=>m.put(C));return M.waitFor(y)})})(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(Ga,{keyPath:xj})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.gi(o))),r<6&&i>=6&&(s=s.next(()=>((function(c){c.createObjectStore(El)})(e),this.pi(o)))),r<7&&i>=7&&(s=s.next(()=>this.yi(o))),r<8&&i>=8&&(s=s.next(()=>this.wi(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(gm,{keyPath:Mj})})(e),(function(c){c.createObjectStore(ym,{keyPath:Rj})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(vm,{keyPath:Vj});l.createIndex(rE,jj,{unique:!1}),l.createIndex(aM,Uj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(c){let l=c.createObjectStore(Ep,{keyPath:wj});l.createIndex(op,Cj),l.createIndex(rM,bj)})(e)).next(()=>this.Si(e,o)).next(()=>e.deleteObjectStore(Wo))),r<14&&i>=14&&(s=s.next(()=>this.Di(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(c){c.createObjectStore(FI,{keyPath:Nj,autoIncrement:!0}).createIndex(nE,Oj,{unique:!1}),c.createObjectStore(dl,{keyPath:Pj}).createIndex(oM,kj,{unique:!1}),c.createObjectStore(fl,{keyPath:Fj}).createIndex(sM,Lj,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(dl).clear()}).next(()=>{t.objectStore(fl).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(LI,{keyPath:Bj})})(e)})),r<18&&i>=18&&y_()&&(s=s.next(()=>{t.objectStore(dl).clear()}).next(()=>{t.objectStore(fl).clear()})),s}pi(e){let t=0;return e.store(Wo).ee((r,i)=>{t+=Bp(i)}).next(()=>{let r={byteSize:t};return e.store(El).put(tE,r)})}gi(e){let t=e.store(_l),r=e.store(Yn);return t.H().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,ns],[o.userId,o.lastAcknowledgedBatchId]);return r.H(Jo,s).next(a=>M.forEach(a,c=>{Y(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=Qo(this.serializer,c);return sR(e,o.userId,l).next(()=>{})}))}))}yi(e){let t=e.store($a),r=e.store(Wo);return e.store(rs).get(Ip).next(i=>{let o=[];return r.ee((s,a)=>{let c=new Ve(s),l=(function(h){return[0,Yt(h)]})(c);o.push(t.get(l).next(d=>d?M.resolve():(h=>t.put({targetId:0,path:Yt(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(o))})}wi(e,t){e.createObjectStore(Il,{keyPath:Tj});let r=t.store(Il),i=new Ml,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Yt(c)})}};return t.store(Wo).ee({Y:!0},(s,a)=>{let c=new Ve(s);return o(c.popLast())}).next(()=>t.store(Ba).ee({Y:!0},([s,a,c],l)=>{let d=mr(a);return o(d.popLast())}))}bi(e){let t=e.store(Ha);return t.ee((r,i)=>{let o=ul(i),s=nR(this.serializer,o);return t.put(s)})}Si(e,t){let r=t.store(Wo),i=[];return r.ee((o,s)=>{let a=t.store(Ep),c=(function(h){return h.document?new G(Ve.fromString(h.document.name).popFirst(5)):h.noDocument?G.fromSegments(h.noDocument.path):h.unknownDocument?G.fromSegments(h.unknownDocument.path):z(36783)})(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}Di(e,t){let r=t.store(Yn),i=dR(this.serializer),o=new Nl(zp.Vi,this.serializer.yt);return r.H().next(s=>{let a=new Map;return s.forEach(c=>{let l=a.get(c.userId)??_e();Qo(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),M.forEach(a,(c,l)=>{let d=new xt(l),h=Vp.wt(this.serializer,d),m=o.getIndexManager(d),y=Hp.wt(d,this.serializer,m,o.referenceDelegate);return new qp(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new wl(t,In.ce),c).next()})})}};function xx(n){n.createObjectStore($a,{keyPath:Aj}).createIndex(kI,Sj,{unique:!0}),n.createObjectStore(Ha,{keyPath:"targetId"}).createIndex(iM,Dj,{unique:!0}),n.createObjectStore(rs)}var Pi="IndexedDbPersistence",U_=18e5,B_=5e3,H_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",AU="main",eI=class n{constructor(e,t,r,i,o,s,a,c,l,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=o,this.window=s,this.document=a,this.Fi=l,this.Mi=d,this.xi=h,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=m=>Promise.resolve(),!n.v())throw new $(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BE(this,i),this.Ki=t+AU,this.serializer=new Fp(c),this.qi=new Ua(this.Ki,this.xi,new XE(this.serializer)),this.ci=new xE,this.li=new VE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dR(this.serializer),this.Pi=new TE,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&ct(Pi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(k.FAILED_PRECONDITION,H_);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.li.getHighestSequenceNumber(e))}).then(e=>{this.ai=new In(e,this.Fi)}).then(()=>{this.ui=!0}).catch(e=>(this.qi&&this.qi.close(),Promise.reject(e)))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget(async()=>{this.started&&await this.$i()}))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>np(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ji(e).next(t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Ji(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(zi(e))return V(Pi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V(Pi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable(()=>this.ki(e)),this.isPrimary=e})}ji(e){return sl(e).get(Ca).next(t=>M.resolve(this.Xi(t)))}Yi(e){return np(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,U_)){this.Li=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=bt(t,Ga);return r.H().next(i=>{let o=this.ns(i,U_),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.$i().then(()=>this.es()).then(()=>this.Gi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?M.resolve(!0):sl(e).get(Ca).next(t=>{if(t!==null&&this.ts(t.leaseTimestampMs,B_)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new $(k.FAILED_PRECONDITION,H_);return!1}}return!(!this.networkEnabled||!this.inForeground)||np(e).H().next(r=>this.ns(r,B_).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&V(Pi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[jl,Ga],e=>{let t=new wl(e,In.ce);return this.Ji(t).next(()=>this.Yi(t))}),this.qi.close(),this.ls()}ns(e,t){return e.filter(r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId))}hs(){return this.runTransaction("getActiveClients","readonly",e=>np(e).H().next(t=>this.ns(t,U_).map(r=>r.clientId)))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Hp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LE(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Vp.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){V(Pi,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?Gj:c===17?dM:c===16?$j:c===15?VI:c===14?lM:c===13?uM:c===12?Hj:c===11?cM:void z(60245)})(this.xi),s;return this.qi.runTransaction(e,i,o,a=>(s=new wl(a,this.ai?this.ai.next():In.ce),t==="readwrite-primary"?this.ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)),new $(k.FAILED_PRECONDITION,Xx);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ps(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ps(e){return sl(e).get(Ca).next(t=>{if(t!==null&&this.ts(t.leaseTimestampMs,B_)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $(k.FAILED_PRECONDITION,H_)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sl(e).put(Ca,t)}static v(){return Ua.v()}Ji(e){let t=sl(e);return t.get(Ca).next(r=>this.Xi(r)?(V(Pi,"Releasing primary lease."),t.delete(Ca)):M.resolve())}ts(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.$i()))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();let e=/(?:Version|Mobile)\/1[456]/;g_()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{let t=this.Ui?.getItem(this.rs(e))!==null;return V(Pi,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return ct(Pi,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function sl(n){return bt(n,jl)}function np(n){return bt(n,Ga)}function fR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var tI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=_e(),i=_e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var nI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kp=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return g_()?8:eM(Xu())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nI;return this.ys(e,t,s).next(a=>{if(o.result=a,this.As)return this.ws(e,t,s,a.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(xa()<=Se.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(xa()<=Se.DEBUG&&V("QueryEngine","Query:",Ma(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(xa()<=Se.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(t))):M.resolve())}gs(e,t){if(tx(t))return M.resolve(null);let r=bn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xp(t,null,"F"),r=bn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=_e(...o);return this.fs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ss(t,l,s,c.readTime)?this.gs(e,xp(t,null,"F")):this.Ds(e,l,t,c)}))})))}ps(e,t,r,i){return tx(t)||i.isEqual(ne.min())?M.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ss(t,s,r,i)?M.resolve(null):(xa()<=Se.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ma(t)),this.Ds(e,s,t,Zx(i,Va)).next(a=>a))})}bs(e,t){let r=new Ge(RM(e));return t.forEach((i,o)=>{Hl(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return xa()<=Se.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ma(t)),this.fs.getDocumentsMatchingQuery(e,t,Fn.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var WI="LocalStore",SU=3e8,rI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Qe(le),this.Fs=new Zn(o=>ls(o),Ul),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qp(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function hR(n,e,t,r){return new rI(n,e,t,r)}async function pR(n,e){let t=K(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=_e();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ns:l,removedBatchIds:s,addedBatchIds:a}))})})}function TU(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,d){let h=l.batch,m=h.keys(),y=M.resolve();return m.forEach(C=>{y=y.next(()=>d.getEntry(c,C)).next(N=>{let P=l.docVersions.get(C);Y(P!==null,48541),N.version.compareTo(P)<0&&(h.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),d.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mR(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function xU(n,e){let t=K(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((d,h)=>{let m=i.get(h);if(!m)return;a.push(t.li.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.li.addMatchingKeys(o,d.addedDocuments,h)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(lt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),(function(N,P,U){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=SU?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(m,y,d)&&a.push(t.li.updateTargetData(o,y))});let c=Cn(),l=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(MU(o,s,e.documentUpdates).next(d=>{c=d.Bs,l=d.Ls})),!r.isEqual(ne.min())){let d=t.li.getLastRemoteSnapshotVersion(o).next(h=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.vs=i,o))}function MU(n,e,t){let r=_e(),i=_e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Cn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):V(WI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Bs:s,Ls:i}})}function RU(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ns),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qp(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.li.allocateTargetId(r).next(s=>(i=new Ja(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function ec(n,e,t){let r=K(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!zi(s))throw s;V(WI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function iI(n,e,t){let r=K(n),i=ne.min(),o=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,d){let h=K(c),m=h.Fs.get(d);return m!==void 0?M.resolve(h.vs.get(m)):h.li.getTargetData(l,d)})(r,s,bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:_e())).next(a=>(vR(r,MM(e),a),{documents:a,ks:o})))}function gR(n,e){let t=K(n),r=K(t.li),i=t.vs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.At(o,e).next(s=>s?s.target:null))}function yR(n,e){let t=K(n),r=t.Ms.get(e)||ne.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.xs.getAllFromCollectionGroup(i,e,Zx(r,Va),Number.MAX_SAFE_INTEGER)).then(i=>(vR(t,e,i),i))}function vR(n,e,t){let r=n.Ms.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var _R="firestore_clients";function Mx(n,e){return`${_R}_${n}_${e}`}var ER="firestore_mutations";function Rx(n,e,t){let r=`${ER}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var IR="firestore_targets";function $_(n,e){return`${IR}_${n}_${e}`}var pr="SharedClientState",Yp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static $s(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new $(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ct(pr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},gl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new $(r.error.code,r.error.message))),o?new n(e,r.state,i):(ct(pr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=HI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=tM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ct(pr,`Failed to parse client data for instance '${e}': ${t}`),null)}},oI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ct(pr,`Failed to parse online state: ${e}`),null)}},Ol=class{constructor(){this.activeTargetIds=HI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},yl=class{constructor(e,t,r,i,o){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Qe(le),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=Mx(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Ol),this.eo=new RegExp(`^${_R}_${s}_([^_]*)$`),this.no=new RegExp(`^${ER}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${IR}_${s}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){let e=await this.syncEngine.hs();for(let r of e){if(r===this.zs)continue;let i=this.getItem(Mx(this.persistenceKey,r));if(i){let o=Zp.$s(r,i);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();let t=this.storage.getItem(this.io);if(t){let r=this._o(t);r&&this.ao(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem($_(this.persistenceKey,e));if(i){let o=gl.$s(e,i);o&&(r=o.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.lo(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return V(pr,"READ",e,t),t}setItem(e,t){V(pr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){V(pr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(V(pr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){let r=this.Eo(t.key);return this.Ro(r,null)}{let r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){let r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){let r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){let r=(function(o){let s=In.ce;if(o!=null)try{let a=JSON.parse(o);Y(typeof a=="number",30636,{yo:o}),s=a}catch(a){ct(pr,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==In.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){let r=this.wo(t.newValue);await Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)})}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){let i=new Yp(this.currentUser,e,t,r),o=Rx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}lo(e){let t=Rx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){let t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){let i=$_(this.persistenceKey,e),o=new gl(e,t,r);this.setItem(i,o.Ws())}Io(e){let t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){let t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){let r=this.Eo(e);return Zp.$s(r,t)}Vo(e,t){let r=this.no.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Yp.$s(new xt(o),i,t)}fo(e,t){let r=this.ro.exec(e),i=Number(r[1]);return gl.$s(i,t)}_o(e){return oI.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);V(pr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Js.insert(e,t):this.Js.remove(e),i=this.uo(this.Js),o=this.uo(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Js=r})}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=HI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Jp=class{constructor(){this.vo=new Ol,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ol,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sI=class{Mo(e){}shutdown(){}};var Nx="ConnectivityMonitor",Xp=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){V(Nx,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){V(Nx,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var rp=null;function aI(){return rp===null?rp=(function(){return 268435456+Math.round(2147483648*Math.random())})():rp++,"0x"+rp.toString(16)}var G_="RestConnection",NU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},cI=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===bp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=aI(),a=this.Qo(e,t.toUriEncodedString());V(G_,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,o);let{host:l}=new URL(a),d=m_(l);return this.zo(e,a,c,r,d).then(h=>(V(G_,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Li(G_,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=NU[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var uI=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Wt="WebChannelConnection",al=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},em=class n extends cI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=F_();al(e,k_.STAT_EVENT,t=>{t.stat===Jh.PROXY?V(Wt,"STAT_EVENT: detected buffering proxy"):t.stat===Jh.NOPROXY&&V(Wt,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let s=aI();return new Promise((a,c)=>{let l=new O_;l.setWithCredentials(!0),l.listenOnce(P_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case nl.NO_ERROR:let h=l.getResponseJson();V(Wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case nl.TIMEOUT:V(Wt,`RPC '${e}' ${s} timed out`),c(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case nl.HTTP_ERROR:let m=l.getStatus();if(V(Wt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=(function(U){let J=U.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(J)>=0?J:k.UNKNOWN})(C.status);c(new $(N,C.message))}else c(new $(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new $(k.UNAVAILABLE,"Connection failed."));break;default:z(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{V(Wt,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);V(Wt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}T_(e,t,r){let i=aI(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let l=o.join("");V(Wt,`Creating RPC '${e}' stream ${i}: ${l}`,a);let d=s.createWebChannel(l,a);this.I_(d);let h=!1,m=!1,y=new uI({Ho:C=>{m?V(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(h||(V(Wt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),V(Wt,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},Jo:()=>d.close()});return al(d,wa.EventType.OPEN,()=>{m||(V(Wt,`RPC '${e}' stream ${i} transport opened.`),y.i_())}),al(d,wa.EventType.CLOSE,()=>{m||(m=!0,V(Wt,`RPC '${e}' stream ${i} transport closed`),y.o_(),this.E_(d))}),al(d,wa.EventType.ERROR,C=>{m||(m=!0,Li(Wt,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),y.o_(new $(k.UNAVAILABLE,"The operation could not be completed")))}),al(d,wa.EventType.MESSAGE,C=>{if(!m){let N=C.data[0];Y(!!N,16349);let P=N,U=P?.error||P[0]?.error;if(U){V(Wt,`RPC '${e}' stream ${i} received error:`,U);let J=U.status,Q=(function(xe){let b=vt[xe];if(b!==void 0)return HM(b)})(J),Re=U.message;J==="NOT_FOUND"&&Re.includes("database")&&Re.includes("does not exist")&&Re.includes(this.databaseId.database)&&Li(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Q===void 0&&(Q=k.INTERNAL,Re="Unknown error status: "+J+" with message "+U.message),m=!0,y.o_(new $(Q,Re)),d.close()}else V(Wt,`RPC '${e}' stream ${i} received:`,N),y.__(N)}}),n.u_(),setTimeout(()=>{y.s_()},0),y}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return L_()}};function OU(n){return new em(n)}function wR(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function $l(n){return new CE(n,!0)}em.c_=!1;var tm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var Ox="PersistentStream",nm=class{constructor(e,t,r,i,o,s,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tm(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(ct(t.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new $(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return V(Ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(V(Ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lI=class extends nm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=gU(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?rn(s.readTime):ne.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=AE(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=Sp(c)?{documents:QM(o,c)}:{query:YM(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=$M(o,s.resumeToken);let l=bE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Za(o,s.snapshotVersion.toTimestamp());let l=bE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=vU(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=AE(this.serializer),t.removeTarget=e,this.K_(t)}},dI=class extends nm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Y(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Y(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=yU(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=AE(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>kp(this.serializer,r))};this.K_(t)}};var fI=class{},hI=class extends fI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,DE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(k.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.jo(e,DE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(k.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function PU(n,e,t,r){return new hI(n,e,t,r)}var pI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ct(t),this.aa=!1):V("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var gs="RemoteStore",mI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(async()=>{_s(this)&&(V(gs,"Restarting streams for network reachability change."),await(async function(c){let l=K(c);l.Ea.add(4),await Gl(l),l.Va.set("Unknown"),l.Ea.delete(4),await bm(l)})(this))})}),this.Va=new pI(r,i)}};async function bm(n){if(_s(n))for(let e of n.Ra)await e(!0)}async function Gl(n){for(let e of n.Ra)await e(!1)}function Dm(n,e){let t=K(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),YI(t)?QI(t):uc(t).O_()&&KI(t,e))}function tc(n,e){let t=K(n),r=uc(t);t.Ia.delete(e),r.O_()&&CR(t,e),t.Ia.size===0&&(r.O_()?r.L_():_s(t)&&t.Va.set("Unknown"))}function KI(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}uc(n).Z_(e)}function CR(n,e){n.da.$e(e),uc(n).X_(e)}function QI(n){n.da=new wE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),uc(n).start(),n.Va.ua()}function YI(n){return _s(n)&&!uc(n).x_()&&n.Ia.size>0}function _s(n){return K(n).Ea.size===0}function bR(n){n.da=void 0}async function kU(n){n.Va.set("Online")}async function FU(n){n.Ia.forEach((e,t)=>{KI(n,e)})}async function LU(n,e){bR(n),YI(n)?(n.Va.ha(e),QI(n)):n.Va.set("Unknown")}async function VU(n,e,t){if(n.Va.set("Online"),e instanceof Np&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){V(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rm(n,r)}else if(e instanceof Fa?n.da.Xe(e):e instanceof Rp?n.da.st(e):n.da.tt(e),!t.isEqual(ne.min()))try{let r=await mR(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.da.Tt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ia.get(l);d&&o.Ia.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.Ia.get(c);if(!d)return;o.Ia.set(c,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),CR(o,c);let h=new Ja(d.target,c,l,d.sequenceNumber);KI(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){V(gs,"Failed to raise snapshot:",r),await rm(n,r)}}async function rm(n,e,t){if(!zi(e))throw e;n.Ea.add(1),await Gl(n),n.Va.set("Offline"),t||(t=()=>mR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{V(gs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await bm(n)})}function DR(n,e){return e().catch(t=>rm(n,t,e))}async function cc(n){let e=K(n),t=$i(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ns;for(;jU(e);)try{let i=await RU(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,UU(e,i)}catch(i){await rm(e,i)}AR(e)&&SR(e)}function jU(n){return _s(n)&&n.Ta.length<10}function UU(n,e){n.Ta.push(e);let t=$i(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function AR(n){return _s(n)&&!$i(n).x_()&&n.Ta.length>0}function SR(n){$i(n).start()}async function BU(n){$i(n).ra()}async function HU(n){let e=$i(n);for(let t of n.Ta)e.ea(t.mutations)}async function $U(n,e,t){let r=n.Ta.shift(),i=_E.from(r,e,t);await DR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await cc(n)}async function GU(n,e){e&&$i(n).Y_&&await(async function(r,i){if((function(s){return cU(s)&&s!==k.ABORTED})(i.code)){let o=r.Ta.shift();$i(r).B_(),await DR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await cc(r)}})(n,e),AR(n)&&SR(n)}async function Px(n,e){let t=K(n);t.asyncQueue.verifyOperationInProgress(),V(gs,"RemoteStore received new credentials");let r=_s(t);t.Ea.add(3),await Gl(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bm(t)}async function gI(n,e){let t=K(n);e?(t.Ea.delete(2),await bm(t)):e||(t.Ea.add(2),await Gl(t),t.Va.set("Unknown"))}function uc(n){return n.ma||(n.ma=(function(t,r,i){let o=K(t);return o.sa(),new lI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:kU.bind(null,n),Yo:FU.bind(null,n),t_:LU.bind(null,n),J_:VU.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),YI(n)?QI(n):n.Va.set("Unknown")):(await n.ma.stop(),bR(n))})),n.ma}function $i(n){return n.fa||(n.fa=(function(t,r,i){let o=K(t);return o.sa(),new dI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BU.bind(null,n),t_:GU.bind(null,n),ta:HU.bind(null,n),na:$U.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await cc(n)):(await n.fa.stop(),n.Ta.length>0&&(V(gs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var yI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZI(n,e){if(ct("AsyncQueue",`${e}: ${n}`),zi(n))return new $(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Pl=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=cl(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var im=class{constructor(){this.ga=new Qe(G.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):z(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ys=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Pl.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vI=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},_I=class{constructor(){this.queries=kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=K(t),o=i.queries;i.queries=kx(),o.forEach((s,a)=>{for(let c of a.ba)c.onError(r)})})(this,new $(k.ABORTED,"Firestore shutting down"))}};function kx(){return new Zn(n=>xM(n),Cm)}async function qU(n,e){let t=K(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new vI,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=ZI(s,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&JI(t)}async function zU(n,e){let t=K(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WU(n,e){let t=K(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ba)a.Fa(i)&&(r=!0);s.wa=i}}r&&JI(t)}function KU(n,e,t){let r=K(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function JI(n){n.Ca.forEach(e=>{e.next()})}var EI,Fx;(Fx=EI||(EI={})).Ma="default",Fx.Cache="cache";var II=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ys(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==EI.Cache}};var om=class{constructor(e){this.key=e}},sm=class{constructor(e){this.key=e}},wI=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_e(),this.mutatedKeys=_e(),this.eu=RM(e),this.tu=new Pl(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new im,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let m=i.get(d),y=Hl(this.query,h)?h:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),P=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),P=!0):this.su(m,y)||(r.track({type:2,doc:y}),P=!0,(c&&this.eu(y,c)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(c||l)&&(a=!0)),P&&(y?(s=s.add(y),o=N?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Ss:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((d,h)=>(function(y,C){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{Vt:P})}};return N(y)-N(C)})(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,l=c!==this.Xa;return this.Xa=c,s.length!==0||l?{snapshot:new ys(this.query,e.tu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new im,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new sm(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new om(r))}),t}cu(e){this.Za=e.ks,this.Ya=_e();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ys.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},lc="SyncEngine",CI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bI=class{constructor(e){this.key=e,this.hu=!1}},DI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Zn(a=>xM(a),Cm),this.Iu=new Map,this.Eu=new Set,this.Ru=new Qe(G.comparator),this.Au=new Map,this.Vu=new Rl,this.du={},this.mu=new Map,this.fu=Xa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function QU(n,e,t=!0){let r=Am(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await TR(r,e,t,!0),i}async function YU(n,e){let t=Am(n);await TR(t,e,!0,!1)}async function TR(n,e,t,r){let i=await Qp(n.localStore,bn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await XI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Dm(n.remoteStore,i),a}async function XI(n,e,t,r,i){n.pu=(h,m,y)=>(async function(N,P,U,J){let Q=P.view.ru(U);Q.Ss&&(Q=await iI(N.localStore,P.query,!1).then(({documents:b})=>P.view.ru(b,Q)));let Re=J&&J.targetChanges.get(P.targetId),Ue=J&&J.targetMismatches.get(P.targetId)!=null,xe=P.view.applyChanges(Q,N.isPrimaryClient,Re,Ue);return AI(N,P.targetId,xe.au),xe.snapshot})(n,h,m,y);let o=await iI(n.localStore,e,!0),s=new wI(e,o.ks),a=s.ru(o.documents),c=xl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);AI(n,t,l.au);let d=new CI(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function ZU(n,e,t){let r=K(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Cm(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ec(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&tc(r.remoteStore,i.targetId),nc(r,i.targetId)}).catch(qi)):(nc(r,i.targetId),await ec(r.localStore,i.targetId,!0))}async function JU(n,e){let t=K(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tc(t.remoteStore,r.targetId))}async function XU(n,e,t){let r=rw(n);try{let i=await(function(s,a){let c=K(s),l=Ke.now(),d=a.reduce((y,C)=>y.add(C.key),_e()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Cn(),N=_e();return c.xs.getEntries(y,d).next(P=>{C=P,C.forEach((U,J)=>{J.isValidDocument()||(N=N.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,C)).next(P=>{h=P;let U=[];for(let J of a){let Q=aU(J,h.get(J.key).overlayedDocument);Q!=null&&U.push(new Jn(J.key,Q,IM(Q.value.mapValue),Qt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,U,a)}).next(P=>{m=P;let U=P.applyToLocalDocumentSet(h,N);return c.documentOverlayCache.saveOverlays(y,P.batchId,U)})}).then(()=>({batchId:m.batchId,changes:OM(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.du[s.currentUser.toKey()];l||(l=new Qe(le)),l=l.insert(a,c),s.du[s.currentUser.toKey()]=l})(r,i.batchId,t),await Ki(r,i.changes),await cc(r.remoteStore)}catch(i){let o=ZI(i,"Failed to persist write");t.reject(o)}}async function xR(n,e){let t=K(n);try{let r=await xU(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Y(s.hu,14607):i.removedDocuments.size>0&&(Y(s.hu,42227),s.hu=!1))}),await Ki(t,r,e)}catch(r){await qi(r)}}function Lx(n,e,t){let r=K(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=K(s);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let m of h.ba)m.va(a)&&(l=!0)}),l&&JI(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eB(n,e,t){let r=K(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Qe(G.comparator);s=s.insert(o,Vt.newNoDocument(o,ne.min()));let a=_e().add(o),c=new Tl(ne.min(),new Map,new Qe(le),s,a);await xR(r,c),r.Ru=r.Ru.remove(o),r.Au.delete(e),nw(r)}else await ec(r.localStore,e,!1).then(()=>nc(r,e,t)).catch(qi)}async function tB(n,e){let t=K(n),r=e.batch.batchId;try{let i=await TU(t.localStore,e);tw(t,r,null),ew(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ki(t,i)}catch(i){await qi(i)}}async function nB(n,e,t){let r=K(n);try{let i=await(function(s,a){let c=K(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Y(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})})(r.localStore,e);tw(r,e,t),ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ki(r,i)}catch(i){await qi(i)}}function ew(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function tw(n,e,t){let r=K(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function nc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||MR(n,r)})}function MR(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(tc(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),nw(n))}function AI(n,e,t){for(let r of t)r instanceof om?(n.Vu.addReference(r.key,e),rB(n,r)):r instanceof sm?(V(lc,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||MR(n,r.key)):z(19791,{wu:r})}function rB(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(V(lc,"New document in limbo: "+t),n.Eu.add(r),nw(n))}function nw(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new G(Ve.fromString(e)),r=n.fu.next();n.Au.set(r,new bI(t)),n.Ru=n.Ru.insert(t,r),Dm(n.remoteStore,new Ja(bn(Bl(t.path)),r,"TargetPurposeLimboResolution",In.ce))}}async function Ki(n,e,t){let r=K(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let d=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=tI.Es(c.targetId,l);o.push(d)}}))}),await Promise.all(s),r.Pu.J_(i),await(async function(c,l){let d=K(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(l,m=>M.forEach(m.Ts,y=>d.persistence.referenceDelegate.addReference(h,m.targetId,y)).next(()=>M.forEach(m.Is,y=>d.persistence.referenceDelegate.removeReference(h,m.targetId,y)))))}catch(h){if(!zi(h))throw h;V(WI,"Failed to update sequence numbers: "+h)}for(let h of l){let m=h.targetId;if(!h.fromCache){let y=d.vs.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);d.vs=d.vs.insert(m,N)}}})(r.localStore,o))}async function iB(n,e){let t=K(n);if(!t.currentUser.isEqual(e)){V(lc,"User change. New user:",e.toKey());let r=await pR(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new $(k.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ki(t,r.Ns)}}function oB(n,e){let t=K(n),r=t.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}async function sB(n,e){let t=K(n),r=await iI(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&AI(t,e.targetId,i.au),i}async function aB(n,e){let t=K(n);return yR(t.localStore,e).then(r=>Ki(t,r))}async function cB(n,e,t,r){let i=K(n),o=await(function(a,c){let l=K(a),d=K(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Xn(h,c).next(m=>m?l.localDocuments.getDocuments(h,m):M.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?await cc(i.remoteStore):t==="acknowledged"||t==="rejected"?(tw(i,e,r||null),ew(i,e),(function(a,c){K(K(a).mutationQueue).nr(c)})(i.localStore,e)):z(6720,"Unknown batchState",{bu:t}),await Ki(i,o)):V(lc,"Cannot apply mutation batch with id: "+e)}async function uB(n,e){let t=K(n);if(Am(t),rw(t),e===!0&&t.gu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=await Vx(t,r.toArray());t.gu=!0,await gI(t.remoteStore,!0);for(let o of i)Dm(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){let r=[],i=Promise.resolve();t.Iu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(nc(t,s),ec(t.localStore,s,!0))),tc(t.remoteStore,s)}),await i,await Vx(t,r),(function(s){let a=K(s);a.Au.forEach((c,l)=>{tc(a.remoteStore,l)}),a.Vu.zr(),a.Au=new Map,a.Ru=new Qe(G.comparator)})(t),t.gu=!1,await gI(t.remoteStore,!1)}}async function Vx(n,e,t){let r=K(n),i=[],o=[];for(let s of e){let a,c=r.Iu.get(s);if(c&&c.length!==0){a=await Qp(r.localStore,bn(c[0]));for(let l of c){let d=r.Tu.get(l),h=await sB(r,d);h.snapshot&&o.push(h.snapshot)}}else{let l=await gR(r.localStore,s);a=await Qp(r.localStore,l),await XI(r,RR(l),s,!1,a.resumeToken)}i.push(a)}return r.Pu.J_(o),i}function RR(n){return SM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lB(n){return(function(t){return K(K(t).persistence).hs()})(K(n).localStore)}async function dB(n,e,t,r){let i=K(n);if(i.gu)return void V(lc,"Ignoring unexpected query state notification.");let o=i.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=await yR(i.localStore,MM(o[0])),a=Tl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",lt.EMPTY_BYTE_STRING);await Ki(i,s,a);break}case"rejected":await ec(i.localStore,e,!0),nc(i,e,r);break;default:z(64155,t)}}async function fB(n,e,t){let r=Am(n);if(r.gu){for(let i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){V(lc,"Adding an already active target "+i);continue}let o=await gR(r.localStore,i),s=await Qp(r.localStore,o);await XI(r,RR(o),s.targetId,!1,s.resumeToken),Dm(r.remoteStore,s)}for(let i of t)r.Iu.has(i)&&await ec(r.localStore,i,!1).then(()=>{tc(r.remoteStore,i),nc(r,i)}).catch(qi)}}function Am(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eB.bind(null,e),e.Pu.J_=WU.bind(null,e.eventManager),e.Pu.yu=KU.bind(null,e.eventManager),e}function rw(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nB.bind(null,e),e}var Sm=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$l(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return hR(this.persistence,new Kp,t.initialUser,this.serializer)}Cu(t){return new Nl(zp.Vi,this.serializer)}Du(t){return new Jp}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),am=class extends Sm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Y(this.persistence.referenceDelegate instanceof Wp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new $p(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Nl(r=>Wp.Vi(r,t),this.serializer)}},kl=class extends Sm{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await rw(this.xu.syncEngine),await cc(this.xu.remoteStore),await this.persistence.zi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return hR(this.persistence,new Kp,e.initialUser,this.serializer)}Fu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new $p(r,e.asyncQueue,t)}Mu(e,t){let r=new eE(t,this.persistence);return new X_(e.asyncQueue,r)}Cu(e){let t=fR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new eI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wR(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Jp}},cm=class extends kl{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.xu.syncEngine;this.sharedClientState instanceof yl&&(this.sharedClientState.syncEngine={So:cB.bind(null,t),Do:dB.bind(null,t),Co:fB.bind(null,t),hs:lB.bind(null,t),bo:aB.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi(async r=>{await uB(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){let t=wR();if(!yl.v(t))throw new $(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=fR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Tm=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iB.bind(null,this.syncEngine),await gI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new _I})()}createDatastore(t){let r=$l(t.databaseInfo.databaseId),i=OU(t.databaseInfo);return PU(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new mI(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>Lx(this.syncEngine,r,0),(function(){return Xp.v()?new Xp:new sI})())}createSyncEngine(t,r){return(function(o,s,a,c,l,d,h){let m=new DI(o,s,a,c,l,d);return h&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=K(r);V(gs,"RemoteStore shutting down."),i.Ea.add(5),await Gl(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var SI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Gi="FirestoreClient",TI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=ss.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(Gi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(Gi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ZI(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function q_(n,e){n.asyncQueue.verifyOperationInProgress(),V(Gi,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function jx(n,e){n.asyncQueue.verifyOperationInProgress();let t=await hB(n);V(Gi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Px(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Px(e.remoteStore,i)),n._onlineComponents=e}async function hB(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(Gi,"Using user provided OfflineComponentProvider");try{await q_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Li("Error using user provided cache. Falling back to memory cache: "+t),await q_(n,new Sm)}}else V(Gi,"Using default OfflineComponentProvider"),await q_(n,new am(void 0));return n._offlineComponents}async function NR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(Gi,"Using user provided OnlineComponentProvider"),await jx(n,n._uninitializedComponentsProvider._online)):(V(Gi,"Using default OnlineComponentProvider"),await jx(n,new Tm))),n._onlineComponents}function pB(n){return NR(n).then(e=>e.syncEngine)}async function Ux(n){let e=await NR(n),t=e.eventManager;return t.onListen=QU.bind(null,e.syncEngine),t.onUnlisten=ZU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=YU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JU.bind(null,e.syncEngine),t}function OR(n,e,t,r){let i=new SI(r),o=new II(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>qU(await Ux(n),o)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>zU(await Ux(n),o))}}function PR(n,e){let t=new yr;return n.asyncQueue.enqueueAndForget(async()=>XU(await pB(n),e,t)),t.promise}function kR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mB="ComponentProvider",Bx=new Map;function gB(n,e,t,r,i){return new iE(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,kR(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var yB="firestore.googleapis.com",Hx=!0,um=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yB,this.ssl=Hx}else this.host=e.host,this.ssl=e.ssl??Hx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uR)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fp;switch(r.type){case"firstParty":return new K_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Bx.get(t);r&&(V(mB,"Removing Datastore"),Bx.delete(t),r.terminate())})(this),Promise.resolve()}};var rc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Mt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ac(t,n._jsonSchema))return new n(e,r||null,new G(Ve.fromString(t.referencePath)))}};Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:ut("string",Mt._jsonSchemaVersion),referencePath:ut("string")};var Kr=class n extends rc{constructor(e,t,r){super(e,t,Bl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Qi(n,e,...t){if(n=kn(n),Kx("collection","path",e),n instanceof Fl){let r=Ve.fromString(e,...t);return L1(r),new Kr(n,null,r)}{if(!(n instanceof Mt||n instanceof Kr))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ve.fromString(e,...t));return L1(r),new Kr(n.firestore,null,r)}}function Es(n,e,...t){if(n=kn(n),arguments.length===1&&(e=ss.newId()),Kx("doc","path",e),n instanceof Fl){let r=Ve.fromString(e,...t);return F1(r),new Mt(n,null,new G(r))}{if(!(n instanceof Mt||n instanceof Kr))throw new $(k.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ve.fromString(e,...t));return F1(r),new Mt(n.firestore,n instanceof Kr?n.converter:null,new G(r))}}var $x="AsyncQueue",lm=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tm(this,"async_queue_retry"),this._c=()=>{let r=dp();r&&V($x,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new yr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!zi(e))throw e;V($x,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ct("INTERNAL UNHANDLED ERROR: ",Gx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=yI.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&z(47125,{Pc:Gx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Gx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var wr=class extends Fl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lm,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lm(e),this._firestoreClient=void 0,await e}}};function iw(n,e,t){t||(t=bp);let r=S1(n,"firestore");if(r.isInitialized(t)){let i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(Ho(o,e))return i;throw new $(k.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new $(k.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uR)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&m_(e.host)&&f1(e.host),r.initialize({options:e,instanceIdentifier:t})}function ql(n){if(n._terminated)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vB(n),n._firestoreClient}function vB(n){let e=n._freezeSettings(),t=gB(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new TI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var _r=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(lt.fromBase64String(e))}catch(t){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ac(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};_r._jsonSchemaVersion="firestore/bytes/1.0",_r._jsonSchema={type:ut("string",_r._jsonSchemaVersion),bytes:ut("string")};var vs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ic=class{constructor(e){this._methodName=e}};var Qr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ac(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:ut("string",Qr._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};var Er=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ac(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new $(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:ut("string",Er._jsonSchemaVersion),vectorValues:ut("object")};var _B=/^__.*__$/,xI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hi(e,this.data,t,this.fieldTransforms)}},dm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function FR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{dataSource:n})}}var MI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(L(L({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(FR(this.dataSource)&&_B.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},RI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$l(e)}createContext(e,t,r,i=!1){return new MI({dataSource:e,methodName:t,targetDoc:r,path:Et.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xm(n){let e=n._freezeSettings(),t=$l(n._databaseId);return new RI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mm(n,e,t,r,i,o={}){let s=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);ow("Data must be an object, but it was:",s,r);let a=jR(r,s),c,l;if(o.merge)c=new wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let h of o.mergeFields){let m=oc(e,h,t);if(!s.contains(m))throw new $(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);BR(d,m)||d.push(m)}c=new wn(d),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new xI(new Kt(a),c,l)}var fm=class n extends ic{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function LR(n,e,t,r){let i=n.createContext(1,e,t);ow("Data must be an object, but it was:",i,r);let o=[],s=Kt.empty();Wi(r,(c,l)=>{let d=sw(e,c,t);l=kn(l);let h=i.childContextForFieldPath(d);if(l instanceof fm)o.push(d);else{let m=Rm(l,h);m!=null&&(o.push(d),s.set(d,m))}});let a=new wn(o);return new dm(s,a,i.fieldTransforms)}function VR(n,e,t,r,i,o){let s=n.createContext(1,e,t),a=[oc(e,r,t)],c=[i];if(o.length%2!=0)throw new $(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(oc(e,o[m])),c.push(o[m+1]);let l=[],d=Kt.empty();for(let m=a.length-1;m>=0;--m)if(!BR(l,a[m])){let y=a[m],C=c[m];C=kn(C);let N=s.childContextForFieldPath(y);if(C instanceof fm)l.push(y);else{let P=Rm(C,N);P!=null&&(l.push(y),d.set(y,P))}}let h=new wn(l);return new dm(d,h,s.fieldTransforms)}function Rm(n,e){if(UR(n=kn(n)))return ow("Unsupported field value:",e,n),jR(n,e);if(n instanceof ic)return(function(r,i){if(!FR(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Rm(a,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:Za(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Za(i.serializer,o)}}if(r instanceof Qr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _r)return{bytesValue:$M(i.serializer,r._byteString)};if(r instanceof Mt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Er)return(function(s,a){let c=s instanceof Er?s.toArray():s;return{mapValue:{fields:{[jI]:{stringValue:UI},[qa]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw a.createError("VectorValues must only contain numeric values.");return $I(a.serializer,d)})}}}}}})(r,i);if(tR(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${pm(r)}`)})(n,e)}function jR(n,e){let t={};return fM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,(r,i)=>{let o=Rm(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function UR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ke||n instanceof Qr||n instanceof _r||n instanceof Mt||n instanceof ic||n instanceof Er||tR(n))}function ow(n,e,t){if(!UR(t)||!Yx(t)){let r=pm(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function oc(n,e,t){if((e=kn(e))instanceof vs)return e._internalPath;if(typeof e=="string")return sw(n,e);throw hm("Field path arguments must be of type string or ",n,!1,void 0,t)}var EB=new RegExp("[~\\*/\\[\\]]");function sw(n,e,t){if(e.search(EB)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vs(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new $(k.INVALID_ARGUMENT,a+n+c)}function BR(n,e){return n.some(t=>t.isEqual(e))}var Ll=class{convertValue(e,t="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[qa].arrayValue?.values?.map(r=>Je(r.doubleValue));return new Er(t)}convertGeoPoint(e){return new Qr(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Em(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){let t=Yr(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ve.fromString(e);Y(eR(r),9688,{name:e});let i=new cs(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||ct(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Vl=class extends Ll{constructor(e){super(),this.firestore=e}convertBytes(e){return new _r(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}};var HR="@firebase/firestore",$R="4.11.0";function GR(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Nm=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(oc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cw=class extends Nm{data(){return super.data()}};function bB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function hw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var uw=class{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=DB(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function qR(n){return new uw(n)}var lw=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Tm.provider,this._offlineComponentProvider={build:t=>new kl(t,e?.cacheSizeBytes,this.forceOwnership)}}},dw=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Tm.provider,this._offlineComponentProvider={build:t=>new cm(t,e?.cacheSizeBytes)}}};function DB(n){return new lw(n?.forceOwnership)}function zR(){return new dw}var Is=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ws=class n extends Nm{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(oc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:ut("string",ws._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};var dc=class extends ws{data(e={}){return super.data(e)}},fc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Is(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dc(this._firestore,this._userDataWriter,r.key,r,new Is(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new dc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Is(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new dc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Is(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:AB(a.type),doc:c,oldIndex:l,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ss.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function AB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:n})}}fc._jsonSchemaVersion="firestore/querySnapshot/1.0",fc._jsonSchema={type:ut("string",fc._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};var fw=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xm(e)}set(e,t,r){this._verifyNotCommitted();let i=aw(e,this._firestore),o=hw(i.converter,t,r),s=Mm(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Qt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=aw(e,this._firestore),s;return s=typeof(t=kn(t))=="string"||t instanceof vs?VR(this._dataReader,"WriteBatch.update",o._key,t,r,i):LR(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Qt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=aw(e,this._firestore);return this._mutations=this._mutations.concat(new hs(t._key,Qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function aw(n,e){if((n=kn(n)).firestore!==e)throw new $(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function pw(n,e,t){n=Xr(n,Mt);let r=Xr(n.firestore,wr),i=hw(n.converter,e,t),o=xm(r);return gw(r,[Mm(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Qt.none())])}function mw(n,e){let t=Xr(n.firestore,wr),r=Es(n),i=hw(n.converter,e),o=xm(n.firestore);return gw(t,[Mm(o,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function Om(n,...e){n=kn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||GR(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(GR(e[r])){let l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let o,s,a;if(n instanceof Mt)s=Xr(n.firestore,wr),a=Bl(n._key.path),o={next:l=>{e[r]&&e[r](SB(s,n,l))},error:e[r+1],complete:e[r+2]};else{let l=Xr(n,rc);s=Xr(l.firestore,wr),a=l._query;let d=new Vl(s);o={next:h=>{e[r]&&e[r](new fc(s,d,l,h))},error:e[r+1],complete:e[r+2]},bB(n._query)}let c=ql(s);return OR(c,a,i,o)}function gw(n,e){let t=ql(n);return PR(t,e)}function SB(n,e,t){let r=t.docs.get(e._key),i=new Vl(n);return new ws(n,i,e._key,r,new Is(t.hasPendingWrites,t.fromCache),e.converter)}function WR(n){return n=Xr(n,wr),ql(n),new fw(n,e=>gw(n,e))}(function(e,t=!0){qx(x1),el(new $r("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new wr(new hp(r.getProvider("auth-internal")),new mp(s,r.getProvider("app-check-internal")),yM(s,i),s);return o=L({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ri(HR,$R,e),Ri(HR,$R,"esm2020")})();var TB={apiKey:"AIzaSyARjBS1i7OHzsYA5m9Av1cYWXTyQNfLNFQ",authDomain:"epi-serra-sull.firebaseapp.com",projectId:"epi-serra-sull",storageBucket:"epi-serra-sull.firebasestorage.app",messagingSenderId:"49100006374",appId:"1:49100006374:web:24436329e209345499ac27",measurementId:"G-TV91YBKHT0"},xB=M1(TB),ei=iw(xB,{localCache:qR({tabManager:zR()})}),KR=`13172281	ARCTATIL G	EPI
13172256	ARCTATIL GG	EPI
13172279	ARCTATIL M	EPI
13172268	ARCTATIL P	EPI
13316763	ARCTATIL PP	EPI
15282770	BALACLAVA ELETRICA	EPI
15336442	BLOQUEADOR SOLAR	EPI
15731888	BLUSAO VAQUETA G	EPI
15731887	BLUSAO VAQUETA GG	EPI
15731885	BLUSAO VAQUETA M	EPI
15731890	BLUSAO VAQUETA P	EPI
13155971	CALCA ANTICORTE G	EPI
13156020	CALCA ANTICORTE M	EPI
13156010	CALCA ANTICORTE P	EPI
13315829	CALCA JEANS OPERACIONAL MASCULINA 38 COM FAIXA	UNIFORME
13315828	CALCA JEANS OPERACIONAL MASCULINA 40 COM FAIXA	UNIFORME
13315827	CALCA JEANS OPERACIONAL MASCULINA 42 COM FAIXA	UNIFORME
13318786	CALCA JEANS OPERACIONAL MASCULINA 44 COM FAIXA	UNIFORME
13315826	CALCA JEANS OPERACIONAL MASCULINA 46 COM FAIXA	UNIFORME
13315824	CALCA JEANS OPERACIONAL MASCULINA 48 COM FAIXA	UNIFORME
13315825	CALCA JEANS OPERACIONAL MASCULINA 50 COM FAIXA	UNIFORME
13315823	CALCA JEANS OPERACIONAL MASCULINA 52 COM FAIXA	UNIFORME
13022270	CALCA NOMEX FEMININA 36	UNIFORME
15443280	CALCA NOMEX FEMININA 38	UNIFORME
15443318	CALCA NOMEX FEMININA 40	UNIFORME
15443349	CALCA NOMEX FEMININA 42	UNIFORME
15443399	CALCA NOMEX FEMININA 44	UNIFORME
15443484	CALCA NOMEX FEMININA 46	UNIFORME
15443492	CALCA NOMEX FEMININA 48	UNIFORME
15443526	CALCA NOMEX FEMININA 50	UNIFORME
15241357	CALCA NOMEX MASCULINA 38	UNIFORME
15241390	CALCA NOMEX MASCULINA 40	UNIFORME
15241416	CALCA NOMEX MASCULINA 42	UNIFORME
15241423	CALCA NOMEX MASCULINA 44	UNIFORME
15241463	CALCA NOMEX MASCULINA 46	UNIFORME
15241526	CALCA NOMEX MASCULINA 48	UNIFORME
15241532	CALCA NOMEX MASCULINA 50	UNIFORME
15241572	CALCA NOMEX MASCULINA 52	UNIFORME
15241682	CALCA NOMEX MASCULINA 60	UNIFORME
15734019	CALCA VAQUETA G	EPI
15733378	CALCA VAQUETA GG	EPI
15734036	CALCA VAQUETA M	EPI
15731886	CALCA VAQUETA P	EPI
16724419	CAMISA ADM FEM CURTA 36	UNIFORME
16724632	CAMISA ADM FEM CURTA 38	UNIFORME
15500269	CAMISA ADM FEM CURTA 40	UNIFORME
16724557	CAMISA ADM FEM CURTA 42	UNIFORME
16724179	CAMISA ADM FEM CURTA 44	UNIFORME
16724435	CAMISA ADM FEM CURTA 46	UNIFORME
16724631	CAMISA ADM FEM CURTA 48	UNIFORME
16724654	CAMISA ADM FEM CURTA 50	UNIFORME
15500271	CAMISA ADM FEM CURTA 52	UNIFORME
16724434	CAMISA ADM FEM CURTA 54	UNIFORME
16724553	CAMISA ADM FEM LONGA 36	UNIFORME
16724680	CAMISA ADM FEM LONGA 40	UNIFORME
16724660	CAMISA ADM FEM LONGA 42	UNIFORME
16724177	CAMISA ADM FEM LONGA 44	UNIFORME
16724469	CAMISA ADM FEM LONGA 46	UNIFORME
16725132	CAMISA ADM FEM LONGA 48	UNIFORME
16724653	CAMISA ADM FEM LONGA 50	UNIFORME
16724436	CAMISA ADM FEM LONGA 52	UNIFORME
16724652	CAMISA ADM FEM LONGA 54	UNIFORME
16724400	CAMISA ADM MASC CURTA 1	UNIFORME
16724357	CAMISA ADM MASC CURTA 10	UNIFORME
16724412	CAMISA ADM MASC CURTA 2	UNIFORME
16724642	CAMISA ADM MASC CURTA 3	UNIFORME
16724406	CAMISA ADM MASC CURTA 4	UNIFORME
16724290	CAMISA ADM MASC CURTA 5	UNIFORME
16725084	CAMISA ADM MASC CURTA 6	UNIFORME
16724640	CAMISA ADM MASC CURTA 7	UNIFORME
16724679	CAMISA ADM MASC CURTA 8	UNIFORME
16724399	CAMISA ADM MASC CURTA 9	UNIFORME
16724398	CAMISA ADM MASC LONGA 1	UNIFORME
16724524	CAMISA ADM MASC LONGA 10	UNIFORME
16725077	CAMISA ADM MASC LONGA 2	UNIFORME
16724307	CAMISA ADM MASC LONGA 3	UNIFORME
16724431	CAMISA ADM MASC LONGA 4	UNIFORME
16724426	CAMISA ADM MASC LONGA 5	UNIFORME
16724304	CAMISA ADM MASC LONGA 6	UNIFORME
16724678	CAMISA ADM MASC LONGA 7	UNIFORME
16724648	CAMISA ADM MASC LONGA 8	UNIFORME
16724405	CAMISA ADM MASC LONGA 9	UNIFORME
15446037	CAMISA NOMEX FEMININO 1	UNIFORME
15446067	CAMISA NOMEX FEMININO 2	UNIFORME
15446155	CAMISA NOMEX FEMININO 3	UNIFORME
15446162	CAMISA NOMEX FEMININO 4	UNIFORME
15446200	CAMISA NOMEX FEMININO 5	UNIFORME
15446238	CAMISA NOMEX FEMININO 6	UNIFORME
15240043	CAMISA NOMEX MASCULINO 1	UNIFORME
15240081	CAMISA NOMEX MASCULINO 2	UNIFORME
15240119	CAMISA NOMEX MASCULINO 3	UNIFORME
15240146	CAMISA NOMEX MASCULINO 4	UNIFORME
15240196	CAMISA NOMEX MASCULINO 5	UNIFORME
15243661	CAMISA NOMEX MASCULINO 6	UNIFORME
15243721	CAMISA NOMEX MASCULINO 7	UNIFORME
16724420	CAMISA OPERACIONAL FEM LONGA 36	UNIFORME
16724655	CAMISA OPERACIONAL FEM LONGA 38	UNIFORME
16724370	CAMISA OPERACIONAL FEM LONGA 40	UNIFORME
16724635	CAMISA OPERACIONAL FEM LONGA 42	UNIFORME
16724513	CAMISA OPERACIONAL FEM LONGA 44	UNIFORME
16724421	CAMISA OPERACIONAL FEM LONGA 46	UNIFORME
16724178	CAMISA OPERACIONAL FEM LONGA 48	UNIFORME
16724372	CAMISA OPERACIONAL FEM LONGA 50	UNIFORME
16724046	CAMISA OPERACIONAL FEM LONGA 52	UNIFORME
16724437	CAMISA OPERACIONAL FEM LONGA 54	UNIFORME
16724045	CAMISA OPERACIONAL MASC LONGA 1	UNIFORME
16724306	CAMISA OPERACIONAL MASC LONGA 10	UNIFORME
16725133	CAMISA OPERACIONAL MASC LONGA 2	UNIFORME
16724684	CAMISA OPERACIONAL MASC LONGA 3	UNIFORME
16724176	CAMISA OPERACIONAL MASC LONGA 4	UNIFORME
16724685	CAMISA OPERACIONAL MASC LONGA 5	UNIFORME
16724440	CAMISA OPERACIONAL MASC LONGA 6	UNIFORME
16724649	CAMISA OPERACIONAL MASC LONGA 7	UNIFORME
16724641	CAMISA OPERACIONAL MASC LONGA 8	UNIFORME
16724432	CAMISA OPERACIONAL MASC LONGA 9	UNIFORME
16724643	CAMISA OPERACIONAL MASCULINO CURTA 1	UNIFORME
16724659	CAMISA OPERACIONAL MASCULINO CURTA 2	UNIFORME
16724418	CAMISA OPERACIONAL MASCULINO CURTA 3	UNIFORME
16724658	CAMISA OPERACIONAL MASCULINO CURTA 4	UNIFORME
16724413	CAMISA OPERACIONAL MASCULINO CURTA 5	UNIFORME
16724416	CAMISA OPERACIONAL MASCULINO CURTA 6	UNIFORME
16724651	CAMISA OPERACIONAL MASCULINO CURTA 7	UNIFORME
16724650	CAMISA OPERACIONAL MASCULINO CURTA 8	UNIFORME
13306824	CAMISA POLO FEMININO G	UNIFORME
13306790	CAMISA POLO FEMININO M	UNIFORME
13306417	CAMISA POLO FEMININO P	UNIFORME
13306993	CAMISA POLO FEMININO PP	UNIFORME
13306600	CAMISA POLO MASCULINO G	UNIFORME
13306601	CAMISA POLO MASCULINO M	UNIFORME
13306602	CAMISA POLO MASCULINO P	UNIFORME
13306603	CAMISA POLO MASCULINO PP	UNIFORME
15421866	CAPA CHUVA G	EPI
15421908	CAPA CHUVA M	EPI
15421828	CAPA CHUVA XG	EPI
15251624	CAPACETE 3M	EPI
15255670	CAPACETE MSA	EPI
13094454	CAPUZ ALTA TEMPERATURA PRETA	EPI
16903219	CINTO SEGURAN\xC7A	EPI
15774895	COLETE LARANJA G	EPI
15775001	COLETE LARANJA M	EPI
13303524	COLETE LARANJA P	EPI
15774880	COLETE LARANJA XG	EPI
15775002	COLETE LARANJA XXG	EPI
16724564	CREME BISNAGA 100G	EPI
13103195	ELASTICO SOLUS 1000	EPI
13103209	ESPUMA DE VEDACAO SOLUS 1000	EPI
15513815	FILTRO  P2	EPI
15779064	FILTRO P3	EPI
15299596	FILTRO PLASTICO	EPI
13094254	GRIP DEFENDER APOIO 10	EPI
13093459	GRIP DEFENDER APOIO 11	EPI
13091909	GRIP DEFENDER APOIO 7	EPI
13093452	GRIP DEFENDER APOIO 9	EPI
15426150	HYFLEX 10	EPI
15225095	HYFLEX 7	EPI
15426072	HYFLEX 8	EPI
15426108	HYFLEX 9	EPI
15224469	JUGULAR ELASTICO 3M	EPI
15207157	JUGULAR ELASTICO MSA	EPI
15309085	JUGULAR TECIDO 3M	EPI
13075586	KIT SOLUS 1000 INCOLOR	EPI
13296364	LUVA ANTI-IMPACTO UNILUVAS 10	EPI
13296363	LUVA ANTI-IMPACTO UNILUVAS 11	EPI
13296361	LUVA ANTI-IMPACTO UNILUVAS 12	EPI
13296238	LUVA ANTI-IMPACTO UNILUVAS 8	EPI
13296237	LUVA ANTI-IMPACTO UNILUVAS 9	EPI
15256728	SUSPENSAO MSA	EPI
16905195	TALABARTE	EPI
15402906	VISOR 3M EXTERNA	EPI
15402912	VISOR 3M INTERNA 9100V	EPI
13109502	VISOR 3M INTERNA 9100X	EPI
15500155	SOLVEX 10	EPI
15500129	SOLVEX 9	EPI
13155522	RESPIRADOR DESCART DOBRAVEL PFF2	EPI
15428487	RESPIRADOR DESCART SEMI-FACIAL PFF2	EPI
15382121	LUVA VAQUETA EG	EPI
15382170	LUVA VAQUETA G	EPI
15427777	LUVA VAQUETA M	EPI
15382196	LUVA VAQUETA P	EPI
13093448	LUVAMAX GRIP G	EPI
13093446	LUVAMAX GRIP M	EPI
13329496	MACACAO 36/38 XP	EPI
15510673	MACACAO 40/42 PP	EPI
15510689	MACACAO 44/46 P	EPI
15510718	MACACAO 48/50 M	EPI
15510734	MACACAO 52/54 G	EPI
15510742	MACACAO 56/58 GG	EPI
15510760	MACACAO 60/62 GG	EPI
13306816	MACACAO PROTECAO G	EPI
13306812	MACACAO PROTECAO GG	EPI
13306810	MACACAO PROTECAO GGG	EPI
13306777	MACACAO PROTECAO M	EPI
13306780	MACACAO PROTECAO P	EPI
15430145	MACACAO TYVEK G	EPI
15430110	MACACAO TYVEK GG	EPI
15430152	MACACAO TYVEK M	EPI
15346004	MACACAO TYVEK P	EPI
15375669	MASCARA SEMI FACIAL 3M	EPI
15412654	MASCARA SOLDA PC C/ CARNEIRA	EPI
13033811	OCULOS GRADUADO MONOFOCAL, LENTE FOTOCROMATICA, HA	EPI
13031060	OCULOS GRADUADO MONOFOCAL, LENTE INCOLOR, BANDA EL	EPI
13031065	OCULOS GRADUADO MONOFOCAL, LENTE INCOLOR, HASTE AJ	EPI
13030411	OCULOS GRADUADO MULTIFOCAL, LENTE INCOLOR, BANDA E	EPI
15411403	OCULOS INCOLOR HONEYWELL	EPI
15397699	OCULOS LENTE VERDE 5.0	EPI
15411313	OCULOS LENTES IN-OUT	EPI
15411855	OCULOS LIBUS CINZA	EPI
15410806	OCULOS LIBUS INCOLOR	EPI
15397582	OCULOS SEG AMPLA VISAO INC	EPI
13033261	OCULOS SEG CONT IMPACT PART FOTOCR	EPI
13031049	OCULOS SEG CONT IMPACT PART FOTOCRO	EPI
13033248	OCULOS SEG CONT IMPACT PART INC	EPI
15411129	OCULOS SOBREPOR	EPI
13108456	OCULOS SOLUS 1000 CINZA	EPI
15734078	PERNEIRA DE RASPA COM VELCRO	EPI
15427000	PERNEIRA PVC LAMIN G	EPI
15417364	POWERFLEX 10	EPI
15417293	POWERFLEX 8	EPI
15417327	POWERFLEX 9	EPI
15217798	PROTETOR ACOPLAR CONCHA H6P3E 3M	EPI
15391654	PROTETOR AURICULAR CONCHA MSA 22DB	EPI
15394816	PROTETOR AURICULAR CONCHA TP 19DB VERDE	EPI
15394283	PROTETOR AURICULAR CONCHA TP 3M CIMA DA CABECA	EPI
15213210	PROTETOR AURICULAR HASTE TRAS DA NUCA CONCHA 19DB	EPI
15427128	PROTETOR FACIAL V2C 3M	EPI
15254231	PROTETOR HASTE METAL ACIMA CABECA 27DB PRETO	EPI
15304872	PROTETOR PLUG	EPI
15398377	REPELENTE	EPI
13321020	LUVA MAX SOLDER G	EPI
13320947	LUVA MAX SOLDER GG	EPI
13321021	LUVA MAX SOLDER M	EPI
13321321	LUVA MAX SOLDER P	EPI`,Ln=class n{constructor(){this.notificationService=j(Ea);this.baseProducts=[];this.products=Ne([]);this.movements=Ne([]);this.orders=Ne([]);this.isSeeding=!1;this.kpi=tt(()=>{let e=this.products(),t=this.movements(),r=t.filter(C=>C.tipo==="SAIDA").reduce((C,N)=>C+N.quantidade,0),i=t.filter(C=>C.tipo==="ENTRADA").reduce((C,N)=>C+N.quantidade,0),o=e.filter(C=>C.estoque_atual>C.estoque_min).length,s=e.filter(C=>C.estoque_atual===0),a=s.length,c=e.length>0?Math.round(o/e.length*100):0,l=[],d=new Date;for(let C=6;C>=0;C--){let N=new Date(d);N.setDate(d.getDate()-C);let P=N.toISOString().split("T")[0],U=N.toLocaleDateString("pt-BR",{weekday:"short"}),J=t.filter(Q=>Q.data.startsWith(P));l.push({day:U,in:J.filter(Q=>Q.tipo==="ENTRADA").reduce((Q,Re)=>Q+Re.quantidade,0),out:J.filter(Q=>Q.tipo==="SAIDA").reduce((Q,Re)=>Q+Re.quantidade,0)})}let h={};t.filter(C=>C.tipo==="SAIDA").forEach(C=>{h[C.produtoId]=(h[C.produtoId]||0)+C.quantidade});let m=Object.entries(h).map(([C,N])=>{let P=e.find(U=>U.id===C);return{name:P?.nome||"Item exclu\xEDdo",codigo:P?.codigo,qtd:N}}).sort((C,N)=>N.qtd-C.qtd).slice(0,5),y=e.filter(C=>C.estoque_atual<=C.estoque_min+4).sort((C,N)=>C.estoque_atual-C.estoque_min-(N.estoque_atual-N.estoque_min)).slice(0,100);return{totalOut:r,totalIn:i,positiveStock:o,zeroStock:a,zeroStockList:s,healthScore:c,weeklyData:l,topTrending:m,purchaseActionList:y}});this.preloadLocalData(),this.setupListeners()}preloadLocalData(){let e=KR.split(`
`).filter(i=>i.trim().length>5),t=[],r=new Set;e.forEach(i=>{let o="",s="",a="EPI";if(i.includes("	")){let c=i.split("	");o=c[0]?.trim(),s=c[1]?.trim(),a=c[2]?.trim()}else{let c=i.trim().split(/\s+/);o=c[0],a=c[c.length-1],s=c.slice(1,c.length-1).join(" "),a!=="EPI"&&a!=="UNIFORME"&&(a="EPI")}!o||!s||r.has(o)||(r.add(o),t.push({id:o,codigo:o,nome:s||"PRODUTO DESCONHECIDO",categoria:a||"EPI",estoque_atual:0,estoque_min:5,estoque_max:100,alto_giro:!1}))}),this.baseProducts=t,this.products.set(t)}setupListeners(){Om(Qi(ei,"products"),e=>{if(e.empty&&!this.isSeeding&&!e.metadata.fromCache)this.isSeeding=!0,this.seedDatabase().then(()=>{this.isSeeding=!1}).catch(t=>{console.error("Seeding failed",t),this.isSeeding=!1});else if(!e.empty){let t=e.docs.map(i=>{let o=i.data()||{},s=String(o.codigo||o.Codigo||o.CODIGO||i.id||""),a=this.baseProducts.find(c=>c.codigo===s||c.codigo===i.id);return re(L({id:i.id},o),{codigo:s,nome:String(o.nome||o.Nome||o.NOME||o.descricao||o.produto||(a?a.nome:null)||"Sem Nome"),categoria:o.categoria||o.Categoria||o.CATEGORIA||(a?a.categoria:null)||"EPI",estoque_atual:Number(o.estoque_atual??o.Estoque_atual??o.estoque??o.quantidade??0),estoque_min:Number(o.estoque_min??o.estoqueMinimo??(a?a.estoque_min:0)),estoque_max:Number(o.estoque_max??o.estoqueMaximo??(a?a.estoque_max:0)),alto_giro:!!(o.alto_giro||o.Alto_giro)})}),r=this.baseProducts.map(i=>{let o=t.find(s=>s.codigo===i.codigo||s.id===i.codigo);return o||i});t.forEach(i=>{r.some(o=>o.codigo===i.codigo||o.id===i.id)||r.push(i)}),this.products.set(r)}}),Om(Qi(ei,"movements"),e=>{let t=e.docs.map(r=>{let i=r.data()||{};return re(L({id:r.id},i),{data:i.data||i.Data||new Date().toISOString(),tipo:i.tipo||i.Tipo||"SAIDA",produtoId:i.produtoId||i.ProdutoId||i.produto_id||"",quantidade:Number(i.quantidade??i.Quantidade??0),atendente:i.atendente||i.Atendente||"Admin",centroCusto:i.centroCusto||i.CentroCusto||i.centro_custo||"",observacao:i.observacao||i.Observacao||""})});t.sort((r,i)=>new Date(i.data).getTime()-new Date(r.data).getTime()),this.movements.set(t)}),Om(Qi(ei,"orders"),e=>{let t=e.docs.map(r=>{let i=r.data()||{};return re(L({id:r.id},i),{numero:Number(i.numero??i.Numero??0),fornecedor:i.fornecedor||i.Fornecedor||"Desconhecido",dataCriacao:i.dataCriacao||i.DataCriacao||i.data_criacao||new Date().toISOString(),status:i.status||i.Status||"PENDENTE",itens:i.itens||i.Itens||[],temDivergencia:!!(i.temDivergencia||i.TemDivergencia)})});t.sort((r,i)=>new Date(i.dataCriacao).getTime()-new Date(r.dataCriacao).getTime()),this.orders.set(t)})}seedDatabase(){console.log("Seeding database as Firebase is currently empty...");let e=KR.split(`
`).filter(i=>i.trim().length>5),t=new Set,r=WR(ei);return e.forEach(i=>{let o="",s="",a="EPI";if(i.includes("	")){let l=i.split("	");o=l[0]?.trim(),s=l[1]?.trim(),a=l[2]?.trim()}else{let l=i.trim().split(/\s+/);o=l[0],a=l[l.length-1],s=l.slice(1,l.length-1).join(" "),a!=="EPI"&&a!=="UNIFORME"&&(a="EPI")}if(!o||!s||t.has(o))return;t.add(o);let c=Es(Qi(ei,"products"),o);r.set(c,{codigo:o,nome:s||"PRODUTO DESCONHECIDO",categoria:a||"EPI",estoque_atual:0,estoque_min:5,estoque_max:100,alto_giro:!1})}),r.commit().then(()=>{console.log("Seeding complete. Products have been loaded to Firebase."),this.notificationService.add("Banco de Dados Online","Firebase conectado e sincronizando em tempo real com todos os dispositivos!","SUCCESS")}).catch(i=>{console.error("Firebase seeding blocked (likely Rules or offline):",i),this.notificationService.add("Erro de Permiss\xE3o Firebase",'Seus produtos sumiram das outras telas porque n\xE3o conseguiram subir pro Firebase. O Firebase est\xE1 bloqueando as altera\xE7\xF5es. Por favor, acesse o Console do Firebase > Firestore Database > Rules e altere para "allow read, write: if true;".',"ERROR")})}updateProduct(e,t){return pw(Es(ei,"products",e),t,{merge:!0}).catch(console.error)}addMovement(e){let t=new Date().toISOString(),r=this.products().find(i=>i.id===e.produtoId);if(mw(Qi(ei,"movements"),re(L({},e),{data:t})).catch(console.error),r){let i=e.tipo==="ENTRADA"?e.quantidade:-e.quantidade,o=Math.max(0,r.estoque_atual+i);this.updateProduct(r.id,{estoque_atual:o}),e.tipo==="SAIDA"&&o<=r.estoque_min&&r.estoque_atual>r.estoque_min&&this.notificationService.add("Alerta de Estoque Baixo",`O produto ${r.nome} atingiu o n\xEDvel m\xEDnimo (${o} un).`,"WARNING"),e.tipo==="SAIDA"&&o===0&&r.estoque_atual>0&&this.notificationService.add("Estoque Zerado",`O produto ${r.nome} acabou de zerar!`,"ERROR")}}createOrder(e){let t=Math.floor(Math.random()*1e4);mw(Qi(ei,"orders"),{numero:t,fornecedor:e.fornecedor,dataCriacao:new Date().toISOString(),status:"PENDENTE",itens:[...e.itens],temDivergencia:!1}).catch(console.error),this.notificationService.add("Remessa Criada",`Remessa #${t} para ${e.fornecedor} foi gerada com sucesso e sincronizada.`,"SUCCESS")}receiveOrder(e,t,r){let i=this.orders().find(s=>s.id===e);if(!i)return;for(let s of t)s.quantidadeRecebida&&s.quantidadeRecebida>0&&this.addMovement({tipo:"ENTRADA",produtoId:s.produtoId,quantidade:s.quantidadeRecebida,atendente:r,centroCusto:"ESTOQUE",observacao:`Recebimento Pedido #${i.numero}`});let o=t.some(s=>s.quantidadeRecebida!==s.quantidadeSolicitada);pw(Es(ei,"orders",e),{status:"RECEBIDO",itens:t,quemConferiu:r,dataRecebimento:new Date().toISOString(),temDivergencia:o},{merge:!0}).catch(console.error),this.notificationService.add("Confer\xEAncia Realizada","O estoque foi atualizado em todos os aparelhos conectados.","SUCCESS")}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}};var nN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ce(wi),Ce(Rn))};static \u0275dir=tn({type:n})}return n})(),rN=(()=>{class n extends nN{static \u0275fac=(()=>{let t;return function(i){return(t||(t=To(n)))(i||n)}})();static \u0275dir=tn({type:n,features:[bi]})}return n})(),ww=new Z("");var MB={provide:ww,useExisting:fi(()=>Yi),multi:!0};function RB(){let n=Nn()?Nn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var NB=new Z(""),Yi=(()=>{class n extends nN{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!RB())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ce(wi),Ce(Rn),Ce(NB,8))};static \u0275dir=tn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[wu([MB]),bi]})}return n})();var OB=new Z(""),PB=new Z("");function iN(n){return n!=null}function oN(n){return Di(n)?nt(n):n}function sN(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function aN(n,e){return e.map(t=>t(n))}function kB(n){return!n.validate}function cN(n){return n.map(e=>kB(e)?e:t=>e.validate(t))}function FB(n){if(!n)return null;let e=n.filter(iN);return e.length==0?null:function(t){return sN(aN(t,e))}}function uN(n){return n!=null?FB(cN(n)):null}function LB(n){if(!n)return null;let e=n.filter(iN);return e.length==0?null:function(t){let r=aN(t,e).map(oN);return jg(r).pipe(Ye(sN))}}function lN(n){return n!=null?LB(cN(n)):null}function QR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VB(n){return n._rawValidators}function jB(n){return n._rawAsyncValidators}function yw(n){return n?Array.isArray(n)?n:[n]:[]}function km(n,e){return Array.isArray(n)?n.includes(e):n===e}function YR(n,e){let t=yw(e);return yw(n).forEach(i=>{km(t,i)||t.push(i)}),t}function ZR(n,e){return yw(e).filter(t=>!km(n,t))}var Fm=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control?.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vw=class extends Fm{name;get formDirective(){return null}get path(){return null}},Yl=class extends Fm{_parent=null;name=null;valueAccessor=null},_w=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var mc=(()=>{class n extends _w{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ce(Yl,2))};static \u0275dir=tn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ee("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[bi]})}return n})();var zl="VALID",Pm="INVALID",hc="PENDING",Wl="DISABLED",Cs=class{},Lm=class extends Cs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Kl=class extends Cs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ql=class extends Cs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},pc=class extends Cs{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var Ew=class extends Cs{source;constructor(e){super(),this.source=e}};function UB(n){return(Vm(n)?n.validators:n)||null}function BB(n){return Array.isArray(n)?uN(n):n||null}function HB(n,e){return(Vm(e)?e.asyncValidators:n)||null}function $B(n){return Array.isArray(n)?lN(n):n||null}function Vm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Iw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ct(this.statusReactive)}set status(e){Ct(()=>this.statusReactive.set(e))}_status=tt(()=>this.statusReactive());statusReactive=Ne(void 0);get valid(){return this.status===zl}get invalid(){return this.status===Pm}get pending(){return this.status==hc}get disabled(){return this.status===Wl}get enabled(){return this.status!==Wl}errors;get pristine(){return Ct(this.pristineReactive)}set pristine(e){Ct(()=>this.pristineReactive.set(e))}_pristine=tt(()=>this.pristineReactive());pristineReactive=Ne(!0);get dirty(){return!this.pristine}get touched(){return Ct(this.touchedReactive)}set touched(e){Ct(()=>this.touchedReactive.set(e))}_touched=tt(()=>this.touchedReactive());touchedReactive=Ne(!1);get untouched(){return!this.touched}_events=new dt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZR(e,this._rawAsyncValidators))}hasValidator(e){return km(this._rawValidators,e)}hasAsyncValidator(e){return km(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;e.onlySelf||this._parent?.markAsTouched(re(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ql(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),e.onlySelf||this._parent?._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ql(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;e.onlySelf||this._parent?.markAsDirty(re(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Kl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),e.onlySelf||this._parent?._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Kl(!0,r))}markAsPending(e={}){this.status=hc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pc(this.status,t)),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.markAsPending(re(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wl,this.errors=null,this._forEachChild(i=>{i.disable(re(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lm(this.value,r)),this._events.next(new pc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=zl,this._forEachChild(r=>{r.enable(re(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){e.onlySelf||(this._parent?.updateValueAndValidity(e),e.skipPristineCheck||this._parent?._updatePristine({},t),this._parent?._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zl||this.status===hc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lm(this.value,t)),this._events.next(new pc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.updateValueAndValidity(re(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wl:zl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=hc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=oN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r?.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new pc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ht,this.statusChanges=new ht}_calculateStatus(){return this._allControlsDisabled()?Wl:this.errors?Pm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hc)?hc:this._anyControlsHaveStatus(Pm)?Pm:zl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,e.onlySelf||this._parent?._updatePristine(e,t),i&&this._events.next(new Kl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ql(this.touched,t)),e.onlySelf||this._parent?._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!!this._parent?.dirty&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=BB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$B(this._rawAsyncValidators)}};var dN=new Z("",{factory:()=>Cw}),Cw="always";function GB(n,e){return[...e.path,n]}function qB(n,e,t=Cw){WB(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),KB(n,e),YB(n,e),QB(n,e),zB(n,e)}function JR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zB(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function WB(n,e){let t=VB(n);e.validator!==null?n.setValidators(QR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=jB(n);e.asyncValidator!==null?n.setAsyncValidators(QR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();JR(e._rawValidators,i),JR(e._rawAsyncValidators,i)}function KB(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&fN(n,e)})}function QB(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&fN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function fN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YB(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function ZB(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JB(n){return Object.getPrototypeOf(n.constructor)===rN}function XB(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Yi?t=o:JB(o)?r=o:i=o}),i||r||t||null}function XR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function eN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var e5=class extends Iw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(UB(t),HB(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(eN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ew(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){eN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var t5={provide:Yl,useExisting:fi(()=>bs)},tN=Promise.resolve(),bs=(()=>{class n extends Yl{_changeDetectorRef;callSetDisabledState;control=new e5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ht;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=XB(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ZB(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective?.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qB(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){tN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&sa(r);tN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?GB(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ce(vw,9),Ce(OB,10),Ce(PB,10),Ce(ww,10),Ce(Oo,8),Ce(dN,8))};static \u0275dir=tn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[wu([t5]),bi,kr]})}return n})();var n5={provide:ww,useExisting:fi(()=>Zl),multi:!0},Zl=(()=>{class n extends rN{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=To(n)))(i||n)}})();static \u0275dir=tn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[wu([n5]),bi]})}return n})();var r5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fr({type:n});static \u0275inj=ir({})}return n})();var Zi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dN,useValue:t.callSetDisabledState??Cw}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fr({type:n});static \u0275inj=ir({imports:[r5]})}return n})();var i5=["chartContainer"],o5=["donutContainer"],hN=(n,e)=>e.id;function s5(n,e){if(n&1&&(F(0,"tr",70)(1,"td",90),D(2),F(3,"span",91),D(4),B()(),F(5,"td",92),D(6,"Gestor de \xC1rea"),B(),F(7,"td",67)(8,"div",93)(9,"div",94),Ae(10,"div",95),B(),F(11,"span",40),D(12),B()()(),F(13,"td",68)(14,"span",96),Ae(15,"span",97),D(16," COMPRAR "),B()()()),n&2){let t=e.$implicit;R(2),He(" ",t.nome," "),R(2),fe(t.codigo),R(6),Si("width",t.estoque_atual/t.estoque_max*100,"%"),R(2),fe(t.estoque_atual)}}function a5(n,e){n&1&&(F(0,"tr")(1,"td",98),X(),F(2,"svg",99),Ae(3,"path",100),B(),D(4," Nenhum item com estoque baixo. "),B()())}function c5(n,e){if(n&1&&(F(0,"div",82),Ae(1,"div",101),F(2,"div",102)(3,"div",103),X(),F(4,"svg",61),Ae(5,"path",30),B()(),ye(),F(6,"div")(7,"h4",104),D(8),B(),F(9,"p",105),D(10),B()()()()),n&2){let t=e.$implicit;R(8),fe(t.nome),R(2),He("C\xF3d: ",t.codigo)}}function u5(n,e){n&1&&(F(0,"div",83)(1,"p",106),D(2,"Tudo em ordem!"),B()())}var jm=class n{constructor(){this.db=j(Ln);this.kpi=this.db.kpi;this.today=new Date;this.chartRef=y0("chartContainer");this.donutRef=y0("donutContainer");Ky(()=>{this.renderBarChart(),this.renderDonutChart()})}ngAfterViewInit(){this.renderBarChart(),this.renderDonutChart(),window.addEventListener("resize",()=>{this.renderBarChart(),this.renderDonutChart()})}renderBarChart(){let e=this.chartRef()?.nativeElement;if(!e)return;d3.select(e).selectAll("*").remove();let t=this.kpi().weeklyData;if(t.length===0)return;let r={top:10,right:0,bottom:20,left:25},i=e.offsetWidth-r.left-r.right,o=e.offsetHeight-r.top-r.bottom,s=d3.select(e).append("svg").attr("width",i+r.left+r.right).attr("height",o+r.top+r.bottom).append("g").attr("transform",`translate(${r.left},${r.top})`),a=d3.scaleBand().domain(t.map(m=>m.day)).rangeRound([0,i]).paddingInner(.3),c=d3.scaleBand().domain(["in","out"]).rangeRound([0,a.bandwidth()]).padding(.2),l=d3.max(t,m=>Math.max(m.in,m.out))||10,d=d3.scaleLinear().domain([0,l*1.2]).rangeRound([o,0]),h=d3.scaleOrdinal().domain(["in","out"]).range(["#007E7A","#F1C40F"]);s.append("g").attr("class","grid").call(d3.axisLeft(d).ticks(5).tickSize(-i).tickFormat("")).style("stroke-dasharray","4,4").style("stroke","#E5E7EB").style("stroke-opacity","0.5"),s.append("g").selectAll("g").data(t).enter().append("g").attr("transform",m=>`translate(${a(m.day)},0)`).selectAll("path").data(m=>[{key:"in",value:m.in},{key:"out",value:m.out}]).enter().append("path").attr("fill",m=>h(m.key)).attr("d",m=>{let y=c.bandwidth(),C=o-d(m.value),N=c(m.key),P=d(m.value),U=Math.min(y/2,6);return`
            M${N},${P+o-d(m.value)} 
            V${P+U} 
            Q${N},${P} ${N+U},${P} 
            H${N+y-U} 
            Q${N+y},${P} ${N+y},${P+U} 
            V${P+C} 
            Z
          `}).style("opacity",0).transition().duration(800).delay((m,y)=>y*50).style("opacity",1),s.append("g").attr("transform",`translate(0,${o})`).call(d3.axisBottom(a).tickSize(0)).selectAll("text").style("fill","#9CA3AF").style("font-size","12px").style("font-weight","600").attr("dy","15px"),s.append("g").call(d3.axisLeft(d).ticks(5).tickSize(0)).selectAll("text").style("fill","#9CA3AF").style("font-size","11px").style("font-weight","500"),s.selectAll(".domain").remove()}renderDonutChart(){let e=this.donutRef()?.nativeElement;if(!e)return;d3.select(e).selectAll("*").remove();let t=220,r=220,o=Math.min(t,r)/2-10,s=this.kpi().healthScore,a=d3.select(e).append("svg").attr("width",t).attr("height",r).append("g").attr("transform",`translate(${t/2},${r/2})`),c={a:s,b:100-s},l=d3.scaleOrdinal().domain(["a","b"]).range(["#007E7A","#4B5563"]),h=d3.pie().value(y=>y[1]).sort(null)(Object.entries(c)),m=d3.arc().innerRadius(o*.75).outerRadius(o).cornerRadius(10);a.selectAll("path").data(h).enter().append("path").attr("d",m).attr("fill",y=>l(y.data[0])).style("opacity",0).transition().duration(1e3).attrTween("d",function(y){let C=d3.interpolate(y.startAngle+.1,y.endAngle);return function(N){return y.endAngle=C(N),m(y)}}).style("opacity",1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=en({type:n,selectors:[["app-dashboard"]],viewQuery:function(t,r){t&1&&nh(r.chartRef,i5,5)(r.donutRef,o5,5),t&2&&l0(2)},decls:169,vars:11,consts:[["chartContainer",""],["donutContainer",""],[1,"max-w-[1600px]","mx-auto","space-y-8","pb-12","pt-4"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-6","animate-enter"],[1,"flex","items-center","gap-4","w-full","md:w-auto"],[1,"w-14","h-14","rounded-full","bg-sidebar","text-white","flex","items-center","justify-center","font-bold","text-xl","shadow-lg","border-4","border-white"],[1,"text-2xl","font-bold","text-dark","tracking-tight"],[1,"text-sm","text-muted"],[1,"relative","w-full","md:w-96"],["type","text","placeholder","Buscar no dashboard...",1,"w-full","h-12","pl-12","pr-4","rounded-full","bg-white","shadow-card","border","border-transparent","focus:border-primary/20","outline-none","text-sm","text-dark","focus:ring-4","focus:ring-primary/5","transition-all","placeholder:text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","absolute","left-5","top-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-4","gap-6"],[1,"bg-gradient-to-br","from-white","to-teal-50/50","rounded-[2rem]","p-6","shadow-card","border","border-white","flex","items-center","gap-5","hover:-translate-y-1","transition-transform","duration-300","animate-enter",2,"animation-delay","100ms"],[1,"w-16","h-16","rounded-2xl","bg-white","shadow-sm","flex","items-center","justify-center","text-primary","shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-xs","text-muted","font-bold","uppercase","tracking-wider","mb-1"],[1,"text-3xl","font-extrabold","text-dark"],[1,"text-[10px]","text-primary","font-bold","bg-white","px-2","py-0.5","rounded-full","inline-block","mt-1","shadow-sm"],[1,"bg-gradient-to-br","from-white","to-yellow-50/50","rounded-[2rem]","p-6","shadow-card","border","border-white","flex","items-center","gap-5","hover:-translate-y-1","transition-transform","duration-300","animate-enter",2,"animation-delay","200ms"],[1,"w-16","h-16","rounded-2xl","bg-white","shadow-sm","flex","items-center","justify-center","text-secondary","shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"text-[10px]","text-secondary","font-bold","bg-white","px-2","py-0.5","rounded-full","inline-block","mt-1","shadow-sm"],[1,"bg-gradient-to-br","from-white","to-gray-100/50","rounded-[2rem]","p-6","shadow-card","border","border-white","flex","items-center","gap-5","hover:-translate-y-1","transition-transform","duration-300","animate-enter",2,"animation-delay","300ms"],[1,"w-16","h-16","rounded-2xl","bg-white","shadow-sm","flex","items-center","justify-center","text-dark","shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-[10px]","text-gray-500","font-bold","bg-white","px-2","py-0.5","rounded-full","inline-block","mt-1","shadow-sm"],[1,"bg-gradient-to-br","from-white","to-red-50/50","rounded-[2rem]","p-6","shadow-card","border","border-white","flex","items-center","gap-5","hover:-translate-y-1","transition-transform","duration-300","animate-enter",2,"animation-delay","400ms"],[1,"w-16","h-16","rounded-2xl","bg-white","shadow-sm","flex","items-center","justify-center","text-danger","shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-[10px]","text-danger","font-bold","bg-white","px-2","py-0.5","rounded-full","inline-block","mt-1","shadow-sm"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8"],[1,"xl:col-span-2","bg-white","rounded-[2.5rem]","shadow-card","flex","flex-col","h-[400px]","animate-enter","overflow-hidden",2,"animation-delay","500ms"],[1,"flex","justify-between","items-center","p-8","pb-4","bg-gray-50/50","border-b","border-gray-100"],[1,"text-xl","font-bold","text-dark"],[1,"text-xs","text-muted","mt-1"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2","px-3","py-1","rounded-full","bg-white","border","border-gray-100","shadow-sm"],[1,"w-2.5","h-2.5","rounded-full","bg-primary"],[1,"text-xs","font-bold","text-dark"],[1,"w-2.5","h-2.5","rounded-full","bg-secondary"],[1,"flex-1","w-full","p-4","pt-2"],[1,"bg-sidebar","rounded-[2.5rem]","p-8","shadow-2xl","flex","flex-col","h-[400px]","animate-enter","relative","overflow-hidden",2,"animation-delay","600ms"],[1,"absolute","-top-10","-right-10","w-40","h-40","bg-white/5","rounded-full","blur-2xl"],[1,"text-xl","font-bold","text-white","mb-2","relative","z-10"],[1,"text-xs","text-gray-400","relative","z-10","mb-4"],[1,"flex-1","flex","items-center","justify-center","relative","z-10"],[1,"flex","items-center","justify-center"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","pointer-events-none"],[1,"text-5xl","font-extrabold","text-white","tracking-tighter","drop-shadow-lg"],[1,"flex","justify-center","gap-8","mt-4","relative","z-10"],[1,"text-center"],[1,"block","w-2","h-2","rounded-full","bg-primary","mx-auto","mb-1","ring-2","ring-primary/30"],[1,"text-[10px]","text-gray-300","font-bold"],[1,"block","w-2","h-2","rounded-full","bg-gray-600","mx-auto","mb-1"],[1,"text-[10px]","text-gray-500","font-bold"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8","pb-8"],[1,"xl:col-span-2","bg-white","rounded-[2.5rem]","shadow-card","animate-enter","overflow-hidden","flex","flex-col","h-[500px]",2,"animation-delay","700ms"],[1,"flex","justify-between","items-center","p-8","pb-6","border-b","border-gray-100","shrink-0"],[1,"w-10","h-10","rounded-full","bg-gray-50","text-dark","flex","items-center","justify-center","hover:bg-dark","hover:text-white","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"overflow-auto","flex-1","p-0","custom-scrollbar"],[1,"w-full","text-left","border-collapse"],[1,"text-[11px]","text-muted","font-bold","uppercase","tracking-wider","bg-gray-50","border-b","border-gray-100"],[1,"py-4","pl-8"],[1,"py-4"],[1,"py-4","text-right","pr-8"],[1,"text-sm"],[1,"group","hover:bg-gray-50","transition-colors","border-b","border-gray-50","last:border-0"],[1,"bg-white","rounded-[2.5rem]","p-8","shadow-card","flex","flex-col","animate-enter","border-t-4","border-danger/80","h-[500px]",2,"animation-delay","800ms"],[1,"flex","justify-between","items-center","mb-8","bg-gray-50","p-3","rounded-2xl","shrink-0"],[1,"text-center","opacity-40"],[1,"block","text-[10px]","font-bold","text-muted"],[1,"block","text-xs","font-bold","text-dark"],[1,"bg-white","text-dark","rounded-xl","px-3","py-2","text-center","shadow-md","border","border-gray-100","transform","scale-105"],[1,"block","text-[9px]","font-bold","text-primary"],[1,"block","text-sm","font-bold"],[1,"flex","items-center","justify-between","mb-4"],[1,"bg-red-50","text-danger","text-[10px]","font-bold","px-2","py-1","rounded-md"],[1,"flex-1","overflow-y-auto","space-y-3","custom-scrollbar","pr-2"],[1,"p-4","rounded-2xl","bg-white","border","border-gray-100","shadow-sm","hover:shadow-md","transition-all","relative","overflow-hidden","group"],[1,"p-6","rounded-3xl","bg-teal-50/50","text-center","border","border-teal-100"],[1,"p-4","rounded-2xl","bg-sidebar","text-white","relative","group","hover:scale-[1.02]","transition-transform","mt-auto","shadow-lg"],[1,"w-8","h-8","rounded-lg","bg-white/20","flex","items-center","justify-center","shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"font-bold","text-white","text-xs"],[1,"text-[10px]","text-gray-400"],[1,"py-4","pl-8","font-bold","text-dark"],[1,"block","text-[10px]","font-normal","text-gray-400","mt-0.5"],[1,"py-4","text-muted"],[1,"flex","items-center","gap-3"],[1,"w-24","h-2","bg-gray-100","rounded-full","overflow-hidden"],[1,"h-full","bg-secondary","rounded-full"],[1,"inline-flex","items-center","gap-1","px-3","py-1","rounded-md","text-[10px]","font-bold","bg-yellow-50","text-secondary","border","border-yellow-100/50"],[1,"w-1.5","h-1.5","rounded-full","bg-secondary"],["colspan","4",1,"py-12","text-center","text-muted","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","mx-auto","text-gray-200","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"absolute","left-0","top-0","bottom-0","w-1","bg-danger"],[1,"flex","items-start","gap-4"],[1,"w-10","h-10","rounded-xl","bg-red-50","text-danger","flex","items-center","justify-center","shrink-0"],[1,"font-bold","text-dark","text-sm","leading-tight","group-hover:text-danger","transition-colors"],[1,"text-[10px]","text-muted","mt-1","font-medium"],[1,"text-sm","font-bold","text-primary"]],template:function(t,r){t&1&&(F(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),D(4," AD "),B(),F(5,"div")(6,"h1",6),D(7,"Ol\xE1, Administrador"),B(),F(8,"p",7),D(9,"Vis\xE3o geral do sistema de EPIs."),B()()(),F(10,"div",8),Ae(11,"input",9),X(),F(12,"svg",10),Ae(13,"path",11),B()()(),ye(),F(14,"div",12)(15,"div",13)(16,"div",14),X(),F(17,"svg",15),Ae(18,"path",16),B()(),ye(),F(19,"div")(20,"p",17),D(21,"Entradas"),B(),F(22,"h3",18),D(23),B(),F(24,"p",19),D(25,"+ Hoje"),B()()(),F(26,"div",20)(27,"div",21),X(),F(28,"svg",15),Ae(29,"path",22),B()(),ye(),F(30,"div")(31,"p",17),D(32,"Sa\xEDdas"),B(),F(33,"h3",18),D(34),B(),F(35,"p",23),D(36,"- Hoje"),B()()(),F(37,"div",24)(38,"div",25),X(),F(39,"svg",15),Ae(40,"path",26),B()(),ye(),F(41,"div")(42,"p",17),D(43,"Positivos"),B(),F(44,"h3",18),D(45),B(),F(46,"p",27),D(47,"Itens"),B()()(),F(48,"div",28)(49,"div",29),X(),F(50,"svg",15),Ae(51,"path",30),B()(),ye(),F(52,"div")(53,"p",17),D(54,"Alertas"),B(),F(55,"h3",18),D(56),B(),F(57,"p",31),D(58,"Zerados"),B()()()(),F(59,"div",32)(60,"div",33)(61,"div",34)(62,"div")(63,"h3",35),D(64,"Movimenta\xE7\xE3o Semanal"),B(),F(65,"p",36),D(66,"Comparativo de fluxo nos \xFAltimos 7 dias"),B()(),F(67,"div",37)(68,"div",38),Ae(69,"span",39),F(70,"span",40),D(71,"Entrada"),B()(),F(72,"div",38),Ae(73,"span",41),F(74,"span",40),D(75,"Sa\xEDda"),B()()()(),Ae(76,"div",42,0),B(),F(78,"div",43),Ae(79,"div",44),F(80,"h3",45),D(81,"Sa\xFAde do Estoque"),B(),F(82,"p",46),D(83,"Porcentagem de itens abastecidos."),B(),F(84,"div",47),Ae(85,"div",48,1),F(87,"div",49)(88,"span",50),D(89),B()()(),F(90,"div",51)(91,"div",52),Ae(92,"span",53),F(93,"p",54),D(94,"Abastecido"),B()(),F(95,"div",52),Ae(96,"span",55),F(97,"p",56),D(98,"Vazio/Cr\xEDtico"),B()()()()(),F(99,"div",57)(100,"div",58)(101,"div",59)(102,"h3",35),D(103,"A\xE7\xE3o de Compra"),B(),F(104,"button",60),X(),F(105,"svg",61),Ae(106,"path",62),B()()(),ye(),F(107,"div",63)(108,"table",64)(109,"thead")(110,"tr",65)(111,"th",66),D(112,"Produto"),B(),F(113,"th",67),D(114,"Respons\xE1vel"),B(),F(115,"th",67),D(116,"N\xEDvel de Estoque"),B(),F(117,"th",68),D(118,"Status"),B()()(),F(119,"tbody",69),mt(120,s5,17,5,"tr",70,hN),be(122,a5,5,0,"tr"),B()()()(),F(123,"div",71)(124,"div",72)(125,"div",73)(126,"span",74),D(127,"SEG"),B(),F(128,"span",75),D(129,"03"),B()(),F(130,"div",73)(131,"span",74),D(132,"TER"),B(),F(133,"span",75),D(134,"04"),B()(),F(135,"div",76)(136,"span",77),D(137,"HOJE"),B(),F(138,"span",78),D(139),B()(),F(140,"div",73)(141,"span",74),D(142,"QUI"),B(),F(143,"span",75),D(144),B()(),F(145,"div",73)(146,"span",74),D(147,"SEX"),B(),F(148,"span",75),D(149),B()()(),F(150,"div",79)(151,"h3",35),D(152,"Itens Cr\xEDticos"),B(),F(153,"span",80),D(154),B()(),F(155,"div",81),mt(156,c5,11,2,"div",82,hN),be(158,u5,3,0,"div",83),F(159,"div",84)(160,"div",37)(161,"div",85),X(),F(162,"svg",86),Ae(163,"path",87),B()(),ye(),F(164,"div")(165,"h4",88),D(166,"Relat\xF3rio Di\xE1rio"),B(),F(167,"p",89),D(168,"Verificar pend\xEAncias."),B()()()()()()()()),t&2&&(R(23),fe(r.kpi().totalIn),R(11),fe(r.kpi().totalOut),R(11),fe(r.kpi().positiveStock),R(11),fe(r.kpi().zeroStock),R(33),He("",r.kpi().healthScore,"%"),R(31),gt(r.kpi().purchaseActionList),R(2),De(r.kpi().purchaseActionList.length===0?122:-1),R(17),fe(r.today.getDate()),R(5),fe(r.today.getDate()+1),R(5),fe(r.today.getDate()+2),R(5),He("",r.kpi().zeroStock," Zerados"),R(2),gt(r.kpi().zeroStockList),R(2),De(r.kpi().zeroStockList.length===0?158:-1))},dependencies:[un,Zi],encapsulation:2})}};var pN=(n,e)=>e.id;function l5(n,e){n&1&&(_(0,"div",32),se(1,"div",40),D(2," CR\xCDTICO "),w())}function d5(n,e){n&1&&(_(0,"div",33),D(1,"BAIXO"),w())}function f5(n,e){n&1&&(_(0,"div",34),D(1,"OK"),w())}function h5(n,e){if(n&1&&(_(0,"div",20)(1,"div",25)(2,"div",26),D(3),w(),_(4,"div")(5,"div",27),D(6),w(),_(7,"div",28),D(8),w()()(),_(9,"div",29)(10,"span",30),D(11),w()(),_(12,"div",31),be(13,l5,3,0,"div",32)(14,d5,2,0,"div",33)(15,f5,2,0,"div",34),w(),_(16,"div",35)(17,"span",36),D(18),w(),_(19,"span",37),D(20,"un"),w()(),_(21,"div",38)(22,"span",39),D(23),w()()()),n&2){let t=e.$implicit;R(3),He(" ",t.codigo?t.codigo.substring(0,2):"??"," "),R(3),fe(t.nome),R(2),fe(t.codigo),R(2),Ee("bg-teal-50",t.categoria==="UNIFORME")("text-primary",t.categoria==="UNIFORME")("bg-yellow-50",t.categoria==="EPI")("text-yellow-700",t.categoria==="EPI"),R(),He(" ",t.categoria," "),R(2),De(t.estoque_atual===0?13:t.estoque_atual<=t.estoque_min?14:15),R(5),fe(t.estoque_atual),R(5),Mo(" ",t.estoque_min,"/",t.estoque_max," ")}}function p5(n,e){if(n&1&&(_(0,"div",41)(1,"div",42)(2,"div",43)(3,"h3",44),D(4),w(),_(5,"p",45),D(6),w()(),_(7,"span",46),D(8),w()(),_(9,"div",47)(10,"div")(11,"span",48),D(12,"Saldo"),w(),_(13,"div",49),D(14),w()(),_(15,"div",50)(16,"span",48),D(17,"Min/Max"),w(),_(18,"div",51),D(19),w()()()()),n&2){let t=e.$implicit,r=e.$index;Si("animation-delay",r*30+"ms"),R(4),fe(t.nome),R(2),fe(t.codigo),R(),Ee("bg-teal-50",t.categoria==="UNIFORME")("text-primary",t.categoria==="UNIFORME")("bg-yellow-50",t.categoria==="EPI")("text-yellow-700",t.categoria==="EPI"),R(),He(" ",t.categoria?t.categoria.substring(0,3):"---"," "),R(5),Ee("text-danger",t.estoque_atual===0)("text-secondary",t.estoque_atual>0&&t.estoque_atual<=t.estoque_min)("text-dark",t.estoque_atual>t.estoque_min),R(),He(" ",t.estoque_atual," "),R(5),Mo("",t.estoque_min," / ",t.estoque_max)}}function m5(n,e){n&1&&(_(0,"div",24),X(),_(1,"svg",52),se(2,"path",8),w(),ye(),_(3,"p",53),D(4,"Nenhum produto encontrado."),w()())}var Um=class n{constructor(){this.db=j(Ln);this.searchTerm=Ne("");this.activeCategory=Ne("TODOS");this.filteredProducts=tt(()=>{let e=this.searchTerm().toLowerCase(),t=this.activeCategory();return this.db.products().filter(r=>{let i=r.nome?r.nome.toLowerCase():"",o=r.codigo?r.codigo.toLowerCase():"",s=i.includes(e)||o.includes(e),a=t==="TODOS"||r.categoria===t;return s&&a})})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=en({type:n,selectors:[["app-inventory"]],decls:41,vars:26,consts:[[1,"flex","flex-col","relative","max-w-[1600px]","mx-auto","px-4","md:px-8","py-6","space-y-6"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","animate-enter"],[1,"text-3xl","font-bold","text-dark","tracking-tight"],[1,"text-muted","text-sm","font-medium","mt-1"],[1,"bg-white","p-2","pr-4","rounded-full","shadow-card","flex","flex-col","md:flex-row","items-center","gap-3","w-full","md:w-auto"],[1,"relative","w-full","md:w-80","group"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","group-focus-within:text-primary","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Buscar item...",1,"block","w-full","pl-11","pr-4","py-2.5","bg-gray-50/50","rounded-full","text-dark","text-sm","placeholder:text-gray-400","focus:bg-white","focus:ring-2","focus:ring-primary/20","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"flex","gap-1","bg-gray-100/50","p-1","rounded-full"],[1,"px-5","py-2","rounded-full","text-xs","font-bold","transition-all",3,"click"],[1,"flex-1"],[1,"hidden","md:block","bg-white","rounded-[2.5rem]","shadow-card","flex","flex-col","animate-enter",2,"animation-delay","100ms"],[1,"grid","grid-cols-12","gap-4","p-6","py-5","border-b","border-gray-100","bg-gray-50","sticky","top-0","z-10"],[1,"col-span-5","text-xs","font-bold","text-muted","uppercase","tracking-wider","pl-4"],[1,"col-span-2","text-xs","font-bold","text-muted","uppercase","tracking-wider","text-center"],[1,"col-span-2","text-xs","font-bold","text-muted","uppercase","tracking-wider","text-right"],[1,"col-span-1","text-xs","font-bold","text-muted","uppercase","tracking-wider","text-right","pr-4"],[1,"p-0"],[1,"grid","grid-cols-12","gap-4","items-center","p-4","hover:bg-teal-50/20","transition-all","border-b","border-gray-50","last:border-0","group"],[1,"md:hidden","pb-24"],[1,"grid","grid-cols-1","gap-4"],[1,"bg-white","rounded-[1.5rem]","p-5","shadow-card","animate-enter",3,"animation-delay"],[1,"flex","flex-col","items-center","justify-center","py-20","opacity-50"],[1,"col-span-5","flex","items-center","gap-4","pl-4"],[1,"w-10","h-10","rounded-xl","bg-gray-50","text-[10px]","font-bold","text-gray-400","flex","items-center","justify-center","shrink-0","border","border-gray-100","group-hover:bg-white","group-hover:shadow-sm","transition-all"],[1,"font-bold","text-dark","text-sm","group-hover:text-primary","transition-colors","leading-tight"],[1,"text-[11px]","font-medium","text-gray-400","mt-0.5"],[1,"col-span-2","text-center"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-[10px]","font-bold","tracking-wide"],[1,"col-span-2","flex","justify-center"],[1,"px-3","py-1","rounded-full","bg-red-50","text-danger","text-[10px]","font-bold","flex","items-center","gap-1.5","border","border-red-100"],[1,"px-3","py-1","rounded-full","bg-yellow-50","text-yellow-700","text-[10px]","font-bold","border","border-yellow-100"],[1,"px-3","py-1","rounded-full","bg-green-50","text-primary","text-[10px]","font-bold","border","border-green-100"],[1,"col-span-2","text-right"],[1,"text-base","font-bold","text-dark"],[1,"text-xs","text-muted","font-normal"],[1,"col-span-1","text-right","pr-4"],[1,"text-[10px]","font-medium","text-gray-400","bg-gray-100","px-2","py-1","rounded-md"],[1,"w-1.5","h-1.5","rounded-full","bg-danger","animate-pulse"],[1,"bg-white","rounded-[1.5rem]","p-5","shadow-card","animate-enter"],[1,"flex","justify-between","items-start","mb-3"],[1,"min-w-0","pr-2"],[1,"font-bold","text-dark","text-sm","leading-tight"],[1,"text-[11px]","font-medium","text-gray-400","mt-1"],[1,"text-[9px]","font-bold","px-2","py-1","rounded-full","uppercase","shrink-0"],[1,"flex","items-center","justify-between","mt-4","bg-gray-50","rounded-xl","p-3"],[1,"text-[10px]","text-muted","uppercase","font-bold","block","mb-0.5"],[1,"text-xl","font-bold"],[1,"text-right"],[1,"text-sm","font-medium","text-dark"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-300","mb-4"],[1,"text-muted","font-medium"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),D(4,"Invent\xE1rio"),w(),_(5,"p",3),D(6,"Sistema de materiais."),w()(),_(7,"div",4)(8,"div",5)(9,"div",6),X(),_(10,"svg",7),se(11,"path",8),w()(),ye(),_(12,"input",9),Gt("ngModelChange",function(o){return nn(r.searchTerm,o)||(r.searchTerm=o),o}),w()(),_(13,"div",10)(14,"button",11),ee("click",function(){return r.activeCategory.set("TODOS")}),D(15," Todos "),w(),_(16,"button",11),ee("click",function(){return r.activeCategory.set("EPI")}),D(17," EPIs "),w(),_(18,"button",11),ee("click",function(){return r.activeCategory.set("UNIFORME")}),D(19," Uniformes "),w()()()(),_(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),D(24,"Item / C\xF3digo"),w(),_(25,"div",16),D(26,"Categoria"),w(),_(27,"div",16),D(28,"Status"),w(),_(29,"div",17),D(30,"Saldo"),w(),_(31,"div",18),D(32,"Limites"),w()(),_(33,"div",19),mt(34,h5,24,16,"div",20,pN),w()(),_(36,"div",21)(37,"div",22),mt(38,p5,20,22,"div",23,pN),w()(),be(40,m5,5,0,"div",24),w()()),t&2&&(R(12),$t("ngModel",r.searchTerm),R(2),Ee("bg-white",r.activeCategory()==="TODOS")("text-dark",r.activeCategory()==="TODOS")("shadow-sm",r.activeCategory()==="TODOS")("text-muted",r.activeCategory()!=="TODOS"),R(2),Ee("bg-white",r.activeCategory()==="EPI")("text-secondary",r.activeCategory()==="EPI")("shadow-sm",r.activeCategory()==="EPI")("text-muted",r.activeCategory()!=="EPI"),R(2),Ee("bg-white",r.activeCategory()==="UNIFORME")("text-primary",r.activeCategory()==="UNIFORME")("shadow-sm",r.activeCategory()==="UNIFORME")("text-muted",r.activeCategory()!=="UNIFORME"),R(16),gt(r.filteredProducts()),R(4),gt(r.filteredProducts()),R(2),De(r.filteredProducts().length===0?40:-1))},dependencies:[un,Zi,Yi,mc,bs],encapsulation:2})}};var Dw=(n,e)=>e.id;function g5(n,e){n&1&&(X(),_(0,"svg",40),se(1,"path",44),w())}function y5(n,e){n&1&&(X(),_(0,"svg",41),se(1,"path",44),w())}function v5(n,e){if(n&1&&(_(0,"div",38)(1,"div",39),be(2,g5,2,0,":svg:svg",40)(3,y5,2,0,":svg:svg",41),w(),_(4,"div")(5,"p",42),D(6),w(),_(7,"p",43),D(8),w()()()),n&2){let t=e.$implicit;Ee("border-secondary",t.type==="WARNING")("border-danger",t.type==="DANGER"),R(2),De(t.type==="DANGER"?2:3),R(4),fe(t.type==="DANGER"?"Cr\xEDtico":"Aten\xE7\xE3o"),R(2),fe(t.message)}}function _5(n,e){if(n&1){let t=st();_(0,"div",52)(1,"input",60),Gt("ngModelChange",function(i){ae(t);let o=q(2);return nn(o.tempMin,i)||(o.tempMin=i),ce(i)}),w(),_(2,"span",61),D(3,"/"),w(),_(4,"input",60),Gt("ngModelChange",function(i){ae(t);let o=q(2);return nn(o.tempMax,i)||(o.tempMax=i),ce(i)}),w()()}if(n&2){let t=q(2);R(),$t("ngModel",t.tempMin),R(3),$t("ngModel",t.tempMax)}}function E5(n,e){if(n&1&&(_(0,"span",53),D(1),w()),n&2){let t=q().$implicit;R(),Mo("",t.estoque_min," / ",t.estoque_max)}}function I5(n,e){if(n&1){let t=st();_(0,"div",54)(1,"button",62),ee("click",function(){ae(t);let i=q().$implicit,o=q();return ce(o.saveEdit(i))}),X(),_(2,"svg",63),se(3,"path",64),w()(),ye(),_(4,"button",65),ee("click",function(){ae(t);let i=q(2);return ce(i.cancelEdit())}),X(),_(5,"svg",63),se(6,"path",66),w()()()}}function w5(n,e){if(n&1){let t=st();_(0,"button",67),ee("click",function(){ae(t);let i=q().$implicit,o=q();return ce(o.startEdit(i))}),X(),_(1,"svg",63),se(2,"path",68),w()()}}function C5(n,e){if(n&1){let t=st();_(0,"tr",45)(1,"td",46)(2,"input",47),ee("change",function(){let i=ae(t).$implicit,o=q();return ce(o.toggleItem(i.id))}),w()(),_(3,"td",48)(4,"div",49),D(5),w(),_(6,"div",50),D(7),w()(),_(8,"td",51),be(9,_5,5,2,"div",52)(10,E5,2,2,"span",53),w(),_(11,"td",46),be(12,I5,7,0,"div",54)(13,w5,3,0,"button",55),w(),_(14,"td",56)(15,"span",57),D(16),w()(),_(17,"td",46)(18,"div",58)(19,"input",59),ee("input",function(i){let o=ae(t).$implicit,s=q();return ce(s.updateQty(o.id,i))}),w()()()()}if(n&2){let t=e.$implicit,r=q();Ee("bg-teal-50/30",r.isSelected(t.id)),R(2),Ft("checked",r.selection.has(t.id)),R(3),fe(t.nome),R(2),fe(t.codigo),R(2),De(r.editingId()===t.id?9:10),R(3),De(r.editingId()===t.id?12:13),R(3),Ee("bg-red-50",t.estoque_atual<=t.estoque_min)("text-danger",t.estoque_atual<=t.estoque_min)("bg-gray-100",t.estoque_atual>t.estoque_min)("text-dark",t.estoque_atual>t.estoque_min),R(),He(" ",t.estoque_atual," "),R(3),Ft("disabled",!r.selection.has(t.id))("value",r.quantities[t.id]||"")}}function b5(n,e){n&1&&(X(),_(0,"svg",73),se(1,"path",81),w())}function D5(n,e){if(n&1){let t=st();_(0,"div",82),ee("click",function(i){return ae(t),ce(i.stopPropagation())}),_(1,"input",83),ee("input",function(i){ae(t);let o=q().$implicit,s=q();return ce(s.updateQty(o.id,i))}),w()()}if(n&2){let t=q().$implicit,r=q();R(),Ft("value",r.quantities[t.id]||"")}}function A5(n,e){if(n&1){let t=st();_(0,"div",69),ee("click",function(){let i=ae(t).$implicit,o=q();return ce(o.toggleItem(i.id))}),_(1,"div",70)(2,"div",71)(3,"div",72),be(4,b5,2,0,":svg:svg",73),w()(),_(5,"div",74)(6,"h4",75),D(7),w(),_(8,"div",76)(9,"span",77),D(10),w(),se(11,"span",78),_(12,"span",79),D(13),w()()()(),be(14,D5,2,1,"div",80),w()}if(n&2){let t=e.$implicit,r=q();Ee("border-primary",r.isSelected(t.id))("bg-white",r.isSelected(t.id))("shadow-lg",r.isSelected(t.id)),R(3),Ee("border-gray-300",!r.isSelected(t.id))("border-primary",r.isSelected(t.id))("bg-primary",r.isSelected(t.id)),R(),De(r.isSelected(t.id)?4:-1),R(3),fe(t.nome),R(3),fe(t.codigo),R(2),Ee("text-danger",t.estoque_atual<=t.estoque_min),R(),He("Saldo: ",t.estoque_atual),R(),De(r.isSelected(t.id)?14:-1)}}function S5(n,e){n&1&&(_(0,"div",26),X(),_(1,"svg",84),se(2,"path",9),w(),D(3," Nenhum produto encontrado. "),w())}var Bm=class n{constructor(){this.db=j(Ln);this.searchTerm=Ne("");this.movementType="SAIDA";this.selection=new Set;this.quantities={};this.editingId=Ne(null);this.tempMin=0;this.tempMax=0;this.alerts=Ne([]);this.motivo="";this.observacao="";this.filteredProducts=tt(()=>{let e=this.searchTerm().toLowerCase();return this.db.products().filter(t=>{let r=t.nome?t.nome.toLowerCase():"";return(t.codigo?t.codigo.toLowerCase():"").includes(e)||r.includes(e)}).slice(0,50)})}startEdit(e){this.editingId.set(e.id),this.tempMin=e.estoque_min,this.tempMax=e.estoque_max}cancelEdit(){this.editingId.set(null)}saveEdit(e){this.db.updateProduct(e.id,{estoque_min:this.tempMin,estoque_max:this.tempMax}),this.editingId.set(null),this.pushAlert({id:Date.now().toString(),message:`Limites atualizados para ${e.codigo}.`,type:"WARNING"})}toggleItem(e){this.selection.has(e)?(this.selection.delete(e),delete this.quantities[e]):(this.selection.add(e),this.quantities[e]||(this.quantities[e]=1))}toggleAll(e){e.target.checked?this.filteredProducts().forEach(r=>{this.selection.add(r.id),this.quantities[r.id]||(this.quantities[r.id]=1)}):(this.selection.clear(),this.quantities={})}updateQty(e,t){let r=parseInt(t.target.value);r>0&&(this.quantities[e]=r)}isSelected(e){return this.selection.has(e)}pushAlert(e){this.alerts.update(t=>[...t,e]),setTimeout(()=>{this.alerts.update(t=>t.filter(r=>r.id!==e.id))},5e3)}submitMovements(){if(this.selection.size===0)return;let e=Array.from(this.selection),t=0,r=this.db.products();e.forEach(i=>{let o=this.quantities[i]||0;if(o>0&&(this.db.addMovement({tipo:this.movementType,produtoId:i,quantidade:o,atendente:"Admin",centroCusto:this.motivo||"Geral",observacao:this.observacao}),t++,this.movementType==="SAIDA")){let s=r.find(a=>a.id===i);if(s){let a=s.estoque_atual-o;a<=s.estoque_min?this.pushAlert({id:crypto.randomUUID(),type:"DANGER",message:`ALERTA: ${s.nome} atingiu o m\xEDnimo (${s.estoque_min})!`}):a<=s.estoque_min*1.1&&this.pushAlert({id:crypto.randomUUID(),type:"WARNING",message:`ATEN\xC7\xC3O: ${s.nome} est\xE1 pr\xF3ximo do fim.`})}}}),t>0&&this.alerts().length===0&&alert(`${t} itens movimentados com sucesso!`),this.selection.clear(),this.quantities={},this.motivo="",this.observacao=""}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=en({type:n,selectors:[["app-movements"]],decls:54,vars:18,consts:[[1,"flex","flex-col","h-full","relative","max-w-[1600px]","mx-auto","px-4","md:px-8","py-6","space-y-6"],[1,"fixed","top-6","right-6","z-[100]","flex","flex-col","gap-3","pointer-events-none"],[1,"pointer-events-auto","bg-white","shadow-xl","rounded-2xl","p-4","w-80","animate-slide-in-right","flex","items-start","gap-4","border-l-4",3,"border-secondary","border-danger"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","animate-enter"],[1,"text-3xl","font-bold","text-dark","tracking-tight"],[1,"text-muted","text-sm","mt-1","font-medium"],[1,"relative","w-full","md:w-96","group"],["type","text","placeholder","Pesquisar para adicionar...",1,"w-full","bg-white","h-12","rounded-full","pl-12","pr-6","shadow-card","text-sm","focus:outline-none","focus:ring-2","focus:ring-primary/20","text-dark","transition-all","placeholder:text-gray-400",3,"ngModelChange","ngModel"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","absolute","left-5","top-3.5","group-focus-within:text-primary","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"flex-1","bg-white","rounded-[2.5rem]","shadow-card","overflow-hidden","flex","flex-col","relative","animate-enter",2,"animation-delay","100ms"],[1,"hidden","md:block","overflow-y-auto","custom-scrollbar","flex-1","pb-32"],[1,"w-full","text-left","border-collapse"],[1,"bg-white","sticky","top-0","z-10"],[1,"border-b","border-gray-100"],[1,"p-6","w-16","text-center"],[1,"relative","flex","items-center","justify-center"],["type","checkbox",1,"w-5","h-5","rounded-md","border-gray-300","text-primary","focus:ring-primary","cursor-pointer",3,"change"],[1,"p-6","text-xs","font-bold","text-muted","uppercase","tracking-wider"],[1,"p-6","text-xs","font-bold","text-muted","uppercase","tracking-wider","text-right"],[1,"p-6","text-xs","font-bold","text-muted","uppercase","tracking-wider","text-center"],[1,"p-6","text-xs","font-bold","text-muted","uppercase","tracking-wider","text-center","w-40"],[1,"divide-y","divide-gray-50"],[1,"hover:bg-gray-50/80","transition-colors","group",3,"bg-teal-50/30"],[1,"md:hidden","space-y-4","p-4","pb-48","animate-enter",2,"animation-delay","150ms"],[1,"bg-gray-50","p-5","rounded-[1.5rem]","border","border-transparent","transition-all",3,"border-primary","bg-white","shadow-lg"],[1,"py-20","text-center","text-muted","text-sm","flex","flex-col","items-center"],[1,"absolute","bottom-8","left-4","right-4","md:left-1/2","md:-translate-x-1/2","md:w-[800px]","z-20"],[1,"bg-dark/95","backdrop-blur-md","shadow-2xl","rounded-2xl","p-2.5","flex","flex-col","md:flex-row","gap-3","animate-fade-in-up","border","border-white/10","ring-1","ring-black/5"],[1,"bg-white/10","p-1","rounded-xl","flex","shrink-0","w-full","md:w-auto"],[1,"flex-1","md:w-32","py-3","rounded-lg","text-xs","font-bold","transition-all","duration-300","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex","flex-col","md:flex-row","gap-2","w-full"],["type","text","placeholder","Centro de Custo / Motivo",1,"w-full","bg-white/10","border","border-white/10","rounded-xl","px-4","py-3","text-sm","text-white","placeholder-white/40","focus:bg-white/20","focus:border-white/30","outline-none","transition-all",3,"ngModelChange","ngModel"],["type","text","placeholder","Obs.",1,"w-full","md:w-48","bg-white/10","border","border-white/10","rounded-xl","px-4","py-3","text-sm","text-white","placeholder-white/40","focus:bg-white/20","focus:border-white/30","outline-none","transition-all",3,"ngModelChange","ngModel"],[1,"w-full","md:w-auto","bg-white","hover:bg-gray-100","disabled:bg-white/10","disabled:text-white/20","text-dark","font-bold","py-3","px-8","rounded-xl","shadow-lg","transition-all","active:scale-95","flex","items-center","justify-center","gap-2","shrink-0",3,"click","disabled"],[1,"text-xs","uppercase","tracking-widest"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"],[1,"pointer-events-auto","bg-white","shadow-xl","rounded-2xl","p-4","w-80","animate-slide-in-right","flex","items-start","gap-4","border-l-4"],[1,"shrink-0","pt-0.5"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-danger"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-secondary"],[1,"font-bold","text-sm","text-dark"],[1,"text-xs","text-muted","mt-0.5","leading-relaxed"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"hover:bg-gray-50/80","transition-colors","group"],[1,"p-6","text-center"],["type","checkbox",1,"w-5","h-5","rounded-md","border-gray-300","text-primary","focus:ring-primary","cursor-pointer",3,"change","checked"],[1,"p-6"],[1,"font-bold","text-dark","text-sm"],[1,"text-[11px]","text-gray-400","font-medium","mt-1"],[1,"p-6","text-right","text-xs","text-muted","font-medium"],[1,"flex","gap-2","justify-end","items-center","bg-white","p-1","rounded-lg","shadow-sm","border","border-gray-200"],[1,"bg-gray-100","px-2","py-1","rounded-md"],[1,"flex","gap-2","justify-center"],[1,"text-gray-400","hover:text-primary","transition-colors","p-2","rounded-full","hover:bg-gray-100"],[1,"p-6","text-right"],[1,"font-bold","text-sm","px-3","py-1","rounded-full"],[1,"relative"],["type","number","placeholder","0",1,"w-full","bg-gray-50","rounded-xl","px-4","py-2","text-center","text-sm","font-bold","text-dark","focus:bg-white","focus:ring-2","focus:ring-primary","disabled:opacity-50","transition-all","outline-none","border-none",3,"input","disabled","value"],["type","number",1,"w-10","text-center","text-xs","outline-none","font-bold","text-dark","bg-transparent",3,"ngModelChange","ngModel"],[1,"text-gray-300"],[1,"w-8","h-8","rounded-full","bg-primary","text-white","flex","items-center","justify-center","hover:scale-110","transition-transform",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"w-8","h-8","rounded-full","bg-gray-200","text-muted","flex","items-center","justify-center","hover:scale-110","transition-transform",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-gray-400","hover:text-primary","transition-colors","p-2","rounded-full","hover:bg-gray-100",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"bg-gray-50","p-5","rounded-[1.5rem]","border","border-transparent","transition-all",3,"click"],[1,"flex","items-start","gap-4"],[1,"w-6","flex","justify-center","shrink-0","pt-1"],[1,"w-6","h-6","rounded-lg","border-2","flex","items-center","justify-center","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],[1,"flex-1","min-w-0"],[1,"font-bold","text-dark","text-sm","truncate"],[1,"flex","items-center","gap-2","mt-1.5","text-xs"],[1,"text-gray-400","font-medium"],[1,"w-1","h-1","rounded-full","bg-gray-300"],[1,"font-bold","text-muted"],[1,"mt-4","animate-scale-in","pl-10"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"],[1,"mt-4","animate-scale-in","pl-10",3,"click"],["type","number","placeholder","Quantidade","autoFocus","",1,"w-full","bg-gray-100","rounded-xl","py-3","text-center","font-bold","text-lg","focus:ring-2","focus:ring-primary","outline-none","text-dark","placeholder:text-gray-400",3,"input","value"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-200","mb-2"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),mt(2,v5,9,7,"div",2,Dw),w(),_(4,"div",3)(5,"div")(6,"h2",4),D(7,"Movimenta\xE7\xF5es"),w(),_(8,"p",5),D(9,"Controle de fluxo de estoque."),w()(),_(10,"div",6)(11,"input",7),Gt("ngModelChange",function(o){return nn(r.searchTerm,o)||(r.searchTerm=o),o}),w(),X(),_(12,"svg",8),se(13,"path",9),w()()(),ye(),_(14,"div",10)(15,"div",11)(16,"table",12)(17,"thead",13)(18,"tr",14)(19,"th",15)(20,"div",16)(21,"input",17),ee("change",function(o){return r.toggleAll(o)}),w()()(),_(22,"th",18),D(23,"Produto"),w(),_(24,"th",19),D(25,"Limites"),w(),_(26,"th",20),D(27,"A\xE7\xF5es"),w(),_(28,"th",19),D(29,"Saldo"),w(),_(30,"th",21),D(31,"Qtd Movimento"),w()()(),_(32,"tbody",22),mt(33,C5,20,18,"tr",23,Dw),w()()(),_(35,"div",24),mt(36,A5,15,19,"div",25,Dw),w(),be(38,S5,4,0,"div",26),w(),_(39,"div",27)(40,"div",28)(41,"div",29)(42,"button",30),ee("click",function(){return r.movementType="SAIDA"}),D(43," SA\xCDDA "),w(),_(44,"button",30),ee("click",function(){return r.movementType="ENTRADA"}),D(45," ENTRADA "),w()(),_(46,"div",31)(47,"input",32),Gt("ngModelChange",function(o){return nn(r.motivo,o)||(r.motivo=o),o}),w(),_(48,"input",33),Gt("ngModelChange",function(o){return nn(r.observacao,o)||(r.observacao=o),o}),w()(),_(49,"button",34),ee("click",function(){return r.submitMovements()}),_(50,"span",35),D(51),w(),X(),_(52,"svg",36),se(53,"path",37),w()()()()()),t&2&&(R(2),gt(r.alerts()),R(9),$t("ngModel",r.searchTerm),R(22),gt(r.filteredProducts()),R(3),gt(r.filteredProducts()),R(2),De(r.filteredProducts().length===0?38:-1),R(4),Ee("bg-secondary",r.movementType==="SAIDA")("text-dark",r.movementType==="SAIDA")("text-white",r.movementType!=="SAIDA"),R(2),Ee("bg-primary",r.movementType==="ENTRADA")("text-white",r.movementType==="ENTRADA")("text-white",r.movementType!=="ENTRADA"),R(3),$t("ngModel",r.motivo),R(),$t("ngModel",r.observacao),R(),Ft("disabled",r.selection.size===0),R(2),He("",r.selection.size," Itens"))},dependencies:[un,Zi,Yi,Zl,mc,bs],encapsulation:2})}};var mN=(n,e)=>e.id,T5=(n,e)=>e.uniqueKey,x5=(n,e)=>e.produtoId;function M5(n,e){if(n&1){let t=st();_(0,"button",19),ee("click",function(){ae(t);let i=q(2);return ce(i.filterDate="")}),D(1,"\u2715"),w()}}function R5(n,e){n&1&&(_(0,"div",39),se(1,"div",40),_(2,"span",41),D(3,"Aten\xE7\xE3o"),w()())}function N5(n,e){if(n&1){let t=st();_(0,"div",20),ee("click",function(){let i=ae(t).$implicit,o=q(2);return ce(o.openReceive(i))}),se(1,"div",21),_(2,"div",22)(3,"div")(4,"h3",23),D(5),Ro(6,"date"),_(7,"span",24),D(8),Ro(9,"date"),w()(),_(10,"p",25),D(11),w()(),_(12,"span",26),D(13),w()(),_(14,"div",27)(15,"div",28)(16,"div",29),X(),_(17,"svg",30),se(18,"path",31),w()(),ye(),_(19,"span",32),D(20),w()()(),_(21,"div",33)(22,"span",34),D(23),w(),_(24,"div",35),X(),_(25,"svg",36),se(26,"path",37),w()()(),ye(),se(27,"div",38),be(28,R5,4,0,"div",39),w()}if(n&2){let t=e.$implicit,r=e.$index;Si("animation-delay",100+r*50+"ms"),R(),Ee("bg-primary",t.status==="RECEBIDO")("bg-secondary",t.status!=="RECEBIDO"),R(4),He("",No(6,21,t.dataCriacao,"dd")," "),R(3),fe(No(9,24,t.dataCriacao,"MMM")),R(3),He("#",t.numero),R(),Ee("bg-teal-50",t.status==="RECEBIDO")("text-primary",t.status==="RECEBIDO")("bg-yellow-50",t.status!=="RECEBIDO")("text-yellow-700",t.status!=="RECEBIDO"),R(),He(" ",t.status," "),R(7),fe(t.fornecedor||"Fornecedor Geral"),R(3),He("",t.itens.length," Itens"),R(5),De(t.temDivergencia?28:-1)}}function O5(n,e){n&1&&(_(0,"div",18),X(),_(1,"svg",42),se(2,"path",43),w(),ye(),_(3,"p",44),D(4,"Nenhum pedido encontrado."),w()())}function P5(n,e){if(n&1){let t=st();_(0,"div",3)(1,"div")(2,"h2",4),D(3,"Pedidos"),w(),_(4,"p",5),D(5,"Gest\xE3o de remessas e confer\xEAncias."),w()(),_(6,"div",6)(7,"div",7),X(),_(8,"svg",8),se(9,"path",9),w(),ye(),_(10,"input",10),Gt("ngModelChange",function(i){ae(t);let o=q();return nn(o.filterDate,i)||(o.filterDate=i),ce(i)}),w(),Xf(11,M5,2,0,"button",11),w(),_(12,"button",12),ee("click",function(){ae(t);let i=q();return ce(i.startNewOrder())}),X(),_(13,"svg",13),se(14,"path",14),w(),ye(),_(15,"span",15),D(16,"Nova Remessa"),w()()()(),_(17,"div",16),mt(18,N5,29,27,"div",17,mN),be(20,O5,5,0,"div",18),w()}if(n&2){let t=q();R(10),$t("ngModel",t.filterDate),R(),Ft("ngIf",t.filterDate),R(7),gt(t.filteredOrders()),R(2),De(t.filteredOrders().length===0?20:-1)}}function k5(n,e){if(n&1){let t=st();_(0,"div",56)(1,"input",70),Gt("ngModelChange",function(i){ae(t);let o=q(2);return nn(o.selectorDate,i)||(o.selectorDate=i),ce(i)}),w()()}if(n&2){let t=q(2);R(),$t("ngModel",t.selectorDate)}}function F5(n,e){if(n&1){let t=st();_(0,"div",71)(1,"div",73)(2,"div",74)(3,"span",75),D(4,"Falta"),w(),_(5,"span",76),D(6),Ro(7,"date"),w()(),_(8,"h4",77),D(9),w(),_(10,"p",78),D(11),w()(),_(12,"div",79)(13,"div",66)(14,"p",80),D(15),w()(),_(16,"button",81),ee("click",function(){let i=ae(t).$implicit,o=q(3);return ce(o.addPendingToCart(i.productId,i.diff))}),X(),_(17,"svg",13),se(18,"path",14),w()()()()}if(n&2){let t=e.$implicit;R(6),fe(No(7,4,t.originalDate,"dd/MM/yyyy")),R(3),fe(t.productName),R(2),He("Origem: #",t.orderRef),R(4),fe(t.diff)}}function L5(n,e){n&1&&(_(0,"div",72)(1,"p"),D(2,"Sem pend\xEAncias."),w()())}function V5(n,e){if(n&1&&(mt(0,F5,19,7,"div",71,T5),be(2,L5,3,0,"div",72)),n&2){let t=q(2);gt(t.filteredPendingItems()),R(2),De(t.filteredPendingItems().length===0?2:-1)}}function j5(n,e){if(n&1){let t=st();_(0,"div",86)(1,"button",93),ee("click",function(){ae(t);let i=q().$implicit,o=q(3);return ce(o.decrement(i.id))}),D(2,"-"),w(),_(3,"input",94),ee("ngModelChange",function(i){ae(t);let o=q().$implicit,s=q(3);return ce(s.updateManualQty(o.id,i))}),w(),_(4,"button",95),ee("click",function(){ae(t);let i=q().$implicit,o=q(3);return ce(o.increment(i.id))}),D(5,"+"),w()()}if(n&2){let t=q().$implicit,r=q(3);R(3),Ft("ngModel",r.tempItems[t.id])}}function U5(n,e){if(n&1){let t=st();_(0,"button",96),ee("click",function(){ae(t);let i=q().$implicit,o=q(3);return ce(o.increment(i.id))}),X(),_(1,"svg",13),se(2,"path",14),w()()}}function B5(n,e){if(n&1&&(_(0,"div",82)(1,"div",84)(2,"div",85),be(3,j5,6,1,"div",86)(4,U5,3,0,"button",87),w(),_(5,"div",88)(6,"p",89),D(7),w(),_(8,"h4",90),D(9),w()()(),_(10,"div",91)(11,"span",92),D(12),w()()()),n&2){let t=e.$implicit,r=q(3);R(3),De(r.tempItems[t.id]?3:4),R(4),fe(t.codigo),R(2),fe(t.nome),R(3),He("Est: ",t.estoque_atual)}}function H5(n,e){n&1&&(_(0,"div",83)(1,"p"),D(2,"Nenhum item selecionado."),w()())}function $5(n,e){if(n&1&&(mt(0,B5,13,4,"div",82,mN),be(2,H5,3,0,"div",83)),n&2){let t=q(2);gt(t.filteredProductsSelector()),R(2),De(t.viewMode()==="SELECTED"&&t.filteredProductsSelector().length===0?2:-1)}}function G5(n,e){if(n&1){let t=st();_(0,"div",1)(1,"div",45)(2,"div",46)(3,"div",47)(4,"div")(5,"h2",48),D(6,"Nova Remessa"),w(),_(7,"p",49),D(8,"Selecione produtos do cat\xE1logo."),w()(),_(9,"button",50),ee("click",function(){ae(t);let i=q();return ce(i.cancelNewOrder())}),D(10,"\u2715"),w()(),_(11,"div",51)(12,"div",52)(13,"input",53),ee("ngModelChange",function(i){ae(t);let o=q();return ce(o.selectorSearch.set(i))}),w(),X(),_(14,"svg",54),se(15,"path",55),w()(),be(16,k5,2,1,"div",56),w(),ye(),_(17,"div",57)(18,"button",58),ee("click",function(){ae(t);let i=q();return ce(i.viewMode.set("CATALOG"))}),D(19," Cat\xE1logo "),w(),_(20,"button",59),ee("click",function(){ae(t);let i=q();return ce(i.viewMode.set("PENDING"))}),D(21," Pend\xEAncias "),_(22,"span",60),D(23),w()(),_(24,"button",59),ee("click",function(){ae(t);let i=q();return ce(i.viewMode.set("SELECTED"))}),D(25," Selecionados "),_(26,"span",61),D(27),w()()()(),_(28,"div",62),be(29,V5,3,1),be(30,$5,3,1),w(),_(31,"div",63)(32,"input",64),Gt("ngModelChange",function(i){ae(t);let o=q();return nn(o.newOrderFornecedor,i)||(o.newOrderFornecedor=i),ce(i)}),w(),_(33,"div",65)(34,"div",66)(35,"p",67),D(36,"Total Geral"),w(),_(37,"p",48),D(38),_(39,"span",68),D(40,"un"),w()()(),_(41,"button",69),ee("click",function(){ae(t);let i=q();return ce(i.saveOrder())}),D(42," Salvar Remessa "),w()()()()()}if(n&2){let t=q();R(13),Ft("ngModel",t.selectorSearch()),R(3),De(t.viewMode()==="PENDING"?16:-1),R(2),Ee("bg-dark",t.viewMode()==="CATALOG")("text-white",t.viewMode()==="CATALOG")("bg-gray-100",t.viewMode()!=="CATALOG")("text-muted",t.viewMode()!=="CATALOG"),R(2),Ee("bg-yellow-400",t.viewMode()==="PENDING")("text-dark",t.viewMode()==="PENDING")("bg-gray-100",t.viewMode()!=="PENDING")("text-muted",t.viewMode()!=="PENDING"),R(3),fe(t.pendingItemsCount()),R(),Ee("bg-primary",t.viewMode()==="SELECTED")("text-white",t.viewMode()==="SELECTED")("bg-gray-100",t.viewMode()!=="SELECTED")("text-muted",t.viewMode()!=="SELECTED"),R(3),fe(t.getUniqueSelectedCount()),R(2),De(t.viewMode()==="PENDING"?29:-1),R(),De(t.viewMode()!=="PENDING"?30:-1),R(2),$t("ngModel",t.newOrderFornecedor),R(6),He("",t.getTotalSelectedCount()," "),R(3),Ft("disabled",t.getTotalSelectedCount()===0)}}function q5(n,e){n&1&&(_(0,"div",98)(1,"div",112),X(),_(2,"svg",113),se(3,"path",114),w()(),ye(),_(4,"h3",115),D(5,"Conferido!"),w(),_(6,"p",116),D(7,"O estoque foi atualizado com sucesso."),w()())}function z5(n,e){if(n&1&&(_(0,"span",121),D(1),w()),n&2){let t=q().$implicit;R(),He(" Falta: ",t.quantidadeSolicitada-(t.quantidadeRecebida||0)," ")}}function W5(n,e){if(n&1){let t=st();_(0,"div",117)(1,"div",118)(2,"div",119)(3,"span",120),D(4),w(),be(5,z5,2,1,"span",121),w(),_(6,"h4",122),D(7),w()(),_(8,"div",123)(9,"button",124),ee("click",function(){let i=ae(t).$implicit,o=q(2);return ce(o.updateItemQuantity(i.produtoId,0))}),X(),_(10,"svg",13),se(11,"path",125),w()(),ye(),_(12,"button",126),ee("click",function(){let i=ae(t).$implicit,o=q(2);return ce(o.updateItemQuantity(i.produtoId,i.quantidadeSolicitada))}),X(),_(13,"svg",13),se(14,"path",127),w()(),ye(),se(15,"div",128),_(16,"div",129)(17,"button",130),ee("click",function(){let i=ae(t).$implicit,o=q(2);return ce(o.updateItemQuantity(i.produtoId,o.Math.max(0,(i.quantidadeRecebida||0)-1)))}),D(18,"-"),w(),_(19,"input",131),ee("input",function(i){let o=ae(t).$implicit,s=q(2);return ce(s.updateItemQuantityFromInput(o.produtoId,i))}),w(),_(20,"button",132),ee("click",function(){let i=ae(t).$implicit,o=q(2);return ce(o.updateItemQuantity(i.produtoId,(i.quantidadeRecebida||0)+1))}),D(21,"+"),w()()()()}if(n&2){let t=e.$implicit,r=q(2);Ee("ring-2",(t.quantidadeRecebida||0)===t.quantidadeSolicitada&&(t.quantidadeRecebida||0)>0)("ring-primary",(t.quantidadeRecebida||0)===t.quantidadeSolicitada&&(t.quantidadeRecebida||0)>0)("ring-inset",!0)("bg-white",(t.quantidadeRecebida||0)>0),R(4),He("Solicitado: ",t.quantidadeSolicitada),R(),De((t.quantidadeRecebida||0)<t.quantidadeSolicitada?5:-1),R(2),fe(r.getProductName(t.produtoId)),R(12),Ft("value",t.quantidadeRecebida||0)}}function K5(n,e){if(n&1){let t=st();_(0,"div",2)(1,"div",97),be(2,q5,8,0,"div",98),_(3,"div",99)(4,"div",47)(5,"div")(6,"h3",48),D(7),w(),_(8,"p",100),D(9),w()(),_(10,"button",50),ee("click",function(){ae(t);let i=q();return ce(i.closeReceive())}),D(11,"\u2715"),w()(),_(12,"div",101)(13,"div",102)(14,"label",103),D(15,"Conferente"),w(),_(16,"input",104),Gt("ngModelChange",function(i){ae(t);let o=q();return nn(o.conferenteName,i)||(o.conferenteName=i),ce(i)}),w()(),_(17,"div",102)(18,"label",103),D(19,"Data"),w(),_(20,"input",105),Gt("ngModelChange",function(i){ae(t);let o=q();return nn(o.receiveDate,i)||(o.receiveDate=i),ce(i)}),w()()(),_(21,"div",106)(22,"button",107),ee("click",function(){ae(t);let i=q();return ce(i.receiveFilter.set("ALL"))}),D(23,"Todos"),w(),_(24,"button",107),ee("click",function(){ae(t);let i=q();return ce(i.receiveFilter.set("RECEIVED"))}),D(25,"Recebidos"),w(),_(26,"button",107),ee("click",function(){ae(t);let i=q();return ce(i.receiveFilter.set("PENDING"))}),D(27,"Pendentes"),w()()(),_(28,"div",108),mt(29,W5,22,12,"div",109,x5),w(),_(31,"div",110)(32,"button",111),ee("click",function(){ae(t);let i=q();return ce(i.confirmReceipt())}),_(33,"span"),D(34,"Confirmar Confer\xEAncia"),w()()()()()}if(n&2){let t=q();R(2),De(t.showSuccessAnimation?2:-1),R(5),He("Confer\xEAncia #",t.activeOrder.numero),R(2),fe(t.activeOrder.fornecedor||"Fornecedor n\xE3o informado"),R(7),$t("ngModel",t.conferenteName),R(4),$t("ngModel",t.receiveDate),R(2),Ee("bg-dark",t.receiveFilter()==="ALL")("text-white",t.receiveFilter()==="ALL")("bg-gray-100",t.receiveFilter()!=="ALL")("text-muted",t.receiveFilter()!=="ALL"),R(2),Ee("bg-primary",t.receiveFilter()==="RECEIVED")("text-white",t.receiveFilter()==="RECEIVED")("bg-gray-100",t.receiveFilter()!=="RECEIVED")("text-muted",t.receiveFilter()!=="RECEIVED"),R(2),Ee("bg-secondary",t.receiveFilter()==="PENDING")("text-white",t.receiveFilter()==="PENDING")("bg-gray-100",t.receiveFilter()!=="PENDING")("text-muted",t.receiveFilter()!=="PENDING"),R(3),gt(t.filteredReceiveItems()),R(3),Ft("disabled",!t.conferenteName||!t.receiveDate)}}var Hm=class n{constructor(){this.db=j(Ln);this.Math=Math;this.isCreatingOrder=!1;this.activeOrder=null;this.activeOrderItems=Ne([]);this.showSuccessAnimation=!1;this.filterDate="";this.selectorSearch=Ne("");this.selectorDate="";this.viewMode=Ne("CATALOG");this.tempItems={};this.newOrderFornecedor="";this.conferenteName="";this.receiveDate="";this.receiveFilter=Ne("ALL");this.filteredOrders=tt(()=>{let e=this.db.orders();return this.filterDate&&(e=e.filter(t=>t.dataCriacao.startsWith(this.filterDate))),e.sort((t,r)=>new Date(r.dataCriacao).getTime()-new Date(t.dataCriacao).getTime())});this.filteredReceiveItems=tt(()=>{let e=this.activeOrderItems(),t=this.receiveFilter();return t==="RECEIVED"?e.filter(r=>(r.quantidadeRecebida||0)>0):t==="PENDING"?e.filter(r=>(r.quantidadeRecebida||0)<r.quantidadeSolicitada):e});this.countReceived=tt(()=>this.activeOrderItems().filter(e=>(e.quantidadeRecebida||0)>0).length);this.countPending=tt(()=>this.activeOrderItems().filter(e=>(e.quantidadeRecebida||0)<e.quantidadeSolicitada).length);this.pendingItems=tt(()=>{let e=this.db.orders(),t=[];return e.forEach(r=>{r.status==="RECEBIDO"&&r.itens.forEach(i=>{let o=i.quantidadeRecebida||0;if(o<i.quantidadeSolicitada){let s=i.quantidadeSolicitada-o,a=this.db.products().find(c=>c.id===i.produtoId);a&&s>0&&t.push({uniqueKey:r.id+"_"+i.produtoId,productId:i.produtoId,productName:a.nome,diff:s,originalDate:r.dataCriacao,orderRef:r.numero})}})}),t});this.filteredPendingItems=tt(()=>{let e=this.pendingItems(),t=this.selectorSearch().toLowerCase(),r=this.selectorDate;return t&&(e=e.filter(i=>i.productName.toLowerCase().includes(t))),r&&(e=e.filter(i=>i.originalDate.startsWith(r))),e});this.pendingItemsCount=tt(()=>this.pendingItems().length);this.filteredProductsSelector=tt(()=>{let e=this.selectorSearch().toLowerCase(),t=this.viewMode(),i=this.db.products();return t==="SELECTED"&&(i=i.filter(o=>this.tempItems[o.id]&&this.tempItems[o.id]>0)),e&&(i=i.filter(o=>{let s=o.nome?o.nome.toLowerCase():"",a=o.codigo?o.codigo.toLowerCase():"";return s.includes(e)||a.includes(e)})),i})}startNewOrder(){this.tempItems={},this.newOrderFornecedor="",this.selectorSearch.set(""),this.selectorDate="",this.viewMode.set("CATALOG"),this.isCreatingOrder=!0}cancelNewOrder(){this.isCreatingOrder=!1}addPendingToCart(e,t){this.tempItems[e]||(this.tempItems[e]=0),this.tempItems[e]+=t}increment(e){this.tempItems[e]||(this.tempItems[e]=0),this.tempItems[e]++}decrement(e){this.tempItems[e]>0&&(this.tempItems[e]--,this.tempItems[e]===0&&delete this.tempItems[e])}updateManualQty(e,t){let r=parseInt(t);isNaN(r)||r<=0?delete this.tempItems[e]:this.tempItems[e]=r}getTotalSelectedCount(){return Object.values(this.tempItems).reduce((e,t)=>e+t,0)}getUniqueSelectedCount(){return Object.keys(this.tempItems).length}saveOrder(){let e=Object.entries(this.tempItems).map(([t,r])=>({produtoId:t,quantidadeSolicitada:r,quantidadeRecebida:0}));e.length!==0&&(this.db.createOrder({fornecedor:this.newOrderFornecedor||"Remessa Geral",itens:e}),this.isCreatingOrder=!1)}openReceive(e){this.activeOrder=e;let t=JSON.parse(JSON.stringify(e.itens));e.status==="PENDENTE"&&t.forEach(r=>r.quantidadeRecebida=0),this.activeOrderItems.set(t),this.conferenteName=e.quemConferiu||"",e.dataRecebimento?this.receiveDate=e.dataRecebimento.split("T")[0]:this.receiveDate=new Date().toISOString().split("T")[0]}updateItemQuantity(e,t){this.activeOrderItems.update(r=>r.map(i=>i.produtoId===e?re(L({},i),{quantidadeRecebida:t}):i))}updateItemQuantityFromInput(e,t){let r=parseInt(t.target.value)||0;this.updateItemQuantity(e,r)}closeReceive(){this.activeOrder=null,this.receiveFilter.set("ALL"),this.showSuccessAnimation=!1}confirmReceipt(){this.activeOrder&&(this.showSuccessAnimation=!0,setTimeout(()=>{this.db.receiveOrder(this.activeOrder.id,this.activeOrderItems(),this.conferenteName),this.closeReceive()},1500))}getProductName(e){return this.db.products().find(t=>t.id===e)?.nome||"Item Exclu\xEDdo"}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=en({type:n,selectors:[["app-orders"]],decls:4,vars:3,consts:[[1,"h-full","flex","flex-col","relative","max-w-[1600px]","mx-auto","px-4","md:px-8","py-6","space-y-8"],[1,"fixed","inset-0","bg-gray-100/50","backdrop-blur-sm","z-50","flex","flex-col","animate-scale-in","p-4","md:p-8"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4","backdrop-enter"],[1,"flex","flex-col","md:flex-row","justify-between","items-end","gap-6","animate-enter",2,"animation-delay","0ms"],[1,"text-3xl","font-bold","text-dark","tracking-tight"],[1,"text-muted","text-sm","mt-1","font-medium"],[1,"flex","items-center","gap-4","w-full","md:w-auto"],[1,"bg-white","flex","items-center","px-5","py-3","rounded-full","shadow-card","border-none","focus-within:ring-2","focus-within:ring-primary/20","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["type","date",1,"bg-transparent","border-none","outline-none","text-sm","text-dark","font-medium",3,"ngModelChange","ngModel"],["class","ml-2 text-muted hover:text-danger rounded-full p-1 hover:bg-gray-100",3,"click",4,"ngIf"],[1,"bg-primary","hover:bg-teal-700","text-white","px-6","py-3","rounded-full","font-bold","flex","items-center","gap-2","transition-all","shadow-lg","active:scale-95","text-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"hidden","md:inline"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","pb-20"],[1,"animate-enter","bg-white","rounded-[2rem]","p-6","shadow-card","flex","flex-col","justify-between","relative","overflow-hidden","group","hover:-translate-y-2","hover:shadow-2xl","transition-all","duration-300","cursor-pointer","h-64",3,"animation-delay"],[1,"col-span-full","py-20","text-center","text-muted","animate-enter","opacity-60"],[1,"ml-2","text-muted","hover:text-danger","rounded-full","p-1","hover:bg-gray-100",3,"click"],[1,"animate-enter","bg-white","rounded-[2rem]","p-6","shadow-card","flex","flex-col","justify-between","relative","overflow-hidden","group","hover:-translate-y-2","hover:shadow-2xl","transition-all","duration-300","cursor-pointer","h-64",3,"click"],[1,"absolute","top-0","left-8","right-8","h-1","rounded-b-full","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"flex","justify-between","items-start","mb-6","z-10"],[1,"text-2xl","font-bold","text-dark","tracking-tight"],[1,"text-sm","text-muted","font-medium"],[1,"text-xs","text-muted","font-mono","mt-1","opacity-60"],[1,"text-[10px]","font-bold","tracking-widest","uppercase","px-3","py-1.5","rounded-full"],[1,"space-y-3","z-10"],[1,"flex","items-center","gap-3","text-xs","text-dark","font-medium","p-2","rounded-xl","bg-gray-50/50"],[1,"w-6","h-6","rounded-full","bg-white","shadow-sm","flex","items-center","justify-center","text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"truncate"],[1,"mt-auto","flex","justify-between","items-end","pt-4","z-10"],[1,"text-xs","font-bold","text-muted","uppercase","tracking-wider"],[1,"w-10","h-10","rounded-full","bg-dark","text-white","flex","items-center","justify-center","transform","group-hover:scale-110","transition-transform","shadow-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"absolute","-right-10","-bottom-10","w-32","h-32","rounded-full","bg-gray-50","group-hover:bg-gray-100","transition-colors","z-0"],[1,"absolute","bottom-6","left-6","flex","items-center","gap-1.5","text-danger","bg-white/80","backdrop-blur","rounded-full","px-2","py-1","shadow-sm","border","border-danger/10","z-20"],[1,"w-2","h-2","rounded-full","bg-danger","animate-pulse"],[1,"text-[10px]","font-bold"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-sm","font-medium"],[1,"bg-white","w-full","max-w-5xl","mx-auto","h-full","rounded-[2.5rem]","shadow-2xl","flex","flex-col","overflow-hidden","border","border-white"],[1,"px-8","pt-8","pb-4","bg-white","z-10","flex","flex-col","gap-6"],[1,"flex","justify-between","items-start"],[1,"text-2xl","font-bold","text-dark"],[1,"text-muted","text-sm","mt-1"],[1,"w-10","h-10","rounded-full","bg-gray-50","text-dark","hover:bg-gray-200","flex","items-center","justify-center","transition-colors","font-bold",3,"click"],[1,"flex","flex-col","sm:flex-row","gap-4"],[1,"relative","flex-1"],["type","text","placeholder","Buscar produto...",1,"w-full","bg-gray-50","rounded-full","py-3","pl-12","pr-6","text-sm","text-dark","placeholder-gray-400","focus:bg-white","focus:ring-2","focus:ring-primary/20","outline-none","transition-all","shadow-inner",3,"ngModelChange","ngModel"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","absolute","left-4","top-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"relative","animate-scale-in"],[1,"flex","items-center","gap-2","mt-2","pb-1"],[1,"px-6","py-2.5","rounded-full","text-xs","font-bold","transition-all","relative","whitespace-nowrap",3,"click"],[1,"px-6","py-2.5","rounded-full","text-xs","font-bold","transition-all","relative","flex","items-center","gap-2","whitespace-nowrap",3,"click"],[1,"bg-white/30","text-dark","text-[10px]","px-1.5","py-0.5","rounded-full","font-extrabold"],[1,"bg-white/20","text-white","text-[10px]","px-1.5","py-0.5","rounded-full","font-extrabold"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-8","pt-2","space-y-3","bg-white"],[1,"p-6","bg-white","border-t","border-gray-100","flex","flex-col","md:flex-row","justify-between","items-center","gap-6","z-20","shadow-[0_-10px_40px_rgba(0,0,0,0.05)]"],["type","text","placeholder","Nome do Fornecedor (Opcional)",1,"w-full","md:w-80","bg-gray-50","rounded-xl","px-5","py-3","text-sm","text-dark","outline-none","focus:ring-2","focus:ring-primary/20","transition-all",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-6","w-full","md:w-auto","justify-end"],[1,"text-right"],[1,"text-[10px]","text-muted","uppercase","font-bold","tracking-widest"],[1,"text-sm","font-normal","text-muted"],[1,"bg-primary","hover:bg-teal-700","disabled:bg-gray-200","disabled:text-gray-400","disabled:cursor-not-allowed","text-white","px-8","py-3","rounded-xl","font-bold","shadow-lg","disabled:shadow-none","transition-all","active:scale-95","w-full","md:w-auto","text-sm","tracking-wide",3,"click","disabled"],["type","date",1,"bg-gray-50","rounded-full","py-3","px-6","text-sm","text-dark","outline-none","focus:ring-2","focus:ring-primary/20","h-full","shadow-inner",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","bg-white","border","border-gray-100","p-5","rounded-2xl","shadow-sm","hover:shadow-md","transition-all"],[1,"flex","flex-col","items-center","justify-center","py-20","text-muted","text-sm","opacity-50"],[1,"flex-1","min-w-0","pr-4"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-[10px]","bg-yellow-50","text-secondary","px-2","py-1","rounded-md","uppercase","font-bold","tracking-wide"],[1,"text-[10px]","text-muted","font-medium"],[1,"text-base","font-bold","text-dark","truncate"],[1,"text-xs","text-muted","mt-0.5"],[1,"flex","items-center","gap-6"],[1,"text-2xl","font-bold","text-secondary"],[1,"w-10","h-10","rounded-full","bg-gray-50","hover:bg-secondary","hover:text-white","text-dark","transition-colors","flex","items-center","justify-center","shadow-sm",3,"click"],[1,"flex","items-center","justify-between","bg-gray-50","p-4","rounded-2xl","hover:bg-white","hover:shadow-lg","transition-all","group","animate-enter","border","border-transparent","hover:border-gray-100"],[1,"py-20","text-center","text-muted","text-sm","opacity-50"],[1,"flex","items-center","gap-4","flex-1","min-w-0"],[1,"shrink-0"],[1,"flex","items-center","gap-1","bg-white","rounded-xl","p-1","shadow-sm"],[1,"w-10","h-10","rounded-xl","bg-white","text-gray-400","border","border-gray-200","hover:border-primary","hover:text-primary","hover:shadow-md","flex","items-center","justify-center","transition-all"],[1,"min-w-0"],[1,"text-[10px]","text-gray-400","font-bold","uppercase","tracking-wider","mb-0.5"],[1,"text-sm","font-bold","text-dark","truncate"],[1,"shrink-0","pl-6","ml-2","flex","flex-col","items-end"],[1,"text-xs","font-bold","text-gray-400","bg-gray-200/50","px-2","py-1","rounded-md"],[1,"w-8","h-8","rounded-lg","bg-gray-100","hover:bg-gray-200","text-dark","font-bold","transition-colors",3,"click"],["type","number",1,"w-12","bg-transparent","text-center","text-primary","font-bold","text-lg","outline-none",3,"ngModelChange","ngModel"],[1,"w-8","h-8","rounded-lg","bg-primary","text-white","font-bold","hover:bg-teal-700","transition-colors",3,"click"],[1,"w-10","h-10","rounded-xl","bg-white","text-gray-400","border","border-gray-200","hover:border-primary","hover:text-primary","hover:shadow-md","flex","items-center","justify-center","transition-all",3,"click"],[1,"bg-white","w-full","max-w-4xl","max-h-[90vh]","rounded-[2.5rem]","shadow-2xl","flex","flex-col","modal-enter","overflow-hidden","relative"],[1,"absolute","inset-0","z-50","bg-white","flex","flex-col","items-center","justify-center","animate-enter"],[1,"p-8","border-b","border-gray-100","bg-white","flex","flex-col","gap-6"],[1,"text-sm","text-muted","mt-1","font-medium"],[1,"flex","gap-4","bg-gray-50","p-2","rounded-2xl","border","border-gray-100"],[1,"flex-1","bg-white","rounded-xl","p-2","px-4","shadow-sm"],[1,"text-[10px]","font-bold","text-gray-400","uppercase","tracking-wider","block","mb-1"],["type","text","placeholder","Seu nome...",1,"w-full","bg-transparent","text-dark","font-bold","text-sm","outline-none","placeholder:font-normal",3,"ngModelChange","ngModel"],["type","date",1,"w-full","bg-transparent","text-dark","font-bold","text-sm","outline-none",3,"ngModelChange","ngModel"],[1,"flex","gap-2"],[1,"px-5","py-2","rounded-full","text-xs","font-bold","transition-all",3,"click"],[1,"p-8","pt-2","overflow-y-auto","flex-1","space-y-3","custom-scrollbar","bg-white"],[1,"bg-gray-50","p-4","rounded-2xl","flex","items-center","justify-between","gap-6","transition-all",3,"ring-2","ring-primary","ring-inset","bg-white"],[1,"p-6","border-t","border-gray-100","bg-white"],[1,"w-full","bg-primary","hover:bg-teal-700","text-white","py-4","rounded-xl","font-bold","shadow-lg","disabled:bg-gray-200","disabled:text-gray-400","disabled:shadow-none","transition-all","flex","justify-center","items-center","gap-2","tracking-wide",3,"click","disabled"],[1,"w-24","h-24","rounded-full","bg-green-50","flex","items-center","justify-center","mb-6","animate-scale-in"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-primary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"],[1,"text-3xl","font-bold","text-dark","mb-2"],[1,"text-muted","text-base"],[1,"bg-gray-50","p-4","rounded-2xl","flex","items-center","justify-between","gap-6","transition-all"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-1"],[1,"text-[10px]","font-bold","text-gray-400","uppercase","tracking-wider"],[1,"bg-yellow-100","text-yellow-800","text-[10px]","px-2","py-0.5","rounded-full","font-bold"],[1,"text-sm","font-bold","text-dark"],[1,"flex","items-center","gap-3"],["title","Definir como Pendente (0)",1,"w-10","h-10","flex","items-center","justify-center","bg-red-50","text-danger","rounded-xl","hover:bg-red-100","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["title","Definir como Recebido (Total)",1,"w-10","h-10","flex","items-center","justify-center","bg-teal-50","text-primary","rounded-xl","hover:bg-teal-100","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"w-px","h-8","bg-gray-200","mx-1"],[1,"flex","items-center","gap-2","bg-white","shadow-sm","p-1","rounded-xl","border","border-gray-100"],[1,"w-10","h-10","flex","items-center","justify-center","bg-gray-50","rounded-lg","text-dark","hover:bg-gray-100","font-bold","transition-colors",3,"click"],["type","number","min","0",1,"w-14","bg-transparent","text-center","font-bold","text-dark","text-xl","outline-none","appearance-none",3,"input","value"],[1,"w-10","h-10","flex","items-center","justify-center","bg-primary","rounded-lg","text-white","hover:bg-teal-700","font-bold","transition-colors","shadow-md",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0),be(1,P5,21,3),be(2,G5,43,33,"div",1),be(3,K5,35,30,"div",2),w()),t&2&&(R(),De(r.isCreatingOrder?-1:1),R(),De(r.isCreatingOrder?2:-1),R(),De(r.activeOrder&&!r.isCreatingOrder?3:-1))},dependencies:[un,b0,Zi,Yi,Zl,mc,bs,Mu],encapsulation:2})}};var $m=class n{constructor(){this.db=j(Ln)}exportCSV(e){let t=[],r="";if(e==="products"?(t=this.db.products(),r="epi_estoque.csv"):e==="movements"?(t=this.db.movements(),r="epi_movimentacoes.csv"):(t=this.db.orders(),r="epi_pedidos.csv"),!t.length){alert("Sem dados para exportar.");return}let i=Object.keys(t[0]).join(","),o=t.map(l=>Object.values(l).map(d=>d==null?'""':typeof d=="object"?`"${JSON.stringify(d).replace(/"/g,'""')}"`:`"${String(d).replace(/"/g,'""')}"`).join(",")),s="data:text/csv;charset=utf-8,"+[i,...o].join(`
`),a=encodeURI(s),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",r),document.body.appendChild(c),c.click(),document.body.removeChild(c)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=en({type:n,selectors:[["app-reports"]],decls:56,vars:0,consts:[[1,"space-y-12","max-w-6xl","mx-auto","px-4","py-12"],[1,"text-center"],[1,"text-4xl","font-extrabold","text-dark","tracking-tight","mb-3","animate-fade-in-up","opacity-0",2,"animation-delay","0ms"],[1,"text-muted","font-medium","text-lg","max-w-xl","mx-auto","animate-fade-in-up","opacity-0",2,"animation-delay","100ms"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8"],[1,"group","relative","bg-white","p-10","rounded-[2.5rem]","shadow-card","border","border-transparent","hover:border-primary/20","text-left","transition-all","duration-300","hover:-translate-y-2","hover:shadow-2xl","overflow-hidden","animate-fade-in-up","opacity-0",2,"animation-delay","200ms",3,"click"],[1,"absolute","top-0","right-0","w-32","h-32","bg-teal-50","rounded-bl-full","-mr-8","-mt-8","group-hover:scale-110","transition-transform","duration-500"],[1,"relative","z-10"],[1,"w-16","h-16","rounded-3xl","bg-teal-50","text-primary","flex","items-center","justify-center","mb-8","border","border-primary/10","shadow-sm","group-hover:scale-110","transition-transform"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-2xl","font-bold","text-dark","mb-2"],[1,"text-sm","text-muted","leading-relaxed"],[1,"mt-8","flex","items-center","gap-2","text-primary","font-bold","text-xs","uppercase","tracking-widest","opacity-60","group-hover:opacity-100","transform","translate-y-2","group-hover:translate-y-0","transition-all","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 8l4 4m0 0l-4 4m4-4H3"],[1,"group","relative","bg-white","p-10","rounded-[2.5rem]","shadow-card","border","border-transparent","hover:border-secondary/20","text-left","transition-all","duration-300","hover:-translate-y-2","hover:shadow-2xl","overflow-hidden","animate-fade-in-up","opacity-0",2,"animation-delay","300ms",3,"click"],[1,"absolute","top-0","right-0","w-32","h-32","bg-yellow-50","rounded-bl-full","-mr-8","-mt-8","group-hover:scale-110","transition-transform","duration-500"],[1,"w-16","h-16","rounded-3xl","bg-yellow-50","text-secondary","flex","items-center","justify-center","mb-8","border","border-secondary/10","shadow-sm","group-hover:scale-110","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"mt-8","flex","items-center","gap-2","text-secondary","font-bold","text-xs","uppercase","tracking-widest","opacity-60","group-hover:opacity-100","transform","translate-y-2","group-hover:translate-y-0","transition-all","duration-300"],[1,"group","relative","bg-white","p-10","rounded-[2.5rem]","shadow-card","border","border-transparent","hover:border-dark/10","text-left","transition-all","duration-300","hover:-translate-y-2","hover:shadow-2xl","overflow-hidden","animate-fade-in-up","opacity-0",2,"animation-delay","400ms",3,"click"],[1,"absolute","top-0","right-0","w-32","h-32","bg-gray-50","rounded-bl-full","-mr-8","-mt-8","group-hover:scale-110","transition-transform","duration-500"],[1,"w-16","h-16","rounded-3xl","bg-gray-50","text-dark","flex","items-center","justify-center","mb-8","border","border-gray-100","shadow-sm","group-hover:scale-110","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-8","flex","items-center","gap-2","text-dark","font-bold","text-xs","uppercase","tracking-widest","opacity-60","group-hover:opacity-100","transform","translate-y-2","group-hover:translate-y-0","transition-all","duration-300"],[1,"flex","justify-center","animate-fade-in-up","opacity-0",2,"animation-delay","500ms"],[1,"inline-flex","items-center","gap-3","px-8","py-4","bg-gray-50","rounded-full","text-xs","font-bold","text-muted","border","border-gray-100","shadow-inner"],[1,"w-2","h-2","rounded-full","bg-green-500"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"div",1)(2,"h2",2),D(3,"Relat\xF3rios Corporativos"),B(),F(4,"p",3),D(5,"Exporta\xE7\xE3o instant\xE2nea de dados para auditoria e controle."),B()(),F(6,"div",4)(7,"button",5),ia("click",function(){return r.exportCSV("products")}),Ae(8,"div",6),F(9,"div",7)(10,"div",8),X(),F(11,"svg",9),Ae(12,"path",10),B()(),ye(),F(13,"h3",11),D(14,"Invent\xE1rio"),B(),F(15,"p",12),D(16,"Relat\xF3rio completo do saldo atual, incluindo m\xEDnimos, m\xE1ximos e categorias."),B(),F(17,"div",13)(18,"span"),D(19,"Gerar CSV"),B(),X(),F(20,"svg",14),Ae(21,"path",15),B()()()(),ye(),F(22,"button",16),ia("click",function(){return r.exportCSV("movements")}),Ae(23,"div",17),F(24,"div",7)(25,"div",18),X(),F(26,"svg",9),Ae(27,"path",19),B()(),ye(),F(28,"h3",11),D(29,"Movimenta\xE7\xF5es"),B(),F(30,"p",12),D(31,"Rastreabilidade total. Hist\xF3rico de entradas, sa\xEDdas, datas e respons\xE1veis."),B(),F(32,"div",20)(33,"span"),D(34,"Gerar CSV"),B(),X(),F(35,"svg",14),Ae(36,"path",15),B()()()(),ye(),F(37,"button",21),ia("click",function(){return r.exportCSV("orders")}),Ae(38,"div",22),F(39,"div",7)(40,"div",23),X(),F(41,"svg",9),Ae(42,"path",24),B()(),ye(),F(43,"h3",11),D(44,"Pedidos"),B(),F(45,"p",12),D(46,"Relat\xF3rio de remessas, confer\xEAncias de entrada e diverg\xEAncias."),B(),F(47,"div",25)(48,"span"),D(49,"Gerar CSV"),B(),X(),F(50,"svg",14),Ae(51,"path",15),B()()()()(),ye(),F(52,"div",26)(53,"div",27),Ae(54,"span",28),D(55," Exporta\xE7\xE3o compat\xEDvel com Excel e Google Sheets (.csv) "),B()()())},dependencies:[un],encapsulation:2})}};var Q5=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:jm},{path:"inventory",component:Um},{path:"movements",component:Bm},{path:"orders",component:Hm},{path:"reports",component:$m}];P0(zh,{providers:[h0(),l_(Q5,d_())]}).catch(n=>console.error(n));
